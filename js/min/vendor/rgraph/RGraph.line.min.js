
RGraph=window.RGraph||{isRGraph:true};RGraph.Line=function(o){if(typeof o==="object"&&typeof o.data==="object"&&typeof o.id==="string"){var b=o.id;var c=document.getElementById(b);var k=o.data;var e=true}else{var b=o;var c=document.getElementById(b);var k=arguments[1]}this.id=b;this.canvas=c;this.context=this.canvas.getContext("2d");this.canvas.__object__=this;this.type="line";this.max=0;this.coords=[];this.coords2=[];this.coords.key=[];this.coordsText=[];this.coordsSpline=[];this.hasnegativevalues=false;this.isRGraph=true;this.uid=RGraph.CreateUID();this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID();this.colorsParsed=false;this.original_colors=[];this.firstDraw=true;this.properties={"chart.background.barcolor1":"rgba(0,0,0,0)","chart.background.barcolor2":"rgba(0,0,0,0)","chart.background.grid":1,"chart.background.grid.width":1,"chart.background.grid.hsize":25,"chart.background.grid.vsize":25,"chart.background.grid.color":"#ddd","chart.background.grid.vlines":true,"chart.background.grid.hlines":true,"chart.background.grid.border":true,"chart.background.grid.autofit":true,"chart.background.grid.autofit.align":false,"chart.background.grid.autofit.numhlines":5,"chart.background.grid.autofit.numvlines":20,"chart.background.grid.dashed":false,"chart.background.grid.dotted":false,"chart.background.hbars":null,"chart.background.image":null,"chart.background.image.stretch":true,"chart.background.image.x":null,"chart.background.image.y":null,"chart.background.image.w":null,"chart.background.image.h":null,"chart.background.image.align":null,"chart.background.color":null,"chart.labels":null,"chart.labels.ingraph":null,"chart.labels.above":false,"chart.labels.above.size":8,"chart.labels.above.decimals":null,"chart.labels.above.color":null,"chart.labels.above.background":"white","chart.labels.above.font":null,"chart.labels.above.border":true,"chart.labels.above.offsety":5,"chart.labels.above.units.pre":"","chart.labels.above.units.post":"","chart.labels.above.specific":null,"chart.xtickgap":20,"chart.smallxticks":3,"chart.largexticks":5,"chart.ytickgap":20,"chart.smallyticks":3,"chart.largeyticks":5,"chart.numyticks":10,"chart.linewidth":2.01,"chart.colors":["red","#0f0","#00f","#f0f","#ff0","#0ff","green","pink","blue","black"],"chart.hmargin":0,"chart.tickmarks.dot.stroke":"white","chart.tickmarks.dot.fill":null,"chart.tickmarks.dot.linewidth":3,"chart.tickmarks":"endcircle","chart.tickmarks.linewidth":null,"chart.tickmarks.image":null,"chart.tickmarks.image.halign":"center","chart.tickmarks.image.valign":"center","chart.tickmarks.image.offsetx":0,"chart.tickmarks.image.offsety":0,"chart.ticksize":3,"chart.gutter.left":25,"chart.gutter.right":25,"chart.gutter.top":25,"chart.gutter.bottom":30,"chart.tickdirection":-1,"chart.yaxispoints":5,"chart.fillstyle":null,"chart.xaxispos":"bottom","chart.yaxispos":"left","chart.xticks":null,"chart.text.size":12,"chart.text.angle":0,"chart.text.color":"black","chart.text.font":"Arial","chart.ymin":0,"chart.ymax":null,"chart.title":"","chart.title.background":null,"chart.title.hpos":null,"chart.title.vpos":null,"chart.title.bold":true,"chart.title.font":null,"chart.title.xaxis":"","chart.title.xaxis.bold":true,"chart.title.xaxis.size":null,"chart.title.xaxis.font":null,"chart.title.yaxis":"","chart.title.yaxis.bold":true,"chart.title.yaxis.size":null,"chart.title.yaxis.font":null,"chart.title.yaxis.color":null,"chart.title.xaxis.pos":null,"chart.title.yaxis.pos":null,"chart.title.yaxis.x":null,"chart.title.yaxis.y":null,"chart.title.xaxis.x":null,"chart.title.xaxis.y":null,"chart.title.x":null,"chart.title.y":null,"chart.title.halign":null,"chart.title.valign":null,"chart.shadow":true,"chart.shadow.offsetx":2,"chart.shadow.offsety":2,"chart.shadow.blur":3,"chart.shadow.color":"rgba(128,128,128,0.5)","chart.tooltips":null,"chart.tooltips.hotspot.xonly":false,"chart.tooltips.hotspot.size":5,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.event":"onmousemove","chart.tooltips.highlight":true,"chart.tooltips.coords.page":false,"chart.highlight.stroke":"gray","chart.highlight.fill":"white","chart.stepped":false,"chart.key":null,"chart.key.background":"white","chart.key.position":"graph","chart.key.halign":null,"chart.key.shadow":false,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":false,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.color.shape":"square","chart.key.rounded":true,"chart.key.linewidth":1,"chart.key.colors":null,"chart.key.interactive":false,"chart.key.interactive.highlight.chart.stroke":"rgba(255,0,0,0.3)","chart.key.interactive.highlight.label":"rgba(255,0,0,0.2)","chart.key.text.color":"black","chart.contextmenu":null,"chart.ylabels":true,"chart.ylabels.count":5,"chart.ylabels.inside":false,"chart.scale.invert":false,"chart.xlabels.inside":false,"chart.xlabels.inside.color":"rgba(255,255,255,0.5)","chart.noaxes":false,"chart.noyaxis":false,"chart.noxaxis":false,"chart.noendxtick":false,"chart.noendytick":false,"chart.units.post":"","chart.units.pre":"","chart.scale.zerostart":false,"chart.scale.decimals":null,"chart.scale.point":".","chart.scale.thousand":",","chart.crosshairs":false,"chart.crosshairs.color":"#333","chart.crosshairs.hline":true,"chart.crosshairs.vline":true,"chart.annotatable":false,"chart.annotate.color":"black","chart.axesontop":false,"chart.filled":false,"chart.filled.range":false,"chart.filled.range.threshold":null,"chart.filled.range.threshold.colors":["red","green"],"chart.filled.accumulative":true,"chart.variant":null,"chart.axis.color":"black","chart.axis.linewidth":1,"chart.numxticks":(k&&typeof(k[0])=="number"?k.length-1:20),"chart.numyticks":10,"chart.zoom.factor":1.5,"chart.zoom.fade.in":true,"chart.zoom.fade.out":true,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":true,"chart.zoom.background":true,"chart.zoom.action":"zoom","chart.backdrop":false,"chart.backdrop.size":30,"chart.backdrop.alpha":0.2,"chart.resizable":false,"chart.resize.handle.adjust":[0,0],"chart.resize.handle.background":null,"chart.adjustable":false,"chart.noredraw":false,"chart.outofbounds":false,"chart.chromefix":true,"chart.animation.factor":1,"chart.animation.unfold.x":false,"chart.animation.unfold.y":true,"chart.animation.unfold.initial":2,"chart.animation.trace.clip":1,"chart.curvy":false,"chart.line.visible":true,"chart.events.click":null,"chart.events.mousemove":null};for(var l=1;l<arguments.length;++l){if(typeof(arguments[l])=="null"||!arguments[l]){arguments[l]=[]}}this.original_data=[];if(typeof o==="object"&&o.data){if(typeof o.data[0]==="number"||RGraph.isNull(o.data[0])){this.original_data[0]=RGraph.arrayClone(o.data)}else{for(var l=0;l<o.data.length;++l){this.original_data[l]=RGraph.arrayClone(o.data[l])}}}else{for(var l=1;l<arguments.length;++l){if(arguments[1]&&typeof(arguments[1])=="object"&&arguments[1][0]&&typeof(arguments[1][0])=="object"&&arguments[1][0].length){var m=[];for(var l=0;l<arguments[1].length;++l){m[l]=RGraph.array_clone(arguments[1][l])}for(var h=0;h<m.length;++h){this.original_data[h]=RGraph.array_clone(m[h])}}else{this.original_data[l-1]=RGraph.array_clone(arguments[l])}}}if(!this.canvas){alert("[LINE] Fatal error: no canvas support");return}this.data_arr=RGraph.array_linearize(this.original_data);for(var l=0;l<this.data_arr.length;++l){this["$"+l]={}}if(!this.canvas.__rgraph_aa_translated__){this.context.translate(0.5,0.5);this.canvas.__rgraph_aa_translated__=true}var g=RGraph;var f=this.canvas;var p=f.getContext("2d");var a=this.properties;var d=jQuery;var r=g.Path;var n=window;var q=document;var s=Math;if(g.Effects&&typeof g.Effects.decorate==="function"){g.Effects.decorate(this)}this.set=this.Set=function(u){var z=typeof arguments[1]==="undefined"?null:arguments[1];if(arguments.length===1&&typeof u==="object"){g.parseObjectStyleConfig(this,u);return this}u=u.toLowerCase();if(u.substr(0,6)!="chart."){u="chart."+u}if(u=="chart.tooltips"&&typeof z=="object"&&z){var w=[];for(var v=1;v<arguments.length;v++){if(typeof(arguments[v])=="object"&&arguments[v][0]){for(var t=0;t<arguments[v].length;t++){w.push(arguments[v][t])}}else{if(typeof(arguments[v])=="function"){w=arguments[v]}else{w.push(arguments[v])}}}z=w}if(u=="chart.linewidth"&&navigator.userAgent.match(/Chrome/)){if(z==1){z=1.01}else{if(RGraph.is_array(z)){for(var v=0;v<z.length;++v){if(typeof(z[v])=="number"&&z[v]==1){z[v]=1.01}}}}}if(u=="chart.xaxispos"){if(z!="bottom"&&z!="center"&&z!="top"){alert("[LINE] ("+this.id+") chart.xaxispos should be top, center or bottom. Tried to set it to: "+z+" Changing it to center");z="center"}}if(u=="chart.xticks"){u="chart.numxticks"}if(u=="chart.spline"){u="chart.curvy"}if(u=="chart.ylabels.invert"){u="chart.scale.invert"}this.properties[u]=z;return this};this.get=this.Get=function(i){if(i.substr(0,6)!="chart."){i="chart."+i}if(i=="chart.spline"){i="chart.curvy"}return a[i]};this.draw=this.Draw=function(){if(typeof(a["chart.background.image"])=="string"){g.DrawBackgroundImage(this)}g.FireCustomEvent(this,"onbeforedraw");if(!this.colorsParsed){this.parseColors();this.colorsParsed=true}this.gutterLeft=a["chart.gutter.left"];this.gutterRight=a["chart.gutter.right"];this.gutterTop=a["chart.gutter.top"];this.gutterBottom=a["chart.gutter.bottom"];this.data=g.array_clone(this.original_data);this.max=0;if(a["chart.filled"]&&!a["chart.filled.range"]&&this.data.length>1&&a["chart.filled.accumulative"]){var E=[];for(var B=0;B<this.data.length;++B){for(var C=0;C<this.data[B].length;++C){this.data[B][C]=Number(E[C]?E[C]:0)+this.data[B][C];E[C]=this.data[B][C]}}}if(a["chart.ymax"]){this.max=a["chart.ymax"];this.min=a["chart.ymin"]?a["chart.ymin"]:0;this.scale2=g.getScale2(this,{max:this.max,min:a["chart.ymin"],strict:true,"scale.thousand":a["chart.scale.thousand"],"scale.point":a["chart.scale.point"],"scale.decimals":a["chart.scale.decimals"],"ylabels.count":a["chart.ylabels.count"],"scale.round":a["chart.scale.round"],"units.pre":a["chart.units.pre"],"units.post":a["chart.units.post"]});this.max=this.scale2.max?this.scale2.max:0;if(!a["chart.outofbounds"]){for(dataset=0;dataset<this.data.length;++dataset){if(RGraph.isArray(this.data[dataset])){for(var t=0;t<this.data[dataset].length;t++){this.hasnegativevalues=(this.data[dataset][t]<0)||this.hasnegativevalues}}}}}else{this.min=a["chart.ymin"]?a["chart.ymin"]:0;for(dataset=0;dataset<this.data.length;++dataset){for(var t=0;t<this.data[dataset].length;t++){this.max=Math.max(this.max,this.data[dataset][t]?Math.abs(parseFloat(this.data[dataset][t])):0);if(!a["chart.outofbounds"]){this.hasnegativevalues=(this.data[dataset][t]<0)||this.hasnegativevalues}}}this.scale2=g.getScale2(this,{max:this.max,min:a["chart.ymin"],"scale.thousand":a["chart.scale.thousand"],"scale.point":a["chart.scale.point"],"scale.decimals":a["chart.scale.decimals"],"ylabels.count":a["chart.ylabels.count"],"scale.round":a["chart.scale.round"],"units.pre":a["chart.units.pre"],"units.post":a["chart.units.post"]});this.max=this.scale2.max?this.scale2.max:0}if(a["chart.contextmenu"]){g.ShowContext(this)}this.coords=[];this.coordsText=[];this.grapharea=f.height-this.gutterTop-this.gutterBottom;this.halfgrapharea=this.grapharea/2;this.halfTextHeight=a["chart.text.size"]/2;if(a["chart.xaxispos"]=="bottom"&&this.hasnegativevalues&&!g.ISOPERA){alert("[LINE] You have negative values and the X axis is at the bottom. This is not good...")}if(a["chart.variant"]=="3d"){g.Draw3DAxes(this)}g.background.Draw(this);if(a["chart.background.hbars"]&&a["chart.background.hbars"].length>0){g.DrawBars(this)}if(a["chart.axesontop"]==false){this.DrawAxes()}p.save();p.beginPath();p.rect(0,0,f.width*a["chart.animation.trace.clip"],f.height);p.clip();for(var w=0,v=0,A=this.data.length;w<A;w++,v++){p.beginPath();if(!a["chart.filled"]){this.SetShadow(w)}if(a["chart.fillstyle"]){if(typeof(a["chart.fillstyle"])=="object"&&a["chart.fillstyle"][v]){var D=a["chart.fillstyle"][v]}else{if(typeof(a["chart.fillstyle"])=="object"&&a["chart.fillstyle"].toString().indexOf("Gradient")>0){var D=a["chart.fillstyle"]}else{if(typeof(a["chart.fillstyle"])=="string"){var D=a["chart.fillstyle"]}}}}else{if(a["chart.filled"]){var D=a["chart.colors"][v]}else{var D=null}}if(a["chart.tickmarks"]&&typeof(a["chart.tickmarks"])=="object"){var z=a["chart.tickmarks"][w]}else{if(a["chart.tickmarks"]&&typeof(a["chart.tickmarks"])=="string"){var z=a["chart.tickmarks"]}else{if(a["chart.tickmarks"]&&typeof(a["chart.tickmarks"])=="function"){var z=a["chart.tickmarks"]}else{var z=null}}}this.DrawLine(this.data[w],a["chart.colors"][v],D,this.GetLineWidth(v),z,w);p.stroke()}if(a["chart.filled"]&&a["chart.filled.accumulative"]&&!a["chart.curvy"]){for(var w=0;w<this.coords2.length;++w){p.beginPath();p.lineWidth=this.GetLineWidth(w);p.strokeStyle=a["chart.colors"][w];for(var v=0,A=this.coords2[w].length;v<A;++v){if(v==0||this.coords2[w][v][1]==null||(this.coords2[w][v-1]&&this.coords2[w][v-1][1]==null)){p.moveTo(this.coords2[w][v][0],this.coords2[w][v][1])}else{if(a["chart.stepped"]){p.lineTo(this.coords2[w][v][0],this.coords2[w][v-1][1])}p.lineTo(this.coords2[w][v][0],this.coords2[w][v][1])}}p.stroke()}if(a["chart.tickmarks"]){p.beginPath();p.fillStyle="white";for(var w=0,A=this.coords2.length;w<A;++w){p.beginPath();p.strokeStyle=a["chart.colors"][w];for(var v=0;v<this.coords2[w].length;++v){if(typeof(this.coords2[w][v])=="object"&&typeof(this.coords2[w][v][0])=="number"&&typeof(this.coords2[w][v][1])=="number"){var z=typeof(a["chart.tickmarks"])=="object"?a["chart.tickmarks"][w]:a["chart.tickmarks"];this.DrawTick(this.coords2[w],this.coords2[w][v][0],this.coords2[w][v][1],p.strokeStyle,false,v==0?0:this.coords2[w][v-1][0],v==0?0:this.coords2[w][v-1][1],z,v)}}}p.stroke();p.fill()}}else{if(a["chart.filled"]&&a["chart.filled.accumulative"]&&a["chart.curvy"]){for(var w=0;w<this.coordsSpline.length;w+=1){p.beginPath();p.strokeStyle=a["chart.colors"][w];p.lineWidth=this.GetLineWidth(w);for(var v=0,A=this.coordsSpline[w].length;v<A;v+=1){var C=this.coordsSpline[w][v];v==0?p.moveTo(C[0],C[1]):p.lineTo(C[0],C[1])}p.stroke()}for(var w=0,A=this.coords2.length;w<A;w+=1){for(var v=0,u=this.coords2[w].length;v<u;++v){if(typeof(this.coords2[w][v])=="object"&&typeof(this.coords2[w][v][0])=="number"&&typeof(this.coords2[w][v][1])=="number"){var z=typeof a["chart.tickmarks"]=="object"&&!RGraph.is_null(a["chart.tickmarks"])?a["chart.tickmarks"][w]:a["chart.tickmarks"];p.strokeStyle=a["chart.colors"][w];this.DrawTick(this.coords2[w],this.coords2[w][v][0],this.coords2[w][v][1],a["chart.colors"][w],false,v==0?0:this.coords2[w][v-1][0],v==0?0:this.coords2[w][v-1][1],z,v)}}}}}p.restore();p.beginPath();if(a["chart.axesontop"]){this.DrawAxes()}this.DrawLabels();this.DrawRange();if(a["chart.key"]&&a["chart.key"].length&&g.DrawKey){g.DrawKey(this,a["chart.key"],a["chart.colors"])}if(a["chart.labels.above"]){this.drawAboveLabels()}g.DrawInGraphLabels(this);if(a["chart.filled"]&&a["chart.filled.range"]&&this.data.length==2){p.beginPath();var A=this.coords.length/2;p.lineWidth=a["chart.linewidth"];p.strokeStyle=a["chart.colors"][0];for(var w=0;w<A;++w){if(!g.is_null(this.coords[w][1])){if(w==0){p.moveTo(this.coords[w][0],this.coords[w][1])}else{p.lineTo(this.coords[w][0],this.coords[w][1])}}}p.stroke();p.beginPath();if(a["chart.colors"][1]){p.strokeStyle=a["chart.colors"][1]}for(var w=this.coords.length-1;w>=A;--w){if(!g.is_null(this.coords[w][1])){if(w==(this.coords.length-1)){p.moveTo(this.coords[w][0],this.coords[w][1])}else{p.lineTo(this.coords[w][0],this.coords[w][1])}}}p.stroke()}else{if(a["chart.filled"]&&a["chart.filled.range"]){alert("[LINE] You must have only two sets of data for a filled range chart")}}if(a["chart.resizable"]){g.AllowResizing(this)}g.InstallEventListeners(this);if(this.firstDraw){g.fireCustomEvent(this,"onfirstdraw");this.firstDraw=false;this.firstDrawFunc()}g.FireCustomEvent(this,"ondraw");return this};this.drawAxes=this.DrawAxes=function(){if(a["chart.noaxes"]){return}g.noShadow(this);p.lineWidth=a["chart.axis.linewidth"]+0.001;p.lineCap="butt";p.strokeStyle=a["chart.axis.color"];p.beginPath();if(a["chart.noxaxis"]==false){if(a["chart.xaxispos"]=="center"){p.moveTo(this.gutterLeft,Math.round((this.grapharea/2)+this.gutterTop));p.lineTo(f.width-this.gutterRight,Math.round((this.grapharea/2)+this.gutterTop))}else{if(a["chart.xaxispos"]==="top"){p.moveTo(this.gutterLeft,this.gutterTop);p.lineTo(f.width-this.gutterRight,this.gutterTop)}else{p.moveTo(this.gutterLeft,f.height-this.gutterBottom);p.lineTo(f.width-this.gutterRight,f.height-this.gutterBottom)}}}if(a["chart.noyaxis"]==false){if(a["chart.yaxispos"]=="left"){p.moveTo(this.gutterLeft,this.gutterTop);p.lineTo(this.gutterLeft,f.height-this.gutterBottom)}else{p.moveTo(f.width-this.gutterRight,this.gutterTop);p.lineTo(f.width-this.gutterRight,f.height-this.gutterBottom)}}if(a["chart.noxaxis"]==false&&a["chart.numxticks"]>0){var v=(f.width-this.gutterLeft-this.gutterRight)/a["chart.numxticks"];if(!v||v<=0){v=(f.width-this.gutterLeft-this.gutterRight)/(a["chart.labels"]&&a["chart.labels"].length?a["chart.labels"].length-1:10)}for(x=this.gutterLeft+(a["chart.yaxispos"]=="left"?v:0);x<=(f.width-this.gutterRight+1);x+=v){if(a["chart.yaxispos"]=="right"&&x>=(f.width-this.gutterRight-1)){break}if(a["chart.noendxtick"]){if(a["chart.yaxispos"]=="left"&&x>=(f.width-this.gutterRight-1)){break}else{if(a["chart.yaxispos"]=="right"&&x==this.gutterLeft){continue}}}var w=a["chart.xaxispos"]=="center"?(this.gutterTop+(this.grapharea/2))-3:f.height-this.gutterBottom;var z=a["chart.xaxispos"]=="center"?w+6:f.height-this.gutterBottom-(x%60==0?a["chart.largexticks"]*a["chart.tickdirection"]:a["chart.smallxticks"]*a["chart.tickdirection"]);if(a["chart.xaxispos"]=="center"){var w=Math.round((this.gutterTop+(this.grapharea/2)))-3;var z=w+6}else{if(a["chart.xaxispos"]=="bottom"){var w=f.height-this.gutterBottom;var z=f.height-this.gutterBottom-(x%60==0?a["chart.largexticks"]*a["chart.tickdirection"]:a["chart.smallxticks"]*a["chart.tickdirection"]);z+=0}else{if(a["chart.xaxispos"]=="top"){w=this.gutterTop-3;z=this.gutterTop}}}p.moveTo(Math.round(x),w);p.lineTo(Math.round(x),z)}}else{if(a["chart.noyaxis"]==false&&a["chart.numyticks"]>0){if(!a["chart.noendytick"]){if(a["chart.yaxispos"]=="left"){p.moveTo(this.gutterLeft,Math.round(f.height-this.gutterBottom));p.lineTo(this.gutterLeft-a["chart.smallyticks"],Math.round(f.height-this.gutterBottom))}else{p.moveTo(f.width-this.gutterRight,Math.round(f.height-this.gutterBottom));p.lineTo(f.width-this.gutterRight+a["chart.smallyticks"],Math.round(f.height-this.gutterBottom))}}}}var i=a["chart.numyticks"];if(a["chart.noyaxis"]==false&&i>0){var j=0;var u=0;if(a["chart.yaxispos"]=="right"){u=(f.width-this.gutterLeft-this.gutterRight)}if(a["chart.xaxispos"]=="center"){var t=(this.grapharea/i);var A=(a["chart.yaxispos"]=="left"?this.gutterLeft:f.width-this.gutterRight+a["chart.smallyticks"]);for(y=this.gutterTop;y<(this.grapharea/2)+this.gutterTop;y+=t){if(y<(this.grapharea/2)+this.gutterTop){p.moveTo((a["chart.yaxispos"]=="left"?this.gutterLeft-a["chart.smallyticks"]:f.width-this.gutterRight),Math.round(y));p.lineTo(A,Math.round(y))}}for(y=this.gutterTop+(this.halfgrapharea)+t;y<=this.grapharea+this.gutterTop;y+=t){p.moveTo((a["chart.yaxispos"]=="left"?this.gutterLeft-a["chart.smallyticks"]:f.width-this.gutterRight),Math.round(y));p.lineTo(A,Math.round(y))}}else{if(a["chart.xaxispos"]=="top"){var t=(this.grapharea/i);var A=(a["chart.yaxispos"]=="left"?this.gutterLeft:f.width-this.gutterRight+a["chart.smallyticks"]);for(y=this.gutterTop+t;y<=this.grapharea+this.gutterTop;y+=t){p.moveTo((a["chart.yaxispos"]=="left"?this.gutterLeft-a["chart.smallyticks"]:f.width-this.gutterRight),Math.round(y));p.lineTo(A,Math.round(y))}if(a["chart.noxaxis"]&&a["chart.noendytick"]==false){p.moveTo((a["chart.yaxispos"]=="left"?this.gutterLeft-a["chart.smallyticks"]:f.width-this.gutterRight),this.gutterTop);p.lineTo(A,this.gutterTop)}}else{var A=(a["chart.yaxispos"]=="left"?this.gutterLeft-a["chart.smallyticks"]:f.width-this.gutterRight+a["chart.smallyticks"]);for(y=this.gutterTop;y<(f.height-this.gutterBottom)&&j<i;y+=((f.height-this.gutterTop-this.gutterBottom)/i)){p.moveTo(this.gutterLeft+u,Math.round(y));p.lineTo(A,Math.round(y));var j=j+1}}}}else{if(a["chart.noxaxis"]==false&&a["chart.numxticks"]>0){if(a["chart.yaxispos"]=="left"){p.moveTo(this.gutterLeft,a["chart.xaxispos"]=="top"?this.gutterTop:f.height-this.gutterBottom);p.lineTo(this.gutterLeft,a["chart.xaxispos"]=="top"?this.gutterTop-a["chart.smallxticks"]:f.height-this.gutterBottom+a["chart.smallxticks"])}else{p.moveTo(f.width-this.gutterRight,f.height-this.gutterBottom);p.lineTo(f.width-this.gutterRight,f.height-this.gutterBottom+a["chart.smallxticks"])}}}p.stroke();p.beginPath()};this.drawLabels=this.DrawLabels=function(){p.strokeStyle="black";p.fillStyle=a["chart.text.color"];p.lineWidth=1;g.NoShadow(this);var I=a["chart.text.font"];var G=a["chart.text.size"];var U=a["chart.scale.decimals"];var u=p;var w=f;var K=a["chart.ymin"];if(a["chart.ylabels"]&&a["chart.ylabels.specific"]==null){var T=a["chart.units.pre"];var L=a["chart.units.post"];var v=a["chart.yaxispos"]=="left"?this.gutterLeft-5:f.width-this.gutterRight+5;var N=a["chart.yaxispos"]=="left"?"right":"left";var R=this.scale2.labels.length;var z=false;var j=a["chart.ylabels.inside"]?a["chart.ylabels.inside.color"]:null;if(a["chart.ylabels.inside"]==true&&N=="left"){v-=10;N="right";z=true}else{if(a["chart.ylabels.inside"]==true&&N=="right"){v+=10;N="left";z=true}}if(a["chart.xaxispos"]=="center"){var M=this.grapharea/2;for(var O=0;O<this.scale2.labels.length;++O){g.Text2(this,{font:I,size:G,x:v,y:this.gutterTop+M-(((O+1)/R)*M),valign:"center",halign:N,bounding:z,boundingFill:j,text:this.scale2.labels[O],tag:"scale"})}for(var O=0;O<this.scale2.labels.length;++O){g.Text2(this,{font:I,size:G,x:v,y:this.gutterTop+M+(((O+1)/R)*M),valign:"center",halign:N,bounding:z,boundingFill:j,text:"-"+this.scale2.labels[O],tag:"scale"})}if(a["chart.noxaxis"]==true||K!=0||a["chart.scale.zerostart"]){g.Text2(this,{font:I,size:G,x:v,y:this.gutterTop+M,text:a["chart.units.pre"]+K.toFixed(U)+a["chart.units.post"],bounding:z,boundingFill:j,valign:"center",halign:N,tag:"scale"})}}else{if(a["chart.xaxispos"]=="top"){var M=this.grapharea/2;if(a["chart.scale.invert"]){for(var O=0;O<this.scale2.labels.length;++O){g.Text2(this,{font:I,size:G,x:v,y:this.gutterTop+((O/this.scale2.labels.length)*this.grapharea),valign:"center",halign:N,bounding:z,boundingFill:j,text:"-"+this.scale2.labels[this.scale2.labels.length-(O+1)],tag:"scale"})}}else{for(var O=0;O<this.scale2.labels.length;++O){g.Text2(this,{font:I,size:G,x:v,y:this.gutterTop+(((O+1)/R)*this.grapharea),valign:"center",halign:N,bounding:z,boundingFill:j,text:"-"+this.scale2.labels[O],tag:"scale"})}}if((a["chart.ymin"]!=0||a["chart.noxaxis"])||a["chart.scale.invert"]||a["chart.scale.zerostart"]){g.Text2(this,{font:I,size:G,x:v,y:a["chart.scale.invert"]?f.height-this.gutterBottom:this.gutterTop,text:(a["chart.ymin"]!=0?"-":"")+g.number_format(this,a["chart.ymin"].toFixed(U),T,L),valign:"center",halign:N,bounding:z,boundingFill:j,tag:"scale"})}}else{if(a["chart.scale.invert"]){g.Text2(this,{font:I,size:G,x:v,y:this.gutterTop,valign:"center",halign:N,bounding:z,boundingFill:j,text:g.number_format(this,this.min.toFixed(a["chart.scale.decimals"]),T,L),tag:"scale"});for(var O=0,Q=this.scale2.labels.length;O<Q;++O){g.Text2(this,{font:I,size:G,x:v,y:this.gutterTop+(((O+1)/this.scale2.labels.length)*this.grapharea),valign:"center",halign:N,bounding:z,boundingFill:j,text:this.scale2.labels[O],tag:"scale"})}}else{for(var O=0,Q=this.scale2.labels.length;O<Q;++O){g.Text2(this,{font:I,size:G,x:v,y:this.gutterTop+((O/this.scale2.labels.length)*this.grapharea),valign:"center",halign:N,bounding:z,boundingFill:j,text:this.scale2.labels[this.scale2.labels.length-(O+1)],tag:"scale"})}}if((a["chart.ymin"]!=0&&!a["chart.scale.invert"]||a["chart.scale.zerostart"])||a["chart.noxaxis"]){g.Text2(this,{font:I,size:G,x:v,y:a["chart.scale.invert"]?this.gutterTop:f.height-this.gutterBottom,text:g.number_format(this,a["chart.ymin"].toFixed(a["chart.scale.decimals"]),T,L),valign:"center",halign:N,bounding:z,boundingFill:j,tag:"scale"})}}}if(a["chart.noxaxis"]==true&&a["chart.ymin"]==null&&a["chart.xaxispos"]!="center"&&a["chart.noendytick"]==false){g.Text2(this,{font:I,size:G,x:v,y:a["chart.xaxispos"]=="top"?this.gutterTop:(f.height-this.gutterBottom),text:a["chart.units.pre"]+(0).toFixed(a["chart.scale.decimals"])+a["chart.units.post"],valign:"center",halign:N,bounding:z,boundingFill:j,tag:"scale"})}}else{if(a["chart.ylabels"]&&typeof(a["chart.ylabels.specific"])=="object"){var J=this.grapharea/a["chart.ylabels.specific"].length;var H=a["chart.yaxispos"]=="left"?"right":"left";var z=false;var j=null;var K=a["chart.ymin"]!=null&&a["chart.ymin"];if(a["chart.yaxispos"]=="left"){var F=this.gutterLeft-5;if(a["chart.ylabels.inside"]){F+=10;H="left";z=true;j="rgba(255,255,255,0.5)"}}else{if(a["chart.yaxispos"]=="right"){var F=f.width-this.gutterRight+5;if(a["chart.ylabels.inside"]){F-=10;H="right";z=true;j="rgba(255,255,255,0.5)"}}}if(a["chart.xaxispos"]=="center"){for(var O=0;O<a["chart.ylabels.specific"].length;++O){var D=this.gutterTop+(this.grapharea/(((a["chart.ylabels.specific"].length-1))*2)*O);if(K&&K>0){var D=((this.grapharea/2)/(a["chart.ylabels.specific"].length-(K?1:0)))*O;D+=this.gutterTop}g.Text2(this,{font:I,size:G,x:F,y:D,text:String(a["chart.ylabels.specific"][O]),valign:"center",halign:H,bounding:z,boundingFill:j,tag:"ylabels.specific"})}var P=g.array_reverse(a["chart.ylabels.specific"]);for(var O=0;O<P.length;++O){var D=(this.grapharea/2)+this.gutterTop+((this.grapharea/((P.length-1)*2))*O);g.Text2(this,{font:I,size:G,x:F,y:D,text:O==0?"":String(P[O]),valign:"center",halign:H,bounding:z,boundingFill:j,tag:"ylabels.specific"})}}else{if(a["chart.xaxispos"]=="top"){var P=g.array_reverse(a["chart.ylabels.specific"]);for(var O=0;O<P.length;++O){var D=(this.grapharea/(P.length-1))*O;D=D+this.gutterTop;g.Text2(this,{font:I,size:G,x:F,y:D,text:String(P[O]),valign:"center",halign:H,bounding:z,boundingFill:j,tag:"ylabels.specific"})}}else{for(var O=0;O<a["chart.ylabels.specific"].length;++O){var D=this.gutterTop+((this.grapharea/(a["chart.ylabels.specific"].length-1))*O);g.Text2(this,{font:I,size:G,x:F,y:D,text:String(a["chart.ylabels.specific"][O]),valign:"center",halign:H,bounding:z,boundingFill:j,tag:"ylabels.specific"})}}}}}if(a["chart.labels"]&&a["chart.labels"].length>0){var C=5;var B=false;var j=null;var S=0;var A="top";var H="center";if(a["chart.xlabels.inside"]){C=-5;B=true;j=a["chart.xlabels.inside.color"];A="bottom"}if(a["chart.xaxispos"]=="top"){A="bottom";C+=2}if(typeof(a["chart.text.angle"])=="number"&&a["chart.text.angle"]>0){S=-1*a["chart.text.angle"];A="center";H="right";C=10;if(a["chart.xaxispos"]=="top"){C=10}}p.fillStyle=a["chart.text.color"];var t=a["chart.labels"].length;for(O=0;O<t;++O){if(a["chart.labels"][O]){var E=((f.width-this.gutterLeft-this.gutterRight-(2*a["chart.hmargin"]))/(t-1))*O;E+=this.gutterLeft+a["chart.hmargin"];if(this.data.length===0||!this.data[0]||a["chart.labels"].length!=this.data[0].length){E=this.gutterLeft+a["chart.hmargin"]+((f.width-this.gutterLeft-this.gutterRight-(2*a["chart.hmargin"]))*(O/(a["chart.labels"].length-1)))}if(!E){E=this.gutterLeft+a["chart.hmargin"]}if(a["chart.xaxispos"]=="top"&&a["chart.text.angle"]>0){H="left"}if(a["chart.text.angle"]!=0){H="right"}g.Text2(this,{font:I,size:G,x:E,y:(a["chart.xaxispos"]=="top")?this.gutterTop-C-(a["chart.xlabels.inside"]?-22:0):(f.height-this.gutterBottom)+C,text:String(a["chart.labels"][O]),valign:A,halign:H,bounding:B,boundingFill:j,angle:S,tag:"labels"})}}}p.stroke();p.fill()};this.drawLine=this.DrawLine=function(K,N,O,P,u,B){if(a["chart.animation.unfold.y"]&&a["chart.animation.factor"]!=1){for(var Q=0;Q<K.length;++Q){K[Q]*=a["chart.animation.factor"]}}var G=false;var J=null;var D=0;p.lineWidth=1;var A=[];if(B>0){var I=this.coords2[B-1]}var t=(f.width-(2*a["chart.hmargin"])-this.gutterLeft-this.gutterRight)/(K.length-1);for(Q=0,R=K.length;Q<R;Q+=1){var F=K[Q];var J=this.getYCoord(F);if(K[Q]==null||(a["chart.xaxispos"]=="bottom"&&K[Q]<this.min&&!a["chart.outofbounds"])||(a["chart.xaxispos"]=="center"&&K[Q]<(-1*this.max)&&!a["chart.outofbounds"])||(((K[Q]<this.min&&a["chart.xaxispos"]!=="center")||K[Q]>this.max)&&!a["chart.outofbounds"])){J=null}p.lineCap="round";p.lineJoin="round";if(Q>0){D=D+t}else{D=a["chart.hmargin"]+this.gutterLeft}if(a["chart.animation.unfold.x"]){D*=a["chart.animation.factor"];if(D<a["chart.gutter.left"]){D=a["chart.gutter.left"]}}this.coords.push([D,J]);A.push([D,J])}p.stroke();this.coords2[B]=A;if(g.ISOLD&&a["chart.shadow"]){this.DrawIEShadow(A,p.shadowColor)}p.beginPath();p.strokeStyle="rgba(0,0,0,0)";if(O){p.fillStyle=O}var H=a["chart.stepped"];var S=a["chart.filled"];if(a["chart.xaxispos"]=="top"){var j=this.gutterTop}else{if(a["chart.xaxispos"]=="center"){var j=this.gutterTop+(this.grapharea/2)}else{if(a["chart.xaxispos"]=="bottom"){var j=f.height-this.gutterBottom}}}for(var Q=0,R=A.length;Q<R;Q+=1){D=A[Q][0];J=A[Q][1];var E=B;var v=(A[Q-1]?A[Q-1][1]:null);var C=(Q+1)==A.length;if(!a["chart.outofbounds"]&&(v<this.gutterTop||v>(f.height-this.gutterBottom))){G=true}if(Q==0||G||!J||!v||v<this.gutterTop){if(a["chart.filled"]&&!a["chart.filled.range"]){if(!a["chart.outofbounds"]||v===null||J===null){p.moveTo(D+1,j)}if(a["chart.xaxispos"]=="top"){p.moveTo(D+1,j)}if(H&&Q>0){p.lineTo(D,A[Q-1][1])}p.lineTo(D,J)}else{if(g.ISOLD&&J==null){}else{p.moveTo(D+1,J)}}if(J==null){G=true}else{G=false}}else{if(H){p.lineTo(D,A[Q-1][1])}if((J>=this.gutterTop&&J<=(f.height-this.gutterBottom))||a["chart.outofbounds"]){if(C&&a["chart.filled"]&&!a["chart.filled.range"]&&a["chart.yaxispos"]=="right"){D-=1}if(!H||!C){p.lineTo(D,J);if(S&&A[Q+1]&&A[Q+1][1]==null){p.lineTo(D,j)}}else{if(H&&C){p.lineTo(D,J)}}G=false}else{G=true}}}if(a["chart.filled"]&&!a["chart.filled.range"]&&!a["chart.curvy"]){var z=a["chart.fillstyle"];if(B>0&&a["chart.filled.accumulative"]){p.lineTo(D,I?I[Q-1][1]:(f.height-this.gutterBottom-1+(a["chart.xaxispos"]=="center"?(f.height-this.gutterTop-this.gutterBottom)/2:0)));for(var M=(Q-1);M>=0;--M){p.lineTo(M==0?I[M][0]+1:I[M][0],I[M][1])}}else{if(a["chart.xaxispos"]=="top"){p.lineTo(D,a["chart.gutter.top"]+1);p.lineTo(A[0][0],a["chart.gutter.top"]+1)}else{if(typeof(A[Q-1][1])=="number"){var L=a["chart.xaxispos"]=="center"?((f.height-this.gutterTop-this.gutterBottom)/2)+this.gutterTop:f.height-this.gutterBottom;p.lineTo(D,L);p.lineTo(A[0][0],L)}}}p.fillStyle=O;p.fill();p.beginPath()}p.stroke();if(a["chart.backdrop"]){this.DrawBackdrop(A,N)}p.save();p.beginPath();p.rect(0,0,f.width*a["chart.animation.trace.clip"],f.height);p.clip();this.SetShadow(B);this.RedrawLine(A,N,P,B);p.stroke();g.NoShadow(this);for(var Q=0;Q<A.length;++Q){Q=Number(Q);p.strokeStyle=N;if(H&&Q==(A.length-1)){p.beginPath()}if((u!="endcircle"&&u!="endsquare"&&u!="filledendsquare"&&u!="endtick"&&u!="endtriangle"&&u!="arrow"&&u!="filledarrow")||(Q==0&&u!="arrow"&&u!="filledarrow")||Q==(A.length-1)){var w=(Q<=0?null:A[Q-1][0]);var v=(Q<=0?null:A[Q-1][1]);this.DrawTick(K,A[Q][0],A[Q][1],N,false,w,v,u,Q)}}p.restore();p.beginPath();p.arc(f.width+50000,f.height+50000,2,0,6.38,1)};this.drawTick=this.DrawTick=function(u,A,t,v,B,F,E,C,D){if(!a["chart.line.visible"]){return}else{if(g.is_null(t)){return false}else{if((t>(f.height-this.gutterBottom))&&!a["chart.outofbounds"]){return}else{if((t<this.gutterTop)&&!a["chart.outofbounds"]){return}}}}p.beginPath();var w=0;p.lineWidth=a["chart.tickmarks.linewidth"]?a["chart.tickmarks.linewidth"]:a["chart.linewidth"];p.strokeStyle=B?a["chart.shadow.color"]:p.strokeStyle;p.fillStyle=B?a["chart.shadow.color"]:p.strokeStyle;if(C=="circle"||C=="filledcircle"||C=="endcircle"){if(C=="circle"||C=="filledcircle"||(C=="endcircle"&&(D==0||D==(u.length-1)))){p.beginPath();p.arc(A+w,t+w,a["chart.ticksize"],0,360/(180/g.PI),false);if(C=="filledcircle"){p.fillStyle=B?a["chart.shadow.color"]:p.strokeStyle}else{p.fillStyle=B?a["chart.shadow.color"]:"white"}p.stroke();p.fill()}}else{if(C=="halftick"){p.beginPath();p.moveTo(Math.round(A),t);p.lineTo(Math.round(A),t+a["chart.ticksize"]);p.stroke()}else{if(C=="tick"){p.beginPath();p.moveTo(Math.round(A),t-a["chart.ticksize"]);p.lineTo(Math.round(A),t+a["chart.ticksize"]);p.stroke()}else{if(C=="endtick"&&(D==0||D==(u.length-1))){p.beginPath();p.moveTo(Math.round(A),t-a["chart.ticksize"]);p.lineTo(Math.round(A),t+a["chart.ticksize"]);p.stroke()}else{if(C=="cross"){p.beginPath();var j=a["chart.ticksize"];p.moveTo(A-j,t-j);p.lineTo(A+j,t+j);p.moveTo(A+j,t-j);p.lineTo(A-j,t+j);p.stroke()}else{if(C=="triangle"||C=="filledtriangle"||(C=="endtriangle"&&(D==0||D==(u.length-1)))){p.beginPath();if(C=="filledtriangle"){p.fillStyle=B?a["chart.shadow.color"]:p.strokeStyle}else{p.fillStyle="white"}p.moveTo(s.round(A-a["chart.ticksize"]),t+a["chart.ticksize"]);p.lineTo(s.round(A),t-a["chart.ticksize"]);p.lineTo(s.round(A+a["chart.ticksize"]),t+a["chart.ticksize"]);p.closePath();p.stroke();p.fill()}else{if(C=="borderedcircle"||C=="dot"){p.lineWidth=a["chart.tickmarks.dot.linewidth"]||1e-8;r(this,["b","a",A,t,a["chart.ticksize"],0,360/(180/g.PI),false,"c","f",a["chart.tickmarks.dot.fill"]||v,"s",a["chart.tickmarks.dot.stroke"]||v])}else{if(C=="square"||C=="filledsquare"||(C=="endsquare"&&(D==0||D==(u.length-1)))||(C=="filledendsquare"&&(D==0||D==(u.length-1)))){p.fillStyle="white";p.strokeStyle=p.strokeStyle;p.beginPath();p.rect(Math.round(A-a["chart.ticksize"]),Math.round(t-a["chart.ticksize"]),a["chart.ticksize"]*2,a["chart.ticksize"]*2);if(C=="filledsquare"||C=="filledendsquare"){p.fillStyle=B?a["chart.shadow.color"]:p.strokeStyle;p.rect(Math.round(A-a["chart.ticksize"]),Math.round(t-a["chart.ticksize"]),a["chart.ticksize"]*2,a["chart.ticksize"]*2)}else{if(C=="square"||C=="endsquare"){p.fillStyle=B?a["chart.shadow.color"]:"white";p.rect(Math.round((A-a["chart.ticksize"])+1),Math.round((t-a["chart.ticksize"])+1),(a["chart.ticksize"]*2)-2,(a["chart.ticksize"]*2)-2)}}p.stroke();p.fill()}else{if(C=="filledarrow"){var I=Math.abs(A-F);var G=Math.abs(t-E);if(t<E){var H=Math.atan(I/G)+1.57}else{var H=Math.atan(G/I)+3.14}p.beginPath();p.moveTo(Math.round(A),Math.round(t));p.arc(Math.round(A),Math.round(t),7,H-0.5,H+0.5,false);p.closePath();p.stroke();p.fill()}else{if(C=="arrow"){var i=p.lineWidth;var I=Math.abs(A-F);var G=Math.abs(t-E);p.lineWidth;if(t<E){var H=Math.atan(I/G)+1.57}else{var H=Math.atan(G/I)+3.14}p.beginPath();p.moveTo(Math.round(A),Math.round(t));p.arc(Math.round(A),Math.round(t),7,H-0.5-(q.all?0.1:0.01),H-0.4,false);p.moveTo(Math.round(A),Math.round(t));p.arc(Math.round(A),Math.round(t),7,H+0.5+(q.all?0.1:0.01),H+0.5,true);p.stroke();p.fill();p.lineWidth=i}else{if(typeof C==="string"&&(C.substr(0,6)==="image:"||C.substr(0,5)==="data:"||C.substr(0,1)==="/"||C.substr(0,3)==="../"||C.substr(0,7)==="images/")){var z=new Image();if(C.substr(0,6)==="image:"){z.src=C.substr(6)}else{z.src=C}z.onload=function(){if(a["chart.tickmarks.image.halign"]==="center"){A-=(this.width/2)}if(a["chart.tickmarks.image.halign"]==="right"){A-=this.width}if(a["chart.tickmarks.image.valign"]==="center"){t-=(this.height/2)}if(a["chart.tickmarks.image.valign"]==="bottom"){t-=this.height}A+=a["chart.tickmarks.image.offsetx"];t+=a["chart.tickmarks.image.offsety"];p.drawImage(this,A,t)}}else{if(typeof(C)=="function"){C(this,u,u[D],D,A,t,v,F,E)}}}}}}}}}}}}};this.drawRange=this.DrawRange=function(){if(a["chart.filled.range"]&&a["chart.filled"]&&a["chart.line.visible"]){if(g.is_null(a["chart.filled.range.threshold"])){a["chart.filled.range.threshold"]=this.ymin;a["chart.filled.range.threshold.colors"]=[a["chart.fillstyle"],a["chart.fillstyle"]]}for(var t=0;t<2;++t){var v=a["chart.filled.range.threshold.colors"];var w=this.getYCoord(a["chart.filled.range.threshold"]);p.save();if(t==0){p.beginPath();p.rect(0,0,f.width,w);p.clip()}else{p.beginPath();p.rect(0,w,f.width,f.height);p.clip()}p.beginPath();p.fillStyle=(t==1?a["chart.filled.range.threshold.colors"][1]:a["chart.filled.range.threshold.colors"][0]);p.lineWidth=1;var j=(this.coords.length/2);for(var u=0;u<j;++u){if(!g.is_null(this.coords[u][1])){if(u==0){p.moveTo(this.coords[u][0],this.coords[u][1])}else{p.lineTo(this.coords[u][0],this.coords[u][1])}}}for(var u=this.coords.length-1;u>=j;--u){if(g.is_null(this.coords[u][1])){p.moveTo(this.coords[u][0],this.coords[u][1])}else{p.lineTo(this.coords[u][0],this.coords[u][1])}}p.fill();p.restore()}}};this.redrawLine=this.RedrawLine=function(F,u,E,B){if(a["chart.noredraw"]||a["chart.filled.range"]){return}p.strokeStyle=(typeof(u)=="object"&&u&&u.toString().indexOf("CanvasGradient")==-1?u[0]:u);p.lineWidth=E;if(!a["chart.line.visible"]){p.strokeStyle="rgba(0,0,0,0)"}if(!g.ISOLD&&(a["chart.curvy"]||a["chart.spline"])){this.DrawCurvyLine(F,!a["chart.line.visible"]?"rgba(0,0,0,0)":u,E,B);return}p.beginPath();var C=F.length;var j=f.width;var G=f.height;var v=false;for(var w=0;w<C;++w){var z=F[w][0];var t=F[w][1];if(w>0){var D=F[w-1][0];var A=F[w-1][1]}if(((w==0&&F[w])||(t<this.gutterTop)||(A<this.gutterTop)||(t>(G-this.gutterBottom))||(w>0&&D>(j-this.gutterRight))||(w>0&&A>(G-this.gutterBottom))||A==null||v==true)&&(!a["chart.outofbounds"]||t==null||A==null)){if(g.ISOLD&&t==null){}else{p.moveTo(F[w][0],F[w][1])}v=false}else{if(a["chart.stepped"]&&w>0){p.lineTo(F[w][0],F[w-1][1])}p.lineTo(F[w][0],F[w][1]);v=false}}if(a["chart.colors.alternate"]&&typeof(u)=="object"&&u[0]&&u[1]){for(var w=1;w<C;++w){var D=F[w-1][0];var A=F[w-1][1];if(A!=null&&F[w][1]!=null){p.beginPath();p.strokeStyle=u[F[w][1]<A?0:1];p.lineWidth=a["chart.linewidth"];p.moveTo(D,A);p.lineTo(F[w][0],F[w][1]);p.stroke()}}}};this.drawIEShadow=this.DrawIEShadow=function(A,v){var t=a["chart.shadow.offsetx"];var j=a["chart.shadow.offsety"];p.lineWidth=a["chart.linewidth"];p.strokeStyle=v;p.beginPath();for(var z=0;z<A.length;++z){var w=g.isNull(A[z][1]);var u=g.isNull(A[z-1])||g.isNull(A[z-1][1]);if(z==0||w||u){if(!w){p.moveTo(A[z][0]+t,A[z][1]+j)}}else{p.lineTo(A[z][0]+t,A[z][1]+j)}}p.stroke()};this.drawBackdrop=this.DrawBackdrop=function(A,t){var w=a["chart.backdrop.size"];p.lineWidth=w;p.globalAlpha=a["chart.backdrop.alpha"];p.strokeStyle=t;var z=[];p.beginPath();if(a["chart.curvy"]&&!g.ISOLD){for(var v=0;v<A.length;++v){z.push(A[v][1])}this.DrawSpline(p,z,t,null)}else{p.moveTo(A[0][0],A[0][1]);for(var u=1;u<A.length;++u){p.lineTo(A[u][0],A[u][1])}}p.stroke();p.globalAlpha=1;g.NoShadow(this)};this.getLineWidth=this.GetLineWidth=function(j){var t=a["chart.linewidth"];if(typeof(t)=="number"){return t}else{if(typeof(t)=="object"){if(t[j]){return t[j]}else{return t[0]}alert("[LINE] Error! chart.linewidth should be a single number or an array of one or more numbers")}}};this.getShape=this.getPoint=function(D){var B=this;var z=RGraph;var v=c=D.target;var F=context=this.context;var j=this.properties;var C=z.getMouseXY(D);var u=C[0];var t=C[1];if(arguments[1]){B=arguments[1]}for(var A=0;A<B.coords.length;++A){var G=B.coords[A][0];var E=B.coords[A][1];if(u<=(G+j["chart.tooltips.hotspot.size"])&&u>=(G-j["chart.tooltips.hotspot.size"])&&t<=(E+j["chart.tooltips.hotspot.size"])&&t>=(E-j["chart.tooltips.hotspot.size"])){if(z.parseTooltipText){var I=z.parseTooltipText(j["chart.tooltips"],A)}var w=0;var H=A;while((H+1)>this.data[w].length){H-=this.data[w].length;w++}return{0:B,1:G,2:E,3:A,object:B,x:G,y:E,index:A,tooltip:I,dataset:w,index_adjusted:H}}else{if(j["chart.tooltips.hotspot.xonly"]==true&&u<=(G+j["chart.tooltips.hotspot.size"])&&u>=(G-j["chart.tooltips.hotspot.size"])){var I=z.parseTooltipText(j["chart.tooltips"],A);return{0:B,1:G,2:E,3:A,object:B,x:G,y:E,index:A,tooltip:I}}}}};this.drawAboveLabels=this.DrawAboveLabels=function(){var F=a["chart.labels.above.size"],t=a["chart.labels.above.font"]||a["chart.text.font"],E=a["chart.labels.above.units.pre"],C=a["chart.labels.above.units.post"],u=a["chart.labels.above.decimals"],w=a["chart.labels.above.color"]||a["chart.text.color"],G=a["chart.labels.above.background"]||"white",v=((typeof a["chart.labels.above.border"]==="boolean"||typeof a["chart.labels.above.border"]==="number")?a["chart.labels.above.border"]:true),j=a["chart.labels.above.offsety"]+F,B=a["chart.labels.above.specific"];p.beginPath();for(var z=0,A=this.coords.length;z<A;z+=1){var D=this.coords[z];g.text2(this,{color:w,font:t,size:F,x:D[0],y:D[1]-j,text:(B&&B[z])?B[z]:(B?null:g.numberFormat(this,typeof u==="number"?this.data_arr[z].toFixed(u):this.data_arr[z],E,C)),valign:"center",halign:"center",bounding:true,boundingFill:G,boundingStroke:v?"black":"rgba(0,0,0,0)",tag:"labels.above"})}};this.drawCurvyLine=this.DrawCurvyLine=function(z,j,w,t){if(g.ISOLD){return}var v=[];for(var u=0;u<z.length;++u){v.push(z[u][1])}if(a["chart.filled"]){p.beginPath();p.moveTo(z[0][0],f.height-this.gutterBottom);this.DrawSpline(p,v,j,t);if(a["chart.filled.accumulative"]&&t>0){for(var u=(this.coordsSpline[t-1].length-1);u>=0;u-=1){p.lineTo(this.coordsSpline[t-1][u][0],this.coordsSpline[t-1][u][1])}}else{p.lineTo(z[z.length-1][0],f.height-this.gutterBottom)}p.fill()}p.beginPath();this.DrawSpline(p,v,j,t);p.stroke()};this.getValue=function(j){if(j.length==2){var u=j[0];var t=j[1]}else{var v=g.getMouseXY(j);var u=v[0];var t=v[1]}var z=this;var i=a["chart.xaxispos"];if(t<a["chart.gutter.top"]){return i=="bottom"||i=="center"?this.max:this.min}else{if(t>(f.height-a["chart.gutter.bottom"])){return i=="bottom"?this.min:this.max}}if(a["chart.xaxispos"]=="center"){var w=(((z.grapharea/2)-(t-a["chart.gutter.top"]))/z.grapharea)*(z.max-z.min);w*=2;w>0?w+=this.min:w-=this.min;return w}else{if(a["chart.xaxispos"]=="top"){var w=((z.grapharea-(t-a["chart.gutter.top"]))/z.grapharea)*(z.max-z.min);w=Math.abs(z.max-w)*-1;return w}else{var w=((z.grapharea-(t-a["chart.gutter.top"]))/z.grapharea)*(z.max-z.min);w+=z.min;return w}}};this.highlight=this.Highlight=function(i){if(a["chart.tooltips.highlight"]){g.Highlight.Point(this,i)}};this.getObjectByXY=function(j){var i=g.getMouseXY(j);if((i[0]>a["chart.gutter.left"]-5)&&i[0]<(f.width-a["chart.gutter.right"]+5)&&i[1]>(a["chart.gutter.top"]-5)&&i[1]<(f.height-a["chart.gutter.bottom"]+5)){return this}};this.adjusting_mousemove=this.Adjusting_mousemove=function(t){if(a["chart.adjustable"]&&g.Registry.Get("chart.adjusting")&&g.Registry.Get("chart.adjusting").uid==this.uid){var j=Number(this.getValue(t));var i=g.Registry.Get("chart.adjusting.shape");if(i){g.Registry.Set("chart.adjusting.shape",i);this.original_data[i.dataset][i.index_adjusted]=Number(j);g.redrawCanvas(t.target);g.fireCustomEvent(this,"onadjust")}}};this.getYCoord=function(j){if(typeof(j)!="number"){return null}var t;var i=a["chart.xaxispos"];if(i=="top"){t=((j-this.min)/(this.max-this.min))*this.grapharea;if(a["chart.scale.invert"]){t=this.grapharea-t}t=t+this.gutterTop}else{if(i=="center"){t=((j-this.min)/(this.max-this.min))*(this.grapharea/2);t=(this.grapharea/2)-t;t+=this.gutterTop}else{if((j<this.min||j>this.max)&&a["chart.outofbounds"]==false){return null}t=((j-this.min)/(this.max-this.min))*this.grapharea;if(a["chart.scale.invert"]){t=this.grapharea-t}t=f.height-this.gutterBottom-t}}return t};this.positionTooltip=function(u,A,z,E,B){var D=u.coords[E.__index__][0];var C=u.coords[E.__index__][1];var v=g.getCanvasXY(u.canvas);var w=a["chart.gutter.left"];var j=a["chart.gutter.top"];var i=E.offsetWidth;E.style.left=0;E.style.top=parseInt(E.style.top)-9+"px";E.style.overflow="";var t=new Image();t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC";t.style.position="absolute";t.id="__rgraph_tooltip_pointer__";t.style.top=(E.offsetHeight-2)+"px";E.appendChild(t);if((v[0]+D-(i/2))<10){E.style.left=(v[0]+D-(i*0.2))+"px";t.style.left=((i*0.2)-8.5)+"px"}else{if((v[0]+D+(i/2))>q.body.offsetWidth){E.style.left=v[0]+D-(i*0.8)+"px";t.style.left=((i*0.8)-8.5)+"px"}else{E.style.left=(v[0]+D-(i*0.5))+"px";t.style.left=((i*0.5)-8.5)+"px"}}};this.drawSpline=this.DrawSpline=function(u,H,w,E){this.coordsSpline[E]=[];var L=[];var F=a["chart.gutter.left"];var J=a["chart.gutter.right"];var I=a["chart.hmargin"];var v=(f.width-(F+J)-(2*I))/(H.length-1);p.strokeStyle=w;for(var B=0,D=H.length;B<D;B+=1){if(typeof H[B]=="object"&&H[B]&&H[B].length==2){H[B]=Number(H[B][1])}}var C=[H[0]];for(var B=0;B<H.length;++B){C.push(H[B])}C.push(H[H.length-1]+(H[H.length-1]-H[H.length-2]));for(var z=1;z<C.length-2;++z){for(var K=0;K<10;++K){var A=G(K/10,C[z-1],C[z],C[z+1],C[z+2]);L.push(((z-1)*v)+(K*(v/10))+F+I);p.lineTo(L[L.length-1],A);if(typeof E=="number"){this.coordsSpline[E].push([L[L.length-1],A])}}}p.lineTo(((z-1)*v)+F+I,C[z]);if(typeof E=="number"){this.coordsSpline[E].push([((z-1)*v)+F+I,C[z]])}function G(M,j,i,O,N){return 0.5*((2*i)+((0-j)+O)*M+((2*j-(5*i)+(4*O)-N)*(M*M)+((0-j)+(3*i)-(3*O)+N)*(M*M*M)))}};this.parseColors=function(){if(this.original_colors.length===0){this.original_colors["chart.colors"]=RGraph.array_clone(a["chart.colors"]);this.original_colors["chart.fillstyle"]=RGraph.array_clone(a["chart.fillstyle"]);this.original_colors["chart.key.colors"]=RGraph.array_clone(a["chart.key.colors"]);this.original_colors["chart.background.barcolor1"]=a["chart.background.barcolor1"];this.original_colors["chart.background.barcolor2"]=a["chart.background.barcolor2"];this.original_colors["chart.background.grid.color"]=a["chart.background.grid.color"];this.original_colors["chart.background.color"]=a["chart.background.color"];this.original_colors["chart.text.color"]=a["chart.text.color"];this.original_colors["chart.crosshairs.color"]=a["chart.crosshairs.color"];this.original_colors["chart.annotate.color"]=a["chart.annotate.color"];this.original_colors["chart.title.color"]=a["chart.title.color"];this.original_colors["chart.title.yaxis.color"]=a["chart.title.yaxis.color"];this.original_colors["chart.key.background"]=a["chart.key.background"];this.original_colors["chart.axis.color"]=a["chart.axis.color"];this.original_colors["chart.highlight.fill"]=a["chart.highlight.fill"]}for(var t=0;t<a["chart.colors"].length;++t){if(typeof(a["chart.colors"][t])=="object"&&a["chart.colors"][t][0]&&a["chart.colors"][t][1]){a["chart.colors"][t][0]=this.parseSingleColorForGradient(a["chart.colors"][t][0]);a["chart.colors"][t][1]=this.parseSingleColorForGradient(a["chart.colors"][t][1])}else{a["chart.colors"][t]=this.parseSingleColorForGradient(a["chart.colors"][t])}}if(a["chart.fillstyle"]){if(typeof(a["chart.fillstyle"])=="string"){a["chart.fillstyle"]=this.parseSingleColorForGradient(a["chart.fillstyle"],"vertical")}else{for(var t=0;t<a["chart.fillstyle"].length;++t){a["chart.fillstyle"][t]=this.parseSingleColorForGradient(a["chart.fillstyle"][t],"vertical")}}}if(!g.is_null(a["chart.key.colors"])){for(var t=0;t<a["chart.key.colors"].length;++t){a["chart.key.colors"][t]=this.parseSingleColorForGradient(a["chart.key.colors"][t])}}var j=["chart.background.barcolor1","chart.background.barcolor2","chart.background.grid.color","chart.background.color","chart.text.color","chart.crosshairs.color","chart.annotate.color","chart.title.color","chart.title.yaxis.color","chart.key.background","chart.axis.color","chart.highlight.fill"];for(var t=0;t<j.length;++t){a[j[t]]=this.parseSingleColorForGradient(a[j[t]])}};this.reset=function(){};this.parseSingleColorForGradient=function(i){if(!i||typeof(i)!="string"){return i}var u=typeof(arguments[1])=="string"?arguments[1]:"vertical";if(typeof i==="string"&&i.match(/^gradient\((.*)\)$/i)){var w=RegExp.$1.split(":");if(u=="horizontal"){var z=p.createLinearGradient(0,0,f.width,0)}else{var z=p.createLinearGradient(0,f.height-a["chart.gutter.bottom"],0,a["chart.gutter.top"])}var v=1/(w.length-1);z.addColorStop(0,g.trim(w[0]));for(var t=1;t<w.length;++t){z.addColorStop(t*v,g.trim(w[t]))}}return z?z:i};this.setShadow=this.SetShadow=function(j){if(a["chart.shadow"]){var t=a["chart.shadow.color"];if(typeof(t)=="object"&&t[j-1]){p.shadowColor=t[j]}else{if(typeof(t)=="object"){p.shadowColor=t[0]}else{if(typeof(t)=="string"){p.shadowColor=t}}}p.shadowBlur=a["chart.shadow.blur"];p.shadowOffsetX=a["chart.shadow.offsetx"];p.shadowOffsetY=a["chart.shadow.offsety"]}};this.interactiveKeyHighlight=function(v){var z=this.coords2[v];if(z){var u=p.lineWidth;var t=p.lineCap;p.lineWidth=a["chart.linewidth"]+10;p.lineCap="round";p.strokeStyle=a["chart.key.interactive.highlight.chart.stroke"];p.beginPath();if(a["chart.curvy"]){this.DrawSpline(p,z,a["chart.key.interactive.highlight.chart"],null)}else{for(var w=0,j=z.length;w<j;w+=1){if(w==0||g.is_null(z[w][1])||(typeof z[w-1][1]!=undefined&&g.is_null(z[w-1][1]))){p.moveTo(z[w][0],z[w][1])}else{p.lineTo(z[w][0],z[w][1])}}}p.stroke();p.lineWidth=u;p.lineCap=t}};this.on=function(i,j){if(i.substr(0,2)!=="on"){i="on"+i}this[i]=j;return this};this.firstDrawFunc=function(){};this.trace=function(){var A=this;var E=typeof arguments[1]==="function"?arguments[1]:function(){};var w=arguments[0]||{};if(w.frames){w.duration=(w.frames/60)*1000}if(!w.duration){w.duration=1500}g.clear(A.canvas);g.redrawCanvas(A.canvas);var t=q.createElement("DIV");var F=g.getCanvasXY(A.canvas);t.id="__rgraph_trace_animation_"+g.random(0,4351623)+"__";t.style.left=F[0]+"px";t.style.top=F[1]+"px";t.style.width=A.Get("chart.gutter.left");t.style.height=A.canvas.height+"px";t.style.position="absolute";t.style.overflow="hidden";q.body.appendChild(t);A.canvas.__rgraph_trace_div__=t;var v="__rgraph_line_trace_animation_"+g.random(0,99999999)+"__";var u=q.createElement("CANVAS");var D=["WebkitTransform","MozTransform","OTransform","MSTransform","transform"];for(l in D){var j=D[l];if(typeof A.canvas.style[j]==="string"&&A.canvas.style[j]){u.style[j]=A.canvas.style[j]}}A.canvas.__rgraph_line_canvas2__=u;u.width=A.canvas.width;u.height=A.canvas.height;u.style.position="absolute";u.style.left=0;u.style.top=0;u.noclear=true;u.id=v;t.appendChild(u);var C=function(H){var G=g.getCanvasXY(A.canvas);t.style.left=G[0]+"px";t.style.top=G[1]+"px"};window.addEventListener("resize",C,false);var z=new g.Line(v,g.array_clone(A.original_data));g.ObjectRegistry.Remove(z);for(l in A.properties){if(typeof l==="string"){z.Set(l,A.properties[l])}}z.Set("labels",[]);z.Set("background.grid",false);z.Set("background.barcolor1","rgba(0,0,0,0)");z.Set("background.barcolor2","rgba(0,0,0,0)");z.Set("ylabels",false);z.Set("noaxes",true);z.Set("title","");z.Set("title.xaxis","");z.Set("title.yaxis","");z.Set("filled.accumulative",A.Get("chart.filled.accumulative"));A.Set("key",[]);z.Draw();A.canvas.__rgraph_trace_obj2__=z;A.Set("line.visible",false);A.Set("colors",["rgba(0,0,0,0)"]);if(A.Get("filled")){var i=A.Get("chart.fillstyle");A.Set("fillstyle","rgba(0,0,0,0)");A.Set("animation.trace.original.fillstyle",i)}g.clear(A.canvas);g.redrawCanvas(A.canvas);if(!A.canvas.__rgraph_trace_cover__){var B=q.createElement("DIV");B.id="__rgraph_trace_animation_"+g.random(0,4351623)+"__";B.style.left=F[0]+"px";B.style.top=F[1]+"px";B.style.width=A.canvas.width+"px";B.style.height=A.canvas.height+"px";B.style.position="absolute";B.style.overflow="hidden";B.style.backgroundColor="rgba(0,0,0,0)";t.div2=B;A.canvas.__rgraph_trace_cover__=B;q.body.appendChild(B)}else{B=A.canvas.__rgraph_trace_cover__}trace_complete=function(H){var G=H.canvas.__rgraph_trace_obj2__;n.removeEventListener("resize",C,false);t.style.display="none";B.style.display="none";H.Set("line.visible",true);H.Set("filled",RGraph.array_clone(G.Get("chart.filled")));H.Set("fillstyle",H.Get("chart.animation.trace.original.fillstyle"));H.Set("colors",RGraph.array_clone(G.Get("chart.colors")));H.Set("key",RGraph.array_clone(G.Get("chart.key")));RGraph.RedrawCanvas(H.canvas);H.canvas.__rgraph_trace_div__.style.display="none";H.canvas.__rgraph_line_canvas2__.style.display="none";H.canvas.__rgraph_trace_cover__.style.display="none";H.canvas.__rgraph_trace_div__=null;H.canvas.__rgraph_line_canvas2__=null;H.canvas.__rgraph_trace_cover__=null;E(H)};d("#"+t.id).animate({width:A.canvas.width-A.gutterRight+"px"},w.duration,function(){trace_complete(A)});return this};this.unfold=function(){var u=this;var j=arguments[0]?arguments[0]:{};var w=j.frames?j.frames:30;var v=0;var z=arguments[1]?arguments[1]:function(){};var i=a["chart.animation.unfold.initial"];a["chart.animation.factor"]=a["chart.animation.unfold.initial"];function t(){a["chart.animation.factor"]=((1-i)*(v/w))+i;g.clear(u.canvas);g.redrawCanvas(u.canvas);if(v<w){v++;g.Effects.updateCanvas(t)}else{z(u)}}t();return this};this.trace2=function(){var t=this;var w=arguments[2];var i=arguments[0]||{};var v=i.frames||30;var u=0;var w=arguments[1]||function(){};t.Set("animation.trace.clip",0);function j(){g.clear(t.canvas);g.redrawCanvas(t.canvas);if(u++<v){t.Set("animation.trace.clip",u/v);g.Effects.updateCanvas(j)}else{w(t)}}j();return this};this.foldtocenter=this.foldToCenter=function(){var v=this;var j=arguments[0]||{};var z=j.frames||30;var w=0;var A=arguments[1]||function(){};var u=v.scale2.max/2;v.Set("chart.ymax",v.scale2.max);var i=g.array_clone(v.original_data);function t(){for(var E=0,B=v.data.length;E<B;++E){if(v.data[E].length){for(var D=0,C=v.data[E].length;D<C;++D){var F=v.original_data[E];if(F[D]>u){F[D]=i[E][D]-((i[E][D]-u)*(w/z))}else{F[D]=i[E][D]+(((u-i[E][D])/z)*w)}}}}g.clear(v.canvas);g.redrawCanvas(v.canvas);if(w++<z){g.Effects.updateCanvas(t)}else{A(v)}}t();return this};this.unfoldFromCenterTrace=this.unfoldFromCenterTrace2=function(){var z=this;var t=arguments[0]||{};var C=t.frames||30;var u=0;var A=g.array_clone(z.original_data);var F=arguments[1]||function(){};z.canvas.style.visibility="hidden";z.Draw();var E=z.scale2.max;g.clear(z.canvas);z.canvas.style.visibility="visible";var D=function(){z.original_data=A;z.unfoldFromCenter({frames:C/2},F)};var G=z.Get("chart.xaxispos")=="center"?z.min:((z.max-z.min)/2)+z.min;z.Set("chart.ymax",z.max);for(var w=0,B=z.original_data.length;w<B;++w){for(var v=0;v<z.original_data[w].length;++v){z.original_data[w][v]=(z.Get("chart.filled")&&z.Get("chart.filled.accumulative")&&w>0)?0:G}}g.clear(z.canvas);z.trace2({frames:C/2},D)};this.unfoldFromCenter=function(){var B=this;var j=arguments[0]||{};var D=j.frames||30;var t=0;var H=arguments[1]||function(){};B.canvas.style.visibility="hidden";B.Draw();var F=B.scale2.max;g.clear(B.canvas);B.canvas.style.visibility="visible";var v=B.Get("chart.xaxispos")==="center"?a["chart.ymin"]:((B.max-B.min)/2)+B.min;var z=g.array_clone(B.original_data);var E=null;B.Set("chart.ymax",F);if(!E){E=[];for(var w=0,C=z.length;w<C;++w){E[w]=[];for(var A=0,u=z[w].length;A<u;++A){if(a["chart.filled"]&&a["chart.filled.accumulative"]&&w>0){E[w][A]=z[w][A]/D;B.original_data[w][A]=v}else{E[w][A]=(z[w][A]-v)/D;B.original_data[w][A]=v}}}}function G(){for(var J=0;J<z.length;++J){for(var I=0;I<z[J].length;++I){B.original_data[J][I]+=E[J][I]}}g.clear(B.canvas);g.redrawCanvas(B.canvas);if(--D>0){g.Effects.updateCanvas(G)}else{B.original_data=g.array_clone(z);g.clear(B.canvas);g.redrawCanvas(B.canvas);H(B)}}G();return this};g.att(f);g.Register(this);if(e){g.parseObjectStyleConfig(this,o.options)}};