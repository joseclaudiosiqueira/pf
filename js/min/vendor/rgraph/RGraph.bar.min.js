
RGraph=window.RGraph||{isRGraph:true};RGraph.Bar=function(n){if(typeof n==="object"&&typeof n.data==="object"&&typeof n.id==="string"){var b=n.id;var c=document.getElementById(b);var j=n.data;var f=true}else{var b=n;var c=document.getElementById(b);var j=arguments[1]}this.id=b;this.canvas=c;this.context=this.canvas.getContext("2d");this.canvas.__object__=this;this.type="bar";this.max=0;this.stackedOrGrouped=false;this.isRGraph=true;this.uid=RGraph.CreateUID();this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID();this.colorsParsed=false;this.original_colors=[];this.cachedBackgroundCanvas=null;this.firstDraw=true;this.properties={"chart.background.barcolor1":"rgba(0,0,0,0)","chart.background.barcolor2":"rgba(0,0,0,0)","chart.background.grid":true,"chart.background.grid.color":"#ddd","chart.background.grid.width":1,"chart.background.grid.hsize":20,"chart.background.grid.vsize":20,"chart.background.grid.vlines":true,"chart.background.grid.hlines":true,"chart.background.grid.border":true,"chart.background.grid.autofit":true,"chart.background.grid.autofit.numhlines":5,"chart.background.grid.autofit.numvlines":20,"chart.background.grid.dashed":false,"chart.background.grid.dotted":false,"chart.background.image.stretch":true,"chart.background.image.x":null,"chart.background.image.y":null,"chart.background.image.w":null,"chart.background.image.h":null,"chart.background.image.align":null,"chart.background.color":null,"chart.background.hbars":null,"chart.numyticks":10,"chart.hmargin":5,"chart.hmargin.grouped":1,"chart.strokecolor":"white","chart.axis.color":"black","chart.axis.linewidth":1,"chart.gutter.top":25,"chart.gutter.bottom":30,"chart.gutter.left":25,"chart.gutter.right":25,"chart.labels":null,"chart.labels.ingraph":null,"chart.labels.above":false,"chart.labels.above.decimals":0,"chart.labels.above.size":null,"chart.labels.above.color":null,"chart.labels.above.angle":null,"chart.labels.above.offset":4,"chart.ylabels":true,"chart.ylabels.count":5,"chart.ylabels.inside":false,"chart.xlabels.offset":0,"chart.xaxispos":"bottom","chart.yaxispos":"left","chart.text.angle":0,"chart.text.color":"black","chart.text.size":12,"chart.text.font":"Arial","chart.ymin":0,"chart.ymax":null,"chart.title":"","chart.title.font":null,"chart.title.background":null,"chart.title.hpos":null,"chart.title.vpos":null,"chart.title.bold":true,"chart.title.xaxis":"","chart.title.xaxis.bold":true,"chart.title.xaxis.size":null,"chart.title.xaxis.font":null,"chart.title.yaxis":"","chart.title.yaxis.bold":true,"chart.title.yaxis.size":null,"chart.title.yaxis.font":null,"chart.title.yaxis.color":null,"chart.title.xaxis.pos":null,"chart.title.yaxis.pos":null,"chart.title.yaxis.x":null,"chart.title.yaxis.y":null,"chart.title.xaxis.x":null,"chart.title.xaxis.y":null,"chart.title.x":null,"chart.title.y":null,"chart.title.halign":null,"chart.title.valign":null,"chart.colors":["Gradient(#F9D5C9:#E65F2D:#E65F2D:#E65F2D)","Gradient(#F7DCD1:#D4592A:#D4592A:#D4592A)","Gradient(#DEE5EA:#B5C3CE:#B5C3CE:#B5C3CE)","Gradient(#E5E5E3:#545451:#545451:#545451)","Gradient(#F6E5D2:#E9C294:#E9C294:#E9C294)","Gradient(#F5EAD3:#D6AA4E:#D6AA4E:#D6AA4E)"],"chart.colors.sequential":false,"chart.colors.reverse":false,"chart.grouping":"grouped","chart.variant":"bar","chart.variant.sketch.verticals":true,"chart.shadow":true,"chart.shadow.color":"#aaa","chart.shadow.offsetx":0,"chart.shadow.offsety":0,"chart.shadow.blur":15,"chart.tooltips":null,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.event":"onclick","chart.tooltips.highlight":true,"chart.highlight.stroke":"rgba(0,0,0,0)","chart.highlight.fill":"rgba(255,255,255,0.7)","chart.key":null,"chart.key.background":"white","chart.key.position":"graph","chart.key.shadow":false,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":false,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.interactive":false,"chart.key.interactive.highlight.chart.stroke":"black","chart.key.interactive.highlight.chart.fill":"rgba(255,255,255,0.7)","chart.key.interactive.highlight.label":"rgba(255,0,0,0.2)","chart.key.halign":"right","chart.key.color.shape":"square","chart.key.rounded":true,"chart.key.text.size":10,"chart.key.linewidth":1,"chart.key.colors":null,"chart.key.text.color":"black","chart.contextmenu":null,"chart.units.pre":"","chart.units.post":"","chart.scale.decimals":0,"chart.scale.point":".","chart.scale.thousand":",","chart.crosshairs":false,"chart.crosshairs.color":"#333","chart.crosshairs.hline":true,"chart.crosshairs.vline":true,"chart.linewidth":1,"chart.annotatable":false,"chart.annotate.color":"black","chart.zoom.factor":1.5,"chart.zoom.fade.in":true,"chart.zoom.fade.out":true,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":true,"chart.zoom.background":true,"chart.resizable":false,"chart.resize.handle.background":null,"chart.adjustable":false,"chart.noaxes":false,"chart.noxaxis":false,"chart.noyaxis":false,"chart.events.click":null,"chart.events.mousemove":null,"chart.numxticks":null,"chart.bevel":false};if(!this.canvas){alert("[BAR] No canvas support");return}for(var l=0;l<j.length;++l){if(typeof j[l]==="object"&&!RGraph.is_null(j[l])){this.stackedOrGrouped=true}}var e=RGraph.array_linearize(j);for(var l=0;l<e.length;++l){this["$"+l]={}}this.data=j;this.coords=[];this.coords2=[];this.coordsText=[];this.data_arr=RGraph.array_linearize(this.data);if(!this.canvas.__rgraph_aa_translated__){this.context.translate(0.5,0.5);this.canvas.__rgraph_aa_translated__=true}var h=RGraph;var g=this.canvas;var o=g.getContext("2d");var a=this.properties;var d=jQuery;var q=h.Path;var m=window;var p=document;var r=Math;if(h.Effects&&typeof h.Effects.decorate==="function"){h.Effects.decorate(this)}this.set=this.Set=function(s){var u=typeof arguments[1]==="undefined"?null:arguments[1];if(arguments.length===1&&typeof arguments[0]==="object"){h.parseObjectStyleConfig(this,arguments[0]);return this}s=s.toLowerCase();if(s.substr(0,6)!="chart."){s="chart."+s}if(s=="chart.labels.abovebar"){s="chart.labels.above"}if(s=="chart.strokestyle"){s="chart.strokecolor"}if(s=="chart.xaxispos"){if(u!="bottom"&&u!="center"&&u!="top"){alert("[BAR] ("+this.id+") chart.xaxispos should be top, center or bottom. Tried to set it to: "+u+" Changing it to center");u="center"}if(u=="top"){for(var t=0;t<this.data.length;++t){if(typeof(this.data[t])=="number"&&this.data[t]>0){alert("[BAR] The data element with index "+t+" should be negative")}}}}if(s.toLowerCase()=="chart.linewidth"&&u==0){u=0.0001}a[s]=u;return this};this.get=this.Get=function(i){if(i.substr(0,6)!="chart."){i="chart."+i}return a[i]};this.draw=this.Draw=function(){if(typeof(a["chart.background.image"])=="string"){h.DrawBackgroundImage(this)}h.FireCustomEvent(this,"onbeforedraw");if(!this.colorsParsed){this.parseColors();this.colorsParsed=true}this.gutterLeft=a["chart.gutter.left"];this.gutterRight=a["chart.gutter.right"];this.gutterTop=a["chart.gutter.top"];this.gutterBottom=a["chart.gutter.bottom"];if((a["chart.variant"]=="pyramid"||a["chart.variant"]=="dot")&&typeof(a["chart.tooltips"])=="object"&&a["chart.tooltips"]&&a["chart.tooltips"].length>0){alert("[BAR] ("+this.id+") Sorry, tooltips are not supported with dot or pyramid charts")}this.coords=[];this.coords2=[];this.coordsText=[];this.max=0;this.grapharea=g.height-this.gutterTop-this.gutterBottom;this.halfgrapharea=this.grapharea/2;this.halfTextHeight=a["chart.text.size"]/2;h.background.Draw(this);if(a["chart.variant"]=="sketch"){this.DrawAxes();this.Drawbars()}else{this.Drawbars();this.DrawAxes()}this.DrawLabels();if(a["chart.bevel"]||a["chart.bevelled"]){this.DrawBevel()}if(a["chart.key"]&&a["chart.key"].length){h.DrawKey(this,a["chart.key"],a["chart.colors"])}if(a["chart.contextmenu"]){h.ShowContext(this)}if(a["chart.labels.ingraph"]){h.DrawInGraphLabels(this)}if(a["chart.resizable"]){h.AllowResizing(this)}h.InstallEventListeners(this);if(this.firstDraw){h.fireCustomEvent(this,"onfirstdraw");this.firstDraw=false;this.firstDrawFunc()}h.fireCustomEvent(this,"ondraw");return this};this.drawAxes=this.DrawAxes=function(){if(a["chart.noaxes"]){return}var i=a["chart.xaxispos"];var A=a["chart.yaxispos"];var z=a["chart.variant"]=="sketch";o.beginPath();o.strokeStyle=a["chart.axis.color"];o.lineWidth=a["chart.axis.linewidth"]+0.001;if(h.ISSAFARI==-1){o.lineCap="square"}if(a["chart.noyaxis"]==false){if(A=="right"){o.moveTo(g.width-this.gutterRight+(z?3:0),this.gutterTop-(z?3:0));o.lineTo(g.width-this.gutterRight-(z?2:0),g.height-this.gutterBottom+(z?5:0))}else{o.moveTo(this.gutterLeft-(z?2:0),this.gutterTop-(z?5:0));o.lineTo(this.gutterLeft-(z?1:0),g.height-this.gutterBottom+(z?5:0))}}if(a["chart.noxaxis"]==false){if(i=="center"){o.moveTo(this.gutterLeft-(z?5:0),Math.round(((g.height-this.gutterTop-this.gutterBottom)/2)+this.gutterTop+(z?2:0)));o.lineTo(g.width-this.gutterRight+(z?5:0),Math.round(((g.height-this.gutterTop-this.gutterBottom)/2)+this.gutterTop-(z?2:0)))}else{if(i=="top"){o.moveTo(this.gutterLeft-(z?3:0),this.gutterTop-(z?3:0));o.lineTo(g.width-this.gutterRight+(z?5:0),this.gutterTop+(z?2:0))}else{o.moveTo(this.gutterLeft-(z?5:0),g.height-this.gutterBottom-(z?2:0));o.lineTo(g.width-this.gutterRight+(z?8:0),g.height-this.gutterBottom+(z?2:0))}}}var t=a["chart.numyticks"];if(a["chart.noyaxis"]==false&&!z){var w=(g.height-this.gutterTop-this.gutterBottom)/t;var s=A=="left"?this.gutterLeft:g.width-this.gutterRight;if(this.properties["chart.numyticks"]>0){for(y=this.gutterTop;i=="center"?y<=(g.height-this.gutterBottom):y<(g.height-this.gutterBottom+(i=="top"?1:0));y+=w){if(i=="center"&&y==(this.gutterTop+(this.grapharea/2))){continue}if(i=="top"&&y==this.gutterTop){continue}o.moveTo(s+(A=="left"?0:0),Math.round(y));o.lineTo(s+(A=="left"?-3:3),Math.round(y))}}if(a["chart.noxaxis"]){if(i=="center"){o.moveTo(s+(A=="left"?-3:3),Math.round(g.height/2));o.lineTo(s,Math.round(g.height/2))}else{if(i=="top"){o.moveTo(s+(A=="left"?-3:3),Math.round(this.gutterTop));o.lineTo(s,Math.round(this.gutterTop))}else{o.moveTo(s+(A=="left"?-3:3),Math.round(g.height-this.gutterBottom));o.lineTo(s,Math.round(g.height-this.gutterBottom))}}}}if(a["chart.noxaxis"]==false&&!z){if(typeof(a["chart.numxticks"])=="number"){var v=(g.width-this.gutterLeft-this.gutterRight)/a["chart.numxticks"]}else{var v=(g.width-this.gutterLeft-this.gutterRight)/this.data.length}if(i=="bottom"){yStart=g.height-this.gutterBottom;yEnd=(g.height-this.gutterBottom)+3}else{if(i=="top"){yStart=this.gutterTop-3;yEnd=this.gutterTop}else{if(i=="center"){yStart=((g.height-this.gutterTop-this.gutterBottom)/2)+this.gutterTop+3;yEnd=((g.height-this.gutterTop-this.gutterBottom)/2)+this.gutterTop-3}}}yStart=yStart;yEnd=yEnd;var u=a["chart.noendxtick"];for(x=this.gutterLeft+(A=="left"?v:0),len=(g.width-this.gutterRight+(A=="left"?5:0));x<len;x+=v){if(A=="left"&&!u&&x>this.gutterLeft){o.moveTo(Math.round(x),yStart);o.lineTo(Math.round(x),yEnd)}else{if(A=="left"&&u&&x>this.gutterLeft&&x<(g.width-this.gutterRight)){o.moveTo(Math.round(x),yStart);o.lineTo(Math.round(x),yEnd)}else{if(A=="right"&&x<(g.width-this.gutterRight)&&!u){o.moveTo(Math.round(x),yStart);o.lineTo(Math.round(x),yEnd)}else{if(A=="right"&&x<(g.width-this.gutterRight)&&x>(this.gutterLeft)&&u){o.moveTo(Math.round(x),yStart);o.lineTo(Math.round(x),yEnd)}}}}}if(a["chart.noyaxis"]||a["chart.numxticks"]==null){if(typeof(a["chart.numxticks"])=="number"&&a["chart.numxticks"]>0){o.moveTo(Math.round(this.gutterLeft),yStart);o.lineTo(Math.round(this.gutterLeft),yEnd)}}}if(a["chart.noyaxis"]&&a["chart.noxaxis"]==false&&a["chart.numxticks"]==null){if(i=="center"){o.moveTo(Math.round(this.gutterLeft),(g.height/2)-3);o.lineTo(Math.round(this.gutterLeft),(g.height/2)+3)}else{o.moveTo(Math.round(this.gutterLeft),g.height-this.gutterBottom);o.lineTo(Math.round(this.gutterLeft),g.height-this.gutterBottom+3)}}o.stroke()};this.drawbars=this.Drawbars=function(){o.lineWidth=a["chart.linewidth"];o.strokeStyle=a["chart.strokecolor"];o.fillStyle=a["chart.colors"][0];var u=0;var t=0;var aa=a["chart.scale.decimals"];if(a["chart.ymax"]){this.scale2=RGraph.getScale2(this,{max:a["chart.ymax"],strict:true,min:a["chart.ymin"],"scale.thousand":a["chart.scale.thousand"],"scale.point":a["chart.scale.point"],"scale.decimals":a["chart.scale.decimals"],"ylabels.count":a["chart.ylabels.count"],"scale.round":a["chart.scale.round"],"units.pre":a["chart.units.pre"],"units.post":a["chart.units.post"]})}else{for(l=0;l<this.data.length;++l){if(typeof(this.data[l])=="object"){var S=a["chart.grouping"]=="grouped"?Number(h.array_max(this.data[l],true)):Number(h.array_sum(this.data[l]))}else{var S=Number(this.data[l])}this.max=Math.max(Math.abs(this.max),Math.abs(S))}this.scale2=RGraph.getScale2(this,{max:this.max,min:a["chart.ymin"],"scale.thousand":a["chart.scale.thousand"],"scale.point":a["chart.scale.point"],"scale.decimals":a["chart.scale.decimals"],"ylabels.count":a["chart.ylabels.count"],"scale.round":a["chart.scale.round"],"units.pre":a["chart.units.pre"],"units.post":a["chart.units.post"]});this.max=this.scale2.max}if(a["chart.adjustable"]&&!a["chart.ymax"]){this.Set("chart.ymax",this.scale2.max)}if(a["chart.background.hbars"]&&a["chart.background.hbars"].length>0){RGraph.DrawBars(this)}var A=a["chart.variant"];if(A=="3d"){h.Draw3DAxes(this)}var O=a["chart.xaxispos"];var R=(g.width-this.gutterLeft-this.gutterRight)/this.data.length;var C=M;var D=a["chart.hmargin"];var z=a["chart.shadow"];var N=a["chart.shadow.color"];var L=a["chart.shadow.blur"];var Q=a["chart.shadow.offsetx"];var P=a["chart.shadow.offsety"];var V=a["chart.strokecolor"];var F=a["chart.colors"];var T=0;for(l=0,len=this.data.length;l<len;l+=1){var M=((RGraph.array_sum(this.data[l])<0?RGraph.array_sum(this.data[l])+this.scale2.min:RGraph.array_sum(this.data[l])-this.scale2.min)/(this.scale2.max-this.scale2.min))*(g.height-this.gutterTop-this.gutterBottom);if(O=="center"){M/=2}var H=(l*R)+this.gutterLeft;var E=O=="center"?((g.height-this.gutterTop-this.gutterBottom)/2)+this.gutterTop-M:g.height-M-this.gutterBottom;if(O=="top"){E=this.gutterTop+Math.abs(M)}if(M<0){E+=M;M=Math.abs(M)}if(z){o.shadowColor=N;o.shadowBlur=L;o.shadowOffsetX=Q;o.shadowOffsetY=P}o.beginPath();if(typeof(this.data[l])=="number"){var K=R-(2*D);if(K<0){alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient.")}o.strokeStyle=V;o.fillStyle=F[0];if(a["chart.colors.sequential"]){o.fillStyle=F[l]}if(A=="sketch"){o.lineCap="round";var B=3;o.beginPath();o.strokeStyle=F[0];if(a["chart.colors.sequential"]){o.strokeStyle=F[l]}o.moveTo(H+D+2,E+M-2);o.lineTo(H+D-1,E-4);o.moveTo(H+D-3,E+-2+(this.data[l]<0?M:0));o.bezierCurveTo(H+((D+R)*0.33),E+15+(this.data[l]<0?M-10:0),H+((D+R)*0.66),E+5+(this.data[l]<0?M-10:0),H+D+R+-1,E+0+(this.data[l]<0?M:0));o.moveTo(H+D+R-5,E-5);o.lineTo(H+D+R-3,E+M-3);if(a["chart.variant.sketch.verticals"]){for(var J=0.2;J<=0.8;J+=0.2){o.moveTo(H+D+R+(J>0.4?-1:3)-(J*R),E-1);o.lineTo(H+D+R-(J>0.4?1:-1)-(J*R),E+M+(J==0.2?1:-2))}}o.stroke()}else{if(A=="bar"||A=="3d"||A=="glass"||A=="bevel"){if(RGraph.ISOLD&&z){this.DrawIEShadow([H+D,E,K,M])}if(A=="glass"){RGraph.filledCurvyRect(o,H+D,E,K,M,3,this.data[l]>0,this.data[l]>0,this.data[l]<0,this.data[l]<0);RGraph.strokedCurvyRect(o,H+D,E,K,M,3,this.data[l]>0,this.data[l]>0,this.data[l]<0,this.data[l]<0)}else{o.beginPath();o.rect(H+D,E,K,M);o.fill();h.NoShadow(this);o.beginPath();o.rect(H+D,E,K,M);o.stroke()}if(A=="3d"){var v=o.strokeStyle;var I=o.fillStyle;o.beginPath();o.moveTo(H+D,E);o.lineTo(H+D+10,E-5);o.lineTo(H+D+10+K,E-5);o.lineTo(H+D+K,E);o.closePath();o.stroke();o.fill();o.beginPath();o.moveTo(H+D+K,E);o.lineTo(H+D+K+10,E-5);o.lineTo(H+D+K+10,E+M-5);o.lineTo(H+D+K,E+M);o.closePath();o.stroke();o.fill();o.beginPath();o.fillStyle="rgba(255,255,255,0.3)";o.moveTo(H+D,E);o.lineTo(H+D+10,E-5);o.lineTo(H+D+10+K,E-5);o.lineTo(H+D+K,E);o.lineTo(H+D,E);o.closePath();o.stroke();o.fill();o.beginPath();o.fillStyle="rgba(0,0,0,0.4)";o.moveTo(H+D+K,E);o.lineTo(H+D+K+10,E-5);o.lineTo(H+D+K+10,E-5+M);o.lineTo(H+D+K,E+M);o.lineTo(H+D+K,E);o.closePath();o.stroke();o.fill();o.strokeStyle=v;o.fillStyle=I}else{if(A=="glass"){var w=o.createLinearGradient(H+D,E,H+D+(K/2),E);w.addColorStop(0,"rgba(255,255,255,0.9)");w.addColorStop(1,"rgba(255,255,255,0.5)");o.beginPath();o.fillStyle=w;o.fillRect(H+D+2,E+(this.data[l]>0?2:0),(K/2)-2,M-2);o.fill()}}}else{if(A=="dot"){o.beginPath();o.moveTo(H+(R/2),E);o.lineTo(H+(R/2),E+M);o.stroke();o.beginPath();o.fillStyle=this.properties["chart.colors"][l];o.arc(H+(R/2),E+(this.data[l]>0?0:M),2,0,6.28,0);o.fillStyle=a["chart.colors"][0];if(a["chart.colors.sequential"]){o.fillStyle=F[l]}o.stroke();o.fill()}else{alert("[BAR] Warning! Unknown chart.variant: "+A)}}}this.coords.push([H+D,E,R-(2*D),M]);if(typeof this.coords2[l]=="undefined"){this.coords2[l]=[]}this.coords2[l].push([H+D,E,R-(2*D),M])}else{if(this.data[l]&&typeof(this.data[l])=="object"&&a["chart.grouping"]=="stacked"){if(this.scale2.min){alert("[ERROR] Stacked Bar charts with a Y min are not supported")}var K=R-(2*D);var s=[];var W=0;var G=this.data[l];if(K<0){alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient.")}for(U=0;U<G.length;++U){if(O=="center"){alert("[BAR] It's pointless having the X axis position at the center on a stacked bar chart.");return}if(this.data[l][U]<0){alert("[BAR] Negative values are not permitted with a stacked bar chart. Try a grouped one instead.");return}o.strokeStyle=V;o.fillStyle=F[U];if(a["chart.colors.reverse"]){o.fillStyle=F[this.data[l].length-U-1]}if(a["chart.colors.sequential"]&&F[T]){o.fillStyle=F[T++]}else{if(a["chart.colors.sequential"]){o.fillStyle=F[T-1]}}var M=(G[U]/this.scale2.max)*(g.height-this.gutterTop-this.gutterBottom);if(O=="center"){M/=2}var Z=(RGraph.array_sum(G)/this.scale2.max)*(g.height-D-this.gutterTop-this.gutterBottom);this.coords.push([H+D,E,R-(2*D),M]);if(typeof this.coords2[l]=="undefined"){this.coords2[l]=[]}this.coords2[l].push([H+D,E,R-(2*D),M]);if(RGraph.ISOLD&&z){this.DrawIEShadow([H+D,E,R-(2*D),M+1])}if(M>0){o.strokeRect(H+D,E,R-(2*D),M);o.fillRect(H+D,E,R-(2*D),M)}if(U==0){var W=E;var Y=H}if(z){s.push([H+D,E,R-(2*D),M,o.fillStyle])}if(A=="3d"){var I=o.fillStyle;var v=o.strokeStyle;if(U==0){o.beginPath();o.moveTo(Y+D,E);o.lineTo(Y+10+D,E-5);o.lineTo(Y+10+K+D,E-5);o.lineTo(Y+K+D,E);o.closePath();o.fill();o.stroke()}o.beginPath();o.moveTo(Y+K+D,E);o.lineTo(Y+K+D+10,E-5);o.lineTo(Y+K+D+10,E-5+M);o.lineTo(Y+K+D,E+M);o.closePath();o.fill();o.stroke();if(U==0){o.fillStyle="rgba(255,255,255,0.3)";o.beginPath();o.moveTo(Y+D,E);o.lineTo(Y+10+D,E-5);o.lineTo(Y+10+K+D,E-5);o.lineTo(Y+K+D,E);o.closePath();o.fill();o.stroke()}o.fillStyle="rgba(0,0,0,0.4)";o.beginPath();o.moveTo(Y+K+D,E);o.lineTo(Y+K+D+10,E-5);o.lineTo(Y+K+D+10,E-5+M);o.lineTo(Y+K+D,E+M);o.closePath();o.fill();o.stroke();o.strokeStyle=v;o.fillStyle=I}E+=M}if(z){RGraph.NoShadow(this);for(k=0;k<s.length;++k){o.strokeStyle=V;o.fillStyle=s[k][4];o.strokeRect(s[k][0],s[k][1],s[k][2],s[k][3]);o.fillRect(s[k][0],s[k][1],s[k][2],s[k][3]);o.stroke();o.fill()}s=[]}}else{if(this.data[l]&&typeof(this.data[l])=="object"&&a["chart.grouping"]=="grouped"){var s=[];o.lineWidth=a["chart.linewidth"];for(U=0;U<this.data[l].length;++U){o.strokeStyle=V;o.fillStyle=F[U];if(a["chart.colors.sequential"]&&F[T]){o.fillStyle=F[T++]}else{if(a["chart.colors.sequential"]){o.fillStyle=F[T-1]}}var i=(R-(2*D))/this.data[l].length;var M=((this.data[l][U]+(this.data[l][U]<0?this.scale2.min:(-1*this.scale2.min)))/(this.scale2.max-this.scale2.min))*(g.height-this.gutterTop-this.gutterBottom);var X=a["chart.hmargin.grouped"];var Y=H+D+(U*i);if(i<0){alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient.")}if(O=="center"){M/=2}if(O=="top"){var W=this.gutterTop;var M=Math.abs(M)}else{if(O=="center"){var W=this.gutterTop+(this.grapharea/2)-M}else{var W=g.height-this.gutterBottom-M;var M=Math.abs(M)}}if(RGraph.ISOLD&&z){this.DrawIEShadow([Y,W,i,M])}o.strokeRect(Y+X,W,i-(2*X),M);o.fillRect(Y+X,W,i-(2*X),M);E+=M;if(A=="3d"){var I=o.fillStyle;var v=o.strokeStyle;o.beginPath();o.moveTo(Y,W);o.lineTo(Y+10,W-5);o.lineTo(Y+10+i,W-5);o.lineTo(Y+i,W);o.closePath();o.fill();o.stroke();o.beginPath();o.moveTo(Y+i,W);o.lineTo(Y+i+10,W-5);o.lineTo(Y+i+10,W-5+M);o.lineTo(Y+i,W+M);o.closePath();o.fill();o.stroke();o.fillStyle="rgba(255,255,255,0.3)";o.beginPath();o.moveTo(Y,W);o.lineTo(Y+10,W-5);o.lineTo(Y+10+i,W-5);o.lineTo(Y+i,W);o.closePath();o.fill();o.stroke();o.fillStyle="rgba(0,0,0,0.4)";o.beginPath();o.moveTo(Y+i,W);o.lineTo(Y+i+10,W-5);o.lineTo(Y+i+10,W-5+M);o.lineTo(Y+i,W+M);o.closePath();o.fill();o.stroke();o.strokeStyle=v;o.fillStyle=I}if(M<0){M=Math.abs(M);W=W-M}this.coords.push([Y+X,W,i-(2*X),M]);if(typeof this.coords2[l]=="undefined"){this.coords2[l]=[]}this.coords2[l].push([Y+X,W,i-(2*X),M]);if(a["chart.shadow"]){s.push([Y+X,W,i-(2*X),M,o.fillStyle])}}if(s.length){RGraph.NoShadow(this);o.lineWidth=a["chart.linewidth"];o.beginPath();for(var U=0;U<s.length;++U){o.fillStyle=s[U][4];o.strokeStyle=a["chart.strokecolor"];o.fillRect(s[U][0],s[U][1],s[U][2],s[U][3]);o.strokeRect(s[U][0],s[U][1],s[U][2],s[U][3])}o.fill();o.stroke();s=[]}}else{this.coords.push([])}}}o.closePath()}RGraph.NoShadow(this)};this.drawLabels=this.DrawLabels=function(){var A=this.canvas;var F=this.context;var s=this.properties;var t=F;var z=s["chart.text.angle"];var C=s["chart.text.size"];var E=s["chart.labels"];if(s["chart.ylabels"]){if(s["chart.xaxispos"]=="top"){this.Drawlabels_top()}if(s["chart.xaxispos"]=="center"){this.Drawlabels_center()}if(s["chart.xaxispos"]=="bottom"){this.Drawlabels_bottom()}}if(typeof(E)=="object"&&E){var w=Number(s["chart.xlabels.offset"]);if(s["chart.text.angle"]!=0){var G="center";var D="right";var v=0-s["chart.text.angle"]}else{var G="top";var D="center";var v=0}F.fillStyle=s["chart.text.color"];var H=(A.width-this.gutterRight-this.gutterLeft)/E.length;xTickGap=(A.width-this.gutterRight-this.gutterLeft)/E.length;var B=0;var u=s["chart.text.font"];for(x=this.gutterLeft+(xTickGap/2);x<=A.width-this.gutterRight;x+=xTickGap){RGraph.Text2(this,{font:u,size:C,x:x,y:s["chart.xaxispos"]=="top"?this.gutterTop-w-5:(A.height-this.gutterBottom)+w+3,text:String(E[B++]),valign:s["chart.xaxispos"]=="top"?"bottom":G,halign:D,tag:"label",marker:false,angle:v,tag:"labels"})}}this.drawAboveLabels()};this.drawlabels_top=this.Drawlabels_top=function(){var A=this.canvas;var I=this.context;var s=this.properties;I.beginPath();I.fillStyle=s["chart.text.color"];I.strokeStyle="black";if(s["chart.xaxispos"]=="top"){var v=I;var D=s["chart.text.size"];var K=s["chart.units.pre"];var G=s["chart.units.post"];var F=s["chart.yaxispos"]=="left"?"right":"left";var z=s["chart.text.font"];var u=s["chart.ylabels.count"];var J=s["chart.ymin"];if(s["chart.ylabels.inside"]==true){var C=s["chart.yaxispos"]=="left"?this.gutterLeft+5:A.width-this.gutterRight-5;var F=s["chart.yaxispos"]=="left"?"left":"right";var t=true}else{var C=s["chart.yaxispos"]=="left"?this.gutterLeft-5:A.width-this.gutterRight+5;var t=false}if(typeof(s["chart.ylabels.specific"])=="object"&&s["chart.ylabels.specific"]){var E=RGraph.array_reverse(s["chart.ylabels.specific"]);var w=A.height-this.gutterTop-this.gutterBottom;for(var B=0;B<E.length;++B){var H=this.gutterTop+(w*(B/E.length))+(w/E.length);RGraph.Text2(this,{font:z,size:D,x:C,y:H,text:String(E[B]),valign:"center",halign:F,bordered:t,tag:"scale"})}return}var E=this.scale2.labels;for(var B=0;B<E.length;++B){RGraph.Text2(this,{font:z,size:D,x:C,y:this.gutterTop+((this.grapharea/E.length)*(B+1)),text:"-"+E[B],valign:"center",halign:F,bordered:t,tag:"scale"})}if(s["chart.ymin"]!=0||s["chart.noxaxis"]||s["chart.scale.zerostart"]){RGraph.Text2(this,{font:z,size:D,x:C,y:this.gutterTop,text:(this.scale2.min!=0?"-":"")+RGraph.number_format(this,(this.scale2.min.toFixed((s["chart.scale.decimals"]))),K,G),valign:"center",halign:F,bordered:t,tag:"scale"})}}I.fill()};this.drawlabels_center=this.Drawlabels_center=function(){var D=this.canvas;var v=this.context;var t=this.properties;var C=t["chart.text.font"];var J=t["chart.ylabels.count"];v.fillStyle=t["chart.text.color"];if(t["chart.xaxispos"]=="center"){var z=t["chart.text.size"];var L=t["chart.units.pre"];var G=t["chart.units.post"];var s=v;var H="";var u=0;var E=false;var F=t["chart.ymin"];v.fillStyle=t["chart.text.color"];v.strokeStyle="black";if(t["chart.ylabels.inside"]==true){var u=t["chart.yaxispos"]=="left"?this.gutterLeft+5:D.width-this.gutterRight-5;var H=t["chart.yaxispos"]=="left"?"left":"right";var E=true}else{var u=t["chart.yaxispos"]=="left"?this.gutterLeft-5:D.width-this.gutterRight+5;var H=t["chart.yaxispos"]=="left"?"right":"left";var E=false}if(typeof(t["chart.ylabels.specific"])=="object"&&t["chart.ylabels.specific"]){var K=t["chart.ylabels.specific"];var A=D.height-this.gutterTop-this.gutterBottom;for(var I=0;I<K.length;++I){var w=this.gutterTop+((A/2)/(K.length-1))*I;RGraph.Text2(this,{font:C,size:z,x:u,y:w,text:String(K[I]),valign:"center",halign:H,bordered:E,tag:"scale"})}for(var I=K.length-1;I>=1;--I){var w=this.gutterTop+(A*(I/((K.length-1)*2)))+(A/2);h.Text2(this,{font:C,size:z,x:u,y:w,text:String(K[K.length-I-1]),valign:"center",halign:H,bordered:E,tag:"scale"})}return}for(var I=0;I<this.scale2.labels.length;++I){var w=this.gutterTop+this.halfgrapharea-((this.halfgrapharea/J)*(I+1));var B=this.scale2.labels[I];h.Text2(this,{font:C,size:z,x:u,y:w,text:B,valign:"center",halign:H,bordered:E,tag:"scale"})}for(var I=(this.scale2.labels.length-1);I>=0;--I){var w=this.gutterTop+((this.halfgrapharea/J)*(I+1))+this.halfgrapharea;var B=this.scale2.labels[I];h.Text2(this,{font:C,size:z,x:u,y:w,text:"-"+B,valign:"center",halign:H,bordered:E,tag:"scale"})}if(this.scale2.min!=0||t["chart.scale.zerostart"]){h.Text2(this,{font:C,size:z,x:u,y:this.gutterTop+this.halfgrapharea,text:RGraph.number_format(this,(this.scale2.min.toFixed((t["chart.scale.decimals"]))),L,G),valign:"center",valign:"center",halign:H,bordered:E,tag:"scale"})}}};this.drawlabels_bottom=this.Drawlabels_bottom=function(){var v=this.context;var E=this.canvas;var t=this.properties;var z=t["chart.text.size"];var N=t["chart.units.pre"];var H=t["chart.units.post"];var s=this.context;var I=t["chart.yaxispos"]=="left"?"right":"left";var D=t["chart.text.font"];var K=t["chart.ylabels.count"];var G=t["chart.ymin"];v.beginPath();v.fillStyle=t["chart.text.color"];v.strokeStyle="black";if(t["chart.ylabels.inside"]==true){var u=t["chart.yaxispos"]=="left"?this.gutterLeft+5:E.width-this.gutterRight-5;var I=t["chart.yaxispos"]=="left"?"left":"right";var F=true}else{var u=t["chart.yaxispos"]=="left"?this.gutterLeft-5:E.width-this.gutterRight+5;var F=false}if(t["chart.ylabels.specific"]&&typeof(t["chart.ylabels.specific"])=="object"){var L=t["chart.ylabels.specific"];var A=E.height-this.gutterTop-this.gutterBottom;for(var J=0;J<L.length;++J){var w=this.gutterTop+(A*(J/(L.length-1)));RGraph.Text2(this,{font:D,size:z,x:u,y:w,text:L[J],valign:"center",halign:I,bordered:F,tag:"scale"})}return}var M=this.gutterTop;var B=this.halfTextHeight;var O=this.scale;for(var J=0;J<K;++J){var C=this.scale2.labels[J];RGraph.Text2(this,{font:D,size:z,x:u,y:this.gutterTop+this.grapharea-((this.grapharea/K)*(J+1)),text:C,valign:"center",halign:I,bordered:F,tag:"scale"})}if(t["chart.ymin"]!=0||t["chart.noxaxis"]||t["chart.scale.zerostart"]){h.Text2(this,{font:D,size:z,x:u,y:E.height-this.gutterBottom,text:h.number_format(this,(this.scale2.min.toFixed((t["chart.scale.decimals"]))),N,H),valign:"center",halign:I,bordered:F,tag:"scale"})}v.fill()};this.drawIEShadow=this.DrawIEShadow=function(v){var w=this.context;var t=this.canvas;var z=this.properties;var u=w.fillStyle;var s=z["chart.shadow.offsetx"];var i=z["chart.shadow.offsety"];w.lineWidth=z["chart.linewidth"];w.fillStyle=z["chart.shadow.color"];w.beginPath();w.fillRect(v[0]+s,v[1]+i,v[2],v[3]);w.fill();w.fillStyle=u};this.getShape=this.getBar=function(L){var D=arguments[1]?arguments[1]:this;var z=RGraph.getMouseXY(L);var B=z[0];var A=z[1];var u=D.canvas;var s=D.context;var I=D.coords;for(var J=0,K=I.length;J<K;J+=1){if(D.coords[J].length==0){continue}var v=I[J][0];var F=I[J][1];var H=I[J][2];var G=I[J][3];var t=D.properties;if(B>=v&&B<=(v+H)&&A>=F&&A<=(F+G)){if(t["chart.tooltips"]){var w=RGraph.parseTooltipText?RGraph.parseTooltipText(t["chart.tooltips"],J):t["chart.tooltips"][J]}var C=0;var E=J;while(E>=(typeof(D.data[C])=="object"&&D.data[C]?D.data[C].length:1)){if(typeof(D.data[C])=="number"){E-=1}else{if(D.data[C]){E-=D.data[C].length}else{E-=1}}C++}if(typeof(D.data[C])=="number"){E=null}return{0:D,1:v,2:F,3:H,4:G,5:J,object:D,x:v,y:F,width:H,height:G,index:J,tooltip:w,index_adjusted:E,dataset:C}}}return null};this.getShapeByX=function(D){var u=D.target;var F=RGraph.getMouseXY(D);var A=arguments[1]?arguments[1]:this;for(var B=0,C=A.coords.length;B<C;B++){if(A.coords[B].length==0){continue}var z=F[0];var w=F[1];var v=A.coords[B][0];var E=A.coords[B][1];var t=A.coords[B][2];var G=A.coords[B][3];var s=A.properties;if(z>=v&&z<=(v+t)){if(s["chart.tooltips"]){var H=RGraph.parseTooltipText?RGraph.parseTooltipText(s["chart.tooltips"],B):s["chart.tooltips"][B]}return{0:A,1:v,2:E,3:t,4:G,5:B,object:A,x:v,y:E,width:t,height:G,index:B,tooltip:H}}}return null};this.getValue=function(i){var z=this.context;var s=this.canvas;var A=this.properties;if(i.length==2){var u=i[0];var t=i[1]}else{var v=RGraph.getMouseXY(i);var u=v[0];var t=v[1]}if(t<A["chart.gutter.top"]||t>(s.height-A["chart.gutter.bottom"])||u<A["chart.gutter.left"]||u>(s.width-A["chart.gutter.right"])){return null}if(A["chart.xaxispos"]=="center"){var w=(((this.grapharea/2)-(t-A["chart.gutter.top"]))/this.grapharea)*(this.scale2.max-this.scale2.min);w*=2;if(w>=0){w+=this.scale2.min}else{w-=this.scale2.min}}else{if(A["chart.xaxispos"]=="top"){var w=((this.grapharea-(t-A["chart.gutter.top"]))/this.grapharea)*(this.scale2.max-this.scale2.min);w=this.scale2.max-w;w=Math.abs(w)*-1}else{var w=((this.grapharea-(t-A["chart.gutter.top"]))/this.grapharea)*(this.scale2.max-this.scale2.min);w+=this.scale2.min}}return w};this.getYCoord=function(t){if(t>this.scale2.max){return null}var u=this.context;var s=this.canvas;var w=this.properties;var v;var i=w["chart.xaxispos"];if(i=="top"){if(t<0){t=Math.abs(t)}v=((t-this.scale2.min)/(this.scale2.max-this.scale2.min))*this.grapharea;v=v+this.gutterTop}else{if(i=="center"){v=((t-this.scale2.min)/(this.scale2.max-this.scale2.min))*(this.grapharea/2);v=(this.grapharea/2)-v;v+=this.gutterTop}else{if(t<this.scale2.min){t=this.scale2.min}v=((t-this.scale2.min)/(this.scale2.max-this.scale2.min))*this.grapharea;v=s.height-this.gutterBottom-v}}return v};this.highlight=this.Highlight=function(i){RGraph.Highlight.Rect(this,i)};this.getObjectByXY=function(t){var i=this.canvas;var u=this.properties;var s=RGraph.getMouseXY(t);if(s[0]>=u["chart.gutter.left"]&&s[0]<=(i.width-u["chart.gutter.right"])&&s[1]>=u["chart.gutter.top"]&&s[1]<=(i.height-u["chart.gutter.bottom"])){return this}};this.adjusting_mousemove=this.Adjusting_mousemove=function(u){if(a["chart.adjustable"]&&h.Registry.Get("chart.adjusting")&&h.Registry.Get("chart.adjusting").uid==this.uid){var t=Number(this.getValue(u));var i=this.getShapeByX(u);if(i){h.Registry.Set("chart.adjusting.shape",i);if(this.stackedOrGrouped&&a["chart.grouping"]=="grouped"){var s=h.sequentialIndexToGrouped(i.index,this.data);if(typeof this.data[s[0]]=="number"){this.data[s[0]]=Number(t)}else{if(!h.is_null(this.data[s[0]])){this.data[s[0]][s[1]]=Number(t)}}}else{if(typeof this.data[i.index]=="number"){this.data[i.index]=Number(t)}}h.redrawCanvas(u.target);h.fireCustomEvent(this,"onadjust")}}};this.positionTooltip=function(w,C,B,J,E){var i=w.properties;var H=w.coords[J.__index__][0];var G=w.coords[J.__index__][1];var I=w.coords[J.__index__][2];var z=w.coords[J.__index__][3];var v=RGraph.getCanvasXY(w.canvas);var A=i["chart.gutter.left"];var t=i["chart.gutter.top"];var s=J.offsetWidth;var F=J.offsetHeight;var D=w.data_arr[J.__index__];J.style.left=0;J.style.top=v[1]+G-F-7+"px";if(D<0){J.style.top=v[1]+G+z+7+"px"}J.style.overflow="";var u=new Image();u.style.position="absolute";u.id="__rgraph_tooltip_pointer__";if(D>=0){u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC";u.style.top=(J.offsetHeight-2)+"px"}else{u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAFCAMAAACkeOZkAAAAK3RFWHRDcmVhdGlvbiBUaW1lAFNhdCA2IE9jdCAyMDEyIDEyOjQ5OjMyIC0wMDAw2S1RlgAAAAd0SU1FB9wKBgszM4Ed2k4AAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAEZ0FNQQAAsY8L/GEFAAAACVBMVEX/AAC9vb3//+92Pom0AAAAAXRSTlMAQObYZgAAAB1JREFUeNpjYAABRgY4YGRiRDCZYBwQE8qBMEEcAANCACqByy1sAAAAAElFTkSuQmCC";u.style.top="-5px"}J.appendChild(u);if((v[0]+H+(I/2)-(s/2))<10){J.style.left=(v[0]+H-(s*0.1))+(I/2)+"px";u.style.left=((s*0.1)-8.5)+"px"}else{if((v[0]+H+(s/2))>p.body.offsetWidth){J.style.left=v[0]+H-(s*0.9)+(I/2)+"px";u.style.left=((s*0.9)-8.5)+"px"}else{J.style.left=(v[0]+H+(I/2)-(s*0.5))+"px";u.style.left=((s*0.5)-8.5)+"px"}}};this.parseColors=function(){if(this.original_colors.length===0){this.original_colors["chart.colors"]=RGraph.array_clone(a["chart.colors"]);this.original_colors["chart.key.colors"]=RGraph.array_clone(a["chart.key.colors"]);this.original_colors["chart.crosshairs.color"]=a["chart.crosshairs.color"];this.original_colors["chart.highlight.stroke"]=a["chart.highlight.stroke"];this.original_colors["chart.highlight.fill"]=a["chart.highlight.fill"];this.original_colors["chart.text.color"]=a["chart.text.color"];this.original_colors["chart.background.barcolor1"]=a["chart.background.barcolor1"];this.original_colors["chart.background.barcolor2"]=a["chart.background.barcolor2"];this.original_colors["chart.background.grid.color"]=a["chart.background.grid.color"];this.original_colors["chart.background.color"]=a["chart.background.color"];this.original_colors["chart.strokecolor"]=a["chart.strokecolor"];this.original_colors["chart.axis.color"]=a["chart.axis.color"]}var s=a["chart.colors"];if(s){for(var t=0;t<s.length;++t){s[t]=this.parseSingleColorForGradient(s[t])}}var s=a["chart.key.colors"];if(s){for(var t=0;t<s.length;++t){s[t]=this.parseSingleColorForGradient(s[t])}}a["chart.crosshairs.color"]=this.parseSingleColorForGradient(a["chart.crosshairs.color"]);a["chart.highlight.stroke"]=this.parseSingleColorForGradient(a["chart.highlight.stroke"]);a["chart.highlight.fill"]=this.parseSingleColorForGradient(a["chart.highlight.fill"]);a["chart.text.color"]=this.parseSingleColorForGradient(a["chart.text.color"]);a["chart.background.barcolor1"]=this.parseSingleColorForGradient(a["chart.background.barcolor1"]);a["chart.background.barcolor2"]=this.parseSingleColorForGradient(a["chart.background.barcolor2"]);a["chart.background.grid.color"]=this.parseSingleColorForGradient(a["chart.background.grid.color"]);a["chart.background.color"]=this.parseSingleColorForGradient(a["chart.background.color"]);a["chart.strokecolor"]=this.parseSingleColorForGradient(a["chart.strokecolor"]);a["chart.axis.color"]=this.parseSingleColorForGradient(a["chart.axis.color"])};this.reset=function(){};this.parseSingleColorForGradient=function(s){if(!s||typeof(s)!="string"){return s}if(s.match(/^gradient\((.*)\)$/i)){var v=RegExp.$1.split(":");var w=o.createLinearGradient(0,g.height-a["chart.gutter.bottom"],0,a["chart.gutter.top"]);var u=1/(v.length-1);w.addColorStop(0,h.trim(v[0]));for(var t=1,i=v.length;t<i;++t){w.addColorStop(t*u,RGraph.trim(v[t]))}}return w?w:s};this.drawBevel=this.DrawBevel=function(){var F=this.coords;var I=this.coords2;var t=this.properties;var E=this.context;var u=this.canvas;if(t["chart.grouping"]=="stacked"){for(var z=0;z<I.length;++z){if(I[z]&&I[z][0]&&I[z][0][0]){var G=I[z][0][0];var D=I[z][0][1];var H=I[z][0][2];var B=[];for(var v=0;v<I[z].length;++v){B.push(I[z][v][3])}var A=RGraph.array_sum(B);E.save();E.strokeStyle="black";E.beginPath();E.rect(G,D,H,A);E.clip();E.shadowColor="black";E.shadowOffsetX=0;E.shadowOffsetY=0;E.shadowBlur=20;E.beginPath();E.rect(G-3,D-3,H+6,A+100);E.lineWidth=5;E.stroke();E.restore()}}}else{for(var z=0;z<F.length;++z){if(F[z]){var G=F[z][0];var D=F[z][1];var H=F[z][2];var A=F[z][3];var C=t["chart.xaxispos"];var s=((u.height-this.gutterTop-this.gutterBottom)/2)+this.gutterTop;E.save();E.strokeStyle="black";E.beginPath();E.rect(G,D,H,A);E.clip();E.shadowColor="black";E.shadowOffsetX=0;E.shadowOffsetY=0;E.shadowBlur=20;if(C=="top"||(C=="center"&&(D+A)>s)){D=D-100;A=A+100}else{D=D;A=A+100}E.beginPath();E.rect(G-3,D-3,H+6,A+6);E.lineWidth=5;E.stroke();E.restore()}}}};this.interactiveKeyHighlight=function(i){this.coords2.forEach(function(A,u,t){if(typeof A[i]=="object"&&A[i]){var s=A[i][0];var B=A[i][1];var v=A[i][2];var z=A[i][3];o.fillStyle=a["chart.key.interactive.highlight.chart.fill"];o.strokeStyle=a["chart.key.interactive.highlight.chart.stroke"];o.lineWidth=2;o.strokeRect(s,B,v,z);o.fillRect(s,B,v,z)}})};this.on=function(i,s){if(i.substr(0,2)!=="on"){i="on"+i}this[i]=s;return this};this.drawAboveLabels=function(){var L=a["chart.labels.above"];var J=a["chart.labels.above.specific"];var E=a["chart.labels.above.color"];var O=a["chart.labels.above.decimals"];var A=a["chart.labels.above.size"];var K=-1*a["chart.labels.above.angle"];var G=this.coords;var B=this.coords2;var N=this.data;var C=h.arrayLinearize(this.data);var t=a["chart.labels.above.offset"];var v=a["chart.text.font"];var w=a["chart.text.size"];var M=a["chart.grouping"];h.noShadow(this);o.fillStyle=typeof E==="string"?E:a["chart.text.color"];if(L&&M==="grouped"){for(var H=0,I=N.length,D=0;H<I;H+=1){if(typeof N[H]==="number"&&N[H]>=0){var K=K;var z=(K?"left":"center");var s=K!==0?"center":"bottom";h.text2(this,{font:v,size:typeof A==="number"?A:w-3,x:B[H][0][0]+(B[H][0][2]/2),y:B[H][0][1]-t,text:J?(J[D]||""):h.numberFormat(this,Number(typeof N[H]==="object"?N[H][0]:N[H]).toFixed(O)),halign:z,valign:s,angle:K,marker:false,bounding:false,tag:"labels.above"});D++}else{if(typeof N[H]==="number"&&N[H]<0){var K=K;var z=K?"right":"center";var s=K!==0?"center":"top";h.text2(this,{font:v,size:typeof A==="number"?A:w-3,x:B[H][0][0]+(B[H][0][2]/2),y:B[H][0][1]+B[H][0][3]+t,text:J?(J[D]||""):h.numberFormat(this,Number(typeof N[H]==="object"?N[H][0]:N[H]).toFixed(O)),halign:z,valign:s,angle:K,bounding:false,marker:false,tag:"labels.above"});D++}else{if(typeof N[H]==="object"){for(var F=0,u=N[H].length;F<u;F+=1){var K=K;var z=N[H][F]<0?"right":"left";z=K===0?"center":z;var s=N[H][F]<0?"top":"bottom";s=K!=0?"center":s;h.text2(this,{font:v,size:typeof A==="number"?A:w-3,x:B[H][F][0]+(B[H][F][2]/2),y:B[H][F][1]+(N[H][F]<0?B[H][F][3]+t:-t),text:J?(J[D]||""):h.numberFormat(this,Number(N[H][F]).toFixed(O)),halign:z,valign:s,angle:K,bounding:false,marker:false,tag:"labels.above"});D++}}}}}}else{if(L&&M==="stacked"){for(var H=0,I=N.length,D=0;H<I;H+=1){if(typeof N[H]==="object"){var K=K;var z=K!=0?"left":"center";var s=K!=0?"center":"bottom";h.text2(this,{font:v,size:typeof A==="number"?A:w-3,x:B[H][0][0]+(B[H][0][2]/2),y:B[H][0][1]+(N[H][0]<0?B[H][0][3]:0)-t,text:J?(J[D]||""):h.numberFormat(this,Number(h.arraySum(N[H])).toFixed(O)),halign:z,valign:s,angle:K,bounding:false,marker:false,tag:"labels.above"});D+=N[H].length}else{var K=K;var z=K!=0?"left":"center";var s=K!=0?"center":"bottom";h.text2(this,{font:v,size:typeof A==="number"?A:w-3,x:B[H][0][0]+(B[H][0][2]/2),y:B[H][0][1]+(N[H][0]<0?B[H][0][3]:0)-t,text:J?(J[D]||""):h.numberFormat(this,Number(N[H]).toFixed(O)),halign:z,valign:s,angle:K,bounding:false,marker:false,tag:"labels.above"});D++}}}}};this.firstDrawFunc=function(){};this.waveOld=function(){var w=this;var s=arguments[0]?arguments[0]:{};s.frames=s.frames?s.frames:15;s.delay=s.delay||50;var C=arguments[1]?arguments[1]:function(){};var v=[];var t=[];var u=w.data.length;w.draw();w.Set("chart.ymax",w.scale2.max);h.clear(w.canvas);for(var z=0,B=u;z<B;++z){(function(i){v[i]=w.data[i];w.data[i]=typeof w.data[i]==="object"?[]:0;t[i]=typeof w.data[i]==="object"?[]:0;setTimeout(function(){A(i,s.frames)},s.delay*i)})(z)}return this;function A(D,F){if(t[D]<=F){if(typeof w.data[D]==="number"){w.data[D]=(t[D]/F)*v[D]}else{if(typeof w.data[D]==="object"){for(var E=0,i=v[D].length;E<i;++E){w.data[D][E]=(t[D]/F)*v[D][E]}}}h.clear(w.canvas);h.redrawCanvas(w.canvas);++t[D];h.Effects.updateCanvas(function(){A(D,F)})}else{if(D===(u-1)){C(w)}}}};this.wave=function(){var z=this;var s=arguments[0]||{};s.frames=s.frames||60;s.startFrames=[];s.counters=[];var v=s.frames/3;var t=-1;var D=arguments[1]||function(){};var u=h.arrayClone(z.data);for(var A=0,C=z.data.length;A<C;A+=1){s.startFrames[A]=((s.frames/2)/(z.data.length-1))*A;if(typeof z.data[A]==="object"&&z.data[A]){s.counters[A]=[];for(var w=0;w<z.data[A].length;w++){s.counters[A][w]=0}}else{s.counters[A]=0}}z.draw();z.Set("ymax",z.scale2.max);h.clear(z.canvas);function B(){++t;for(var H=0,E=z.data.length;H<E;H+=1){if(t>s.startFrames[H]){if(typeof z.data[H]==="number"){z.data[H]=r.min(r.abs(u[H]),r.abs(u[H]*((s.counters[H]++)/v)));if(u[H]<0){z.data[H]*=-1}}else{if(!h.isNull(z.data[H])){for(var G=0,F=z.data[H].length;G<F;G+=1){z.data[H][G]=r.min(r.abs(u[H][G]),r.abs(u[H][G]*((s.counters[H][G]++)/v)));if(u[H][G]<0){z.data[H][G]*=-1}}}}}else{z.data[H]=typeof z.data[H]==="object"&&z.data[H]?h.arrayPad([],z.data[H].length,0):(h.isNull(z.data[H])?null:0)}}if(t>=s.frames){D(z)}else{h.redrawCanvas(z.canvas);h.Effects.updateCanvas(B)}}B();return this};this.grow=function(){var s=arguments[0]||{};var B=s.frames||30;var t=0;var C=arguments[1]||function(){};var w=this;w.original_data=RGraph.array_clone(w.data);if(w.Get("chart.ymax")==null){var u=0;for(var z=0;z<w.data.length;++z){if(h.is_array(w.data[z])&&w.Get("chart.grouping")=="stacked"){u=r.max(u,r.abs(h.array_sum(w.data[z])))}else{if(h.is_array(w.data[z])&&w.Get("chart.grouping")=="grouped"){u=r.max(u,r.abs(h.array_max(w.data[z])))}else{u=r.max(u,r.abs(w.data[z]))}}}var v=RGraph.getScale2(w,{max:u});w.Set("chart.ymax",v.max)}var A=function(){var G=h.Effects.getEasingMultiplier(B,t);for(var F=0,i=w.original_data.length;F<i;++F){if(typeof w.data[F]==="object"){for(var E=0,D=w.data[F].length;E<D;++E){w.data[F][E]=G*w.original_data[F][E]}}else{w.data[F]=G*w.original_data[F]}}RGraph.redrawCanvas(w.canvas);if(t<B){t+=1;h.Effects.updateCanvas(A)}else{C(w)}};A();return this};h.register(this);if(f){h.parseObjectStyleConfig(this,n.options)}};RGraph.CombinedChart=function(){this.objects=[];var c=arguments;if(RGraph.is_array(arguments[0])){c=arguments[0]}for(var b=0;b<c.length;++b){this.objects[b]=c[b];this.objects[b].Set("chart.gutter.left",this.objects[0].Get("chart.gutter.left"));this.objects[b].Set("chart.gutter.right",this.objects[0].Get("chart.gutter.right"));this.objects[b].Set("chart.gutter.top",this.objects[0].Get("chart.gutter.top"));this.objects[b].Set("chart.gutter.bottom",this.objects[0].Get("chart.gutter.bottom"));if(this.objects[b].type=="line"){this.objects[b].Set("chart.hmargin",((this.objects[0].canvas.width-this.objects[0].Get("chart.gutter.right")-this.objects[0].Get("chart.gutter.left"))/this.objects[0].data.length)/2);this.objects[b].Set("chart.noaxes",true);this.objects[b].Set("chart.background.grid",false);this.objects[b].Set("chart.ylabels",false)}if(this.objects[b].Get("chart.resizable")){var d=this.objects[b]}}if(d){function a(f){var g=f.Get("chart.gutter.left");var e=f.Get("chart.gutter.right");f.Set("chart.hmargin",(f.canvas.width-g-e)/(f.original_data[0].length*2))}RGraph.AddCustomEventListener(d,"onresizebeforedraw",a)}};RGraph.CombinedChart.prototype.add=RGraph.CombinedChart.prototype.Add=function(a){this.objects.push(a)};RGraph.CombinedChart.prototype.draw=RGraph.CombinedChart.prototype.Draw=function(){for(var a=0;a<this.objects.length;++a){this.objects[a].Draw()}};