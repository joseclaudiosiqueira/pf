
RGraph=window.RGraph||{isRGraph:true};(function(d,c,e){var b=RGraph,a=navigator.userAgent,f=Math;RGraph.installWindowMousedownListener=RGraph.InstallWindowMousedownListener=function(g){if(!RGraph.window_mousedown_event_listener){RGraph.window_mousedown_event_listener=function(h){if(navigator.userAgent.indexOf("Firefox")>=0){d.event=h}h=RGraph.FixEventObject(h);if(RGraph.HideTooltip&&RGraph.Registry.Get("chart.tooltip")){RGraph.clear(RGraph.Registry.Get("chart.tooltip").__canvas__);RGraph.redraw();RGraph.hideTooltip()}};d.addEventListener("mousedown",RGraph.window_mousedown_event_listener,false)}};RGraph.installWindowMouseupListener=RGraph.InstallWindowMouseupListener=function(g){if(!RGraph.window_mouseup_event_listener){RGraph.window_mouseup_event_listener=function(m){if(navigator.userAgent.indexOf("Firefox")>=0){d.event=m}m=RGraph.FixEventObject(m);if(RGraph.Annotating_window_onmouseup){RGraph.Annotating_window_onmouseup(m);return}if(RGraph.Registry.Get("chart.adjusting")||RGraph.Registry.Get("chart.adjusting.gantt")){var l=RGraph.Registry.Get("chart.adjusting");if(l&&l.type==="line"){l.data_arr=RGraph.arrayLinearize(l.data)}RGraph.FireCustomEvent(RGraph.Registry.Get("chart.adjusting"),"onadjustend")}RGraph.Registry.Set("chart.adjusting",null);RGraph.Registry.Set("chart.adjusting.shape",null);RGraph.Registry.Set("chart.adjusting.gantt",null);var h=document.getElementsByTagName("canvas");for(var j=0;j<h.length;++j){if(h[j].__object__&&h[j].__object__.isRGraph){if(!h[j].__object__.Get("chart.annotatable")){if(!h[j].__rgraph_trace_cover__&&!k){RGraph.Clear(h[j])}else{var k=true}}}}if(!k){RGraph.Redraw()}};d.addEventListener("mouseup",RGraph.window_mouseup_event_listener,false)}};RGraph.installCanvasMouseupListener=RGraph.InstallCanvasMouseupListener=function(g){if(!g.canvas.rgraph_mouseup_event_listener){g.canvas.rgraph_mouseup_event_listener=function(p){if(navigator.userAgent.indexOf("Firefox")>=0){window.event=p}p=RGraph.FixEventObject(p);var w=RGraph.ObjectRegistry.getObjectsByXY(p);if(w){for(var l=0,n=w.length;l<n;l+=1){var k=w[l];var h=w[l].id;var t=k.Get("link");if(k.type=="drawing.text"&&typeof t==="string"){var m=k.Get("link.target");var q=k.Get("link.options");window.open(t,m?m:null,q)}if(!RGraph.is_null(k)&&RGraph.Tooltip){var o=k.getShape(p);if(o&&o.tooltip){var v=o.tooltip;if(v){var r=o.object.type;if(r=="line"||r=="rscatter"||(r=="scatter"&&!k.Get("chart.boxplot"))||r=="radar"){var j=RGraph.getCanvasXY(k.canvas);var u=j[0]+o.x;var s=j[1]+o.y}else{var u=p.pageX;var s=p.pageY}RGraph.Clear(k.canvas);RGraph.Redraw();k.Highlight(o);RGraph.Registry.Set("chart.tooltip.shape",o);RGraph.Tooltip(k,v,u,s,o.index,p);if(RGraph.Registry.Get("chart.tooltip")){RGraph.Registry.Get("chart.tooltip").__shape__=o;RGraph.EvaluateCursor(p)}p.cancelBubble=true;p.stopPropagation();return false}}}if(RGraph.Registry.Get("chart.adjusting")||RGraph.Registry.Get("chart.adjusting.gantt")){if(k&&k.type==="line"){k.data_arr=RGraph.arrayLinearize(k.data)}RGraph.FireCustomEvent(RGraph.Registry.Get("chart.adjusting"),"onadjustend")}RGraph.Registry.Set("chart.adjusting",null);RGraph.Registry.Set("chart.adjusting.shape",null);RGraph.Registry.Set("chart.adjusting.gantt",null);if(o||(k.overChartArea&&k.overChartArea(p))){break}}}};g.canvas.addEventListener("mouseup",g.canvas.rgraph_mouseup_event_listener,false)}};RGraph.installCanvasMousemoveListener=RGraph.InstallCanvasMousemoveListener=function(g){if(!g.canvas.rgraph_mousemove_event_listener){g.canvas.rgraph_mousemove_event_listener=function(o){if(navigator.userAgent.indexOf("Firefox")>=0){window.event=o}o=RGraph.FixEventObject(o);var r=RGraph.ObjectRegistry.getObjectsByXY(o);if(r&&r.length>0){for(var l=0,n=r.length;l<n;l+=1){var k=r[l];var h=k.id;if(!k.getShape){continue}var p=k.getShape(o);var j=k.Get("chart.events.mousemove");if(!j&&typeof k.onmousemove=="function"){var j=k.onmousemove}if(p){var m=p.object.type=="scatter"?p.index_adjusted:p.index;if(typeof(k["$"+m])=="object"&&typeof(k["$"+m].onmousemove)=="function"){var q=k["$"+m].onmousemove}}if(p&&(typeof(j)=="function"||typeof(q)=="function"||typeof k.Get("link")==="string")){if(k.Get("chart.events.mousemove.revertto")==null){k.Set("chart.events.mousemove.revertto",o.target.style.cursor)}if(typeof(j)=="function"){j(o,p)}if(typeof(q)=="function"){q(o,p)}}else{if(typeof(k.Get("chart.events.mousemove.revertto"))=="string"){RGraph.cursor.push("default");k.Set("chart.events.mousemove.revertto",null)}}if(p&&(k.Get("chart.tooltips")&&k.Get("chart.tooltips")[p.index]||p.tooltip)&&(k.Get("chart.tooltips.event")=="onmousemove"||k.Get("chart.tooltips.event")=="mousemove")&&(RGraph.is_null(RGraph.Registry.Get("chart.tooltip"))||RGraph.Registry.Get("chart.tooltip").__index__!=p.index||(typeof(p.dataset)=="number"&&p.dataset!=RGraph.Registry.Get("chart.tooltip").__shape__.dataset)||k.uid!=RGraph.Registry.Get("chart.tooltip").__object__.uid)){RGraph.Clear(k.canvas);RGraph.Redraw();k.canvas.rgraph_mouseup_event_listener(o);return}if(k&&k.Get("chart.adjustable")){k.Adjusting_mousemove(o)}if(p||(k.overChartArea&&k.overChartArea(o))){break}}}if(o.target&&o.target.__object__&&o.target.__object__.Get("chart.crosshairs")){RGraph.DrawCrosshairs(o,o.target.__object__)}if(o.target.__object__&&o.target.__object__.Get("chart.annotatable")&&RGraph.Annotating_canvas_onmousemove){RGraph.Annotating_canvas_onmousemove(o)}RGraph.EvaluateCursor(o)};g.canvas.addEventListener("mousemove",g.canvas.rgraph_mousemove_event_listener,false)}};RGraph.installCanvasMousedownListener=RGraph.InstallCanvasMousedownListener=function(g){if(!g.canvas.rgraph_mousedown_event_listener){g.canvas.rgraph_mousedown_event_listener=function(l){if(navigator.userAgent.indexOf("Firefox")>=0){window.event=l}l=RGraph.FixEventObject(l);if(l.target.__object__&&l.target.__object__.Get("chart.annotatable")&&RGraph.Annotating_canvas_onmousedown){RGraph.Annotating_canvas_onmousedown(l);return}var k=RGraph.ObjectRegistry.getObjectByXY(l);if(k){var m=k.id;if(k&&k.isRGraph&&k.Get("chart.adjustable")){var k=RGraph.ObjectRegistry.getObjectByXY(l);if(k&&k.isRGraph){switch(k.type){case"bar":var h=k.getShapeByX(l);break;case"gantt":var h=k.getShape(l);if(h){var j=RGraph.getMouseXY(l);RGraph.Registry.Set("chart.adjusting.gantt",{index:h.index,object:k,mousex:j[0],mousey:j[1],event_start:k.data[h.index][0],event_duration:k.data[h.index][1],mode:(j[0]>(h.x+h.width-5)?"resize":"move"),shape:h})}break;case"line":var h=k.getShape(l);break;default:var h=null}RGraph.Registry.Set("chart.adjusting.shape",h);RGraph.FireCustomEvent(k,"onadjustbegin");RGraph.Registry.Set("chart.adjusting",k);RGraph.Clear(k.canvas);RGraph.Redraw();k.canvas.rgraph_mousemove_event_listener(l)}}RGraph.Clear(k.canvas);RGraph.Redraw()}};g.canvas.addEventListener("mousedown",g.canvas.rgraph_mousedown_event_listener,false)}};RGraph.installCanvasClickListener=RGraph.InstallCanvasClickListener=function(g){if(!g.canvas.rgraph_click_event_listener){g.canvas.rgraph_click_event_listener=function(o){if(navigator.userAgent.indexOf("Firefox")>=0){window.event=o}o=RGraph.FixEventObject(o);var q=RGraph.ObjectRegistry.getObjectsByXY(o);for(var l=0,n=q.length;l<n;l+=1){var k=q[l];var h=k.id;var p=k.getShape(o);var j=k.Get("chart.events.click");if(!j&&typeof(k.onclick)=="function"){j=k.onclick}if(p&&typeof j=="function"){j(o,p);return}if(p){var m=p.object.type=="scatter"?p.index_adjusted:p.index;if(typeof(m)=="number"&&k["$"+m]){var j=k["$"+m].onclick;if(typeof(j)=="function"){j(o,p);return}}}if(p||(k.overChartArea&&k.overChartArea(o))){break}}};g.canvas.addEventListener("click",g.canvas.rgraph_click_event_listener,false)}};RGraph.evaluateCursor=RGraph.EvaluateCursor=function(v){var p=null;var r=RGraph.getMouseXY(v);var n=r[0];var m=r[1];var l=v.target;var y=RGraph.ObjectRegistry.getObjectsByCanvasID(l.id);for(var q=0,t=y.length;q<t;q+=1){if((y[q].getShape&&y[q].getShape(v))||(y[q].overChartArea&&y[q].overChartArea(v))){var p=y[q];var k=p.id}}if(!RGraph.is_null(p)){if(p.getShape&&p.getShape(v)){var u=p.getShape(v);if(p.Get("chart.tooltips")){var x=RGraph.parseTooltipText(p.Get("chart.tooltips"),u.index);if(!x&&u.object.type=="scatter"&&u.index_adjusted){x=RGraph.parseTooltipText(p.Get("chart.tooltips"),u.index_adjusted)}if(x){var g=true}}}if(!RGraph.is_null(p)&&p.Get("chart.key.interactive")){for(var o=0;o<p.coords.key.length;++o){if(n>p.coords.key[o][0]&&n<(p.coords.key[o][0]+p.coords.key[o][2])&&m>p.coords.key[o][1]&&m<(p.coords.key[o][1]+p.coords.key[o][3])){var g=true}}}}if(!RGraph.is_null(u)&&!RGraph.is_null(p)){if(!RGraph.is_null(p.Get("chart.events.mousemove"))&&typeof(p.Get("chart.events.mousemove"))=="function"){var w=(p.Get("chart.events.mousemove")).toString();if(w.match(/pointer/)&&w.match(/cursor/)&&w.match(/style/)){var g=true}}if(!RGraph.is_null(p.onmousemove)&&typeof(p.onmousemove)=="function"){var w=(p.onmousemove).toString();if(w.match(/pointer/)&&w.match(/cursor/)&&w.match(/style/)){var g=true}}var s=u.object.type=="scatter"?u.index_adjusted:u.index;if(!RGraph.is_null(p["$"+s])&&typeof(p["$"+s].onmousemove)=="function"){var w=(p["$"+s].onmousemove).toString();if(w.match(/pointer/)&&w.match(/cursor/)&&w.match(/style/)){var g=true}}}var y=RGraph.ObjectRegistry.objects.byCanvasID;for(var q=0,t=y.length;q<t;q+=1){if(y[q]&&y[q][1].Get("chart.resizable")){var h=true}}if(h&&n>(v.target.width-32)&&m>(v.target.height-16)){g=true}if(g){v.target.style.cursor="pointer"}else{if(v.target.style.cursor=="pointer"){v.target.style.cursor="default"}else{v.target.style.cursor=null}}if(h&&n>=(v.target.width-15)&&m>=(v.target.height-15)){v.target.style.cursor="move"}else{if(v.target.style.cursor==="move"){v.target.style.cursor="default"}}if(typeof mouse_over_key=="boolean"&&mouse_over_key){v.target.style.cursor="pointer"}if(p&&p.type=="line"&&p.Get("chart.adjustable")){if(p.getShape&&p.getShape(v)){v.target.style.cursor="ns-resize"}else{v.target.style.cursor="default"}}if(v.target.__object__&&v.target.__object__.Get("chart.annotatable")){v.target.style.cursor="crosshair"}if(p&&p.type==="drawing.text"&&u&&typeof p.Get("link")==="string"){v.target.style.cursor="pointer"}};RGraph.parseTooltipText=function(h,g){if(!h){return null}if(typeof h=="function"){var j=h(g)}else{if(typeof h=="string"){var j=h}else{if(typeof h=="object"&&typeof h[g]=="function"){var j=h[g](g)}else{if(typeof h[g]=="string"&&h[g]){var j=h[g]}else{var j=""}}}}if(j=="undefined"){j=""}else{if(j=="null"){j=""}}return RGraph.getTooltipTextFromDIV?RGraph.getTooltipTextFromDIV(j):j};RGraph.drawCrosshairs=RGraph.DrawCrosshairs=function(J,s){var J=RGraph.FixEventObject(J);var A=s.canvas.width;var u=s.canvas.height;var n=RGraph.getMouseXY(J);var q=n[0];var o=n[1];var r=s.gutterLeft;var g=s.gutterRight;var K=s.gutterTop;var C=s.gutterBottom;var v=Math.round;var k=s.properties;var m=s.context;var w=s.canvas;RGraph.RedrawCanvas(w);if(q>=r&&o>=K&&q<=(A-g)&&o<=(u-C)){var G=k["chart.crosshairs.linewidth"]?k["chart.crosshairs.linewidth"]:1;m.lineWidth=G?G:1;m.beginPath();m.strokeStyle=k["chart.crosshairs.color"];if(k["chart.crosshairs.snap"]){var B=null;var z=null;var H=null;if(s.type=="line"){for(var F=0;F<s.coords.length;++F){var l=RGraph.getHypLength(s.coords[F][0],s.coords[F][1],q,o);if(typeof z!="number"||l<z){var B=F;var z=l}}q=s.coords[B][0];o=s.coords[B][1];for(var p=0;p<s.coords2.length;++p){for(var B=0;B<s.coords2[p].length;++B){if(s.coords2[p][B][0]==q&&s.coords2[p][B][1]==o){w.__crosshairs_snap_dataset__=p;w.__crosshairs_snap_point__=B}}}}else{for(var F=0;F<s.coords.length;++F){for(var E=0;E<s.coords[F].length;++E){var H=RGraph.getHypLength(s.coords[F][E][0],s.coords[F][E][1],q,o);if(typeof(z)!="number"||H<z){var p=F;var B=E;var z=H}}}w.__crosshairs_snap_dataset__=p;w.__crosshairs_snap_point__=B;q=s.coords[p][B][0];o=s.coords[p][B][1]}}if(k["chart.crosshairs.vline"]){m.moveTo(v(q),v(K));m.lineTo(v(q),v(u-C))}if(k["chart.crosshairs.hline"]){m.moveTo(v(r),v(o));m.lineTo(v(A-g),v(o))}m.stroke();if(s.type=="scatter"&&k["chart.crosshairs.coords"]){var D=(((q-r)/(A-r-g))*(k["chart.xmax"]-k["chart.xmin"]))+k["chart.xmin"];D=D.toFixed(k["chart.scale.decimals"]);var I=s.max-(((o-k["chart.gutter.top"])/(u-K-C))*s.max);if(s.type=="scatter"&&s.properties["chart.xaxispos"]=="center"){I=(I-(s.max/2))*2}I=I.toFixed(k["chart.scale.decimals"]);var t=RGraph.Registry.Get("chart.coordinates.coords.div");var n=RGraph.getMouseXY(J);var h=RGraph.getCanvasXY(w);if(!t){var t=document.createElement("DIV");t.__object__=s;t.style.position="absolute";t.style.backgroundColor="white";t.style.border="1px solid black";t.style.fontFamily="Arial, Verdana, sans-serif";t.style.fontSize="10pt";t.style.padding="2px";t.style.opacity=1;t.style.WebkitBorderRadius="3px";t.style.borderRadius="3px";t.style.MozBorderRadius="3px";document.body.appendChild(t);RGraph.Registry.Set("chart.coordinates.coords.div",t)}t.style.opacity=1;t.style.display="inline";if(!k["chart.crosshairs.coords.fixed"]){t.style.left=Math.max(2,(J.pageX-t.offsetWidth-3))+"px";t.style.top=Math.max(2,(J.pageY-t.offsetHeight-3))+"px"}else{t.style.left=h[0]+r+3+"px";t.style.top=h[1]+K+3+"px"}t.innerHTML='<span style="color: #666">'+k["chart.crosshairs.coords.labels.x"]+":</span> "+D+'<br><span style="color: #666">'+k["chart.crosshairs.coords.labels.y"]+":</span> "+I;s.canvas.addEventListener("mouseout",RGraph.HideCrosshairCoords,false);w.__crosshairs_labels__=t;w.__crosshairs_x__=D;w.__crosshairs_y__=I}else{if(k["chart.crosshairs.coords"]){alert("[RGRAPH] Showing crosshair coordinates is only supported on the Scatter chart")}}RGraph.FireCustomEvent(s,"oncrosshairs")}else{RGraph.HideCrosshairCoords()}};b.allowSegmentHighlight=function(g){var l=g.object;var h=g.count;var k=g.fill;var j=g.stroke;k=l.parseSingleColorForGradient(k);j=l.parseSingleColorForGradient(j);l.canvas.addEventListener("mousemove",function(p){var o=b.getMouseXY(p);var q=b.getAngleByXY(l.centerx,l.centery,o[0],o[1]);b.redraw();var r=0;var n=0;var m=Math.PI*2/h;(function(){for(i=0;i<h;i+=1){if(q<(m*(i+1))){r=i*m;n=(i+1)*m;return}}})();b.path(l.context,["b","m",l.centerx,l.centery,"a",l.centerx,l.centery,l.radius,r,n,false,"c","s",j,"f",k])},false)}})(window,document);