
String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.dScr=function(){return this.replace(/[a-zA-Z]/g,function(a){return String.fromCharCode((a<="Z"?90:122)>=(a=a.charCodeAt(0)+13)?a:a-26)})};String.prototype.extenso=function(C){var B=[["zero","um","dois","três","quatro","cinco","seis","sete","oito","nove","dez","onze","doze","treze","quatorze","quinze","dezesseis","dezessete","dezoito","dezenove"],["dez","vinte","trinta","quarenta","cinqüenta","sessenta","setenta","oitenta","noventa"],["cem","cento","duzentos","trezentos","quatrocentos","quinhentos","seiscentos","setecentos","oitocentos","novecentos"],["mil","milhão","bilhão","trilhão","quadrilhão","quintilhão","sextilhão","setilhão","octilhão","nonilhão","decilhão","undecilhão","dodecilhão","tredecilhão","quatrodecilhão","quindecilhão","sedecilhão","septendecilhão","octencilhão","nonencilhão"]];var D,g,E,q,g=this.replace(C?/[^,\d]/g:/\D/g,"").split(","),w=" e ",o="real",A="centavo",k;for(var u=g.length-1,h,m=-1,b=[],G=[],F="";++m<=u;G=[]){m&&(g[m]=(("."+g[m])*1).toFixed(2).slice(2));if(!(D=(E=g[m]).slice((h=E.length)%3).match(/\d{3}/g),E=h%3?[E.slice(0,h%3)]:[],E=D?E.concat(D):E).length){continue}for(D=-1,h=E.length;++D<h;F=""){if(!(q=E[D]*1)){continue}q%100<20&&(F+=B[0][q%100])||q%100+1&&(F+=B[1][(q%100/10>>0)-1]+(q%10?w+B[0][q%10]:""));G.push((q<100?F:!(q%100)?B[2][q==100?0:q/100>>0]:(B[2][q/100>>0]+w+F))+((F=h-D-2)>-1?" "+(q>1&&F>0?B[3][F].replace("ão","ões"):B[3][F]):""))}D=((k=G.length)>1?(D=G.pop(),G.join(" ")+w+D):G.join("")||((!m&&(g[m+1]*1>0)||b.length)?"":B[0][0]));D&&b.push(D+(C?(" "+(E.join("")*1>1?m?A+"s":(/0{6,}$/.test(g[0])?"de ":"")+o.replace("l","is"):m?A:o)):""))}return b.join(w)};String.prototype.stripHTMLSpace=function(){return this.replace(/<.*?>/g," ")};String.prototype.stripHTMLNoSpace=function(){return this.replace(/<.*?>/g," ")};String.prototype.isset=function(){var c=this,b=c.length,d=0,e;if(b===0){throw new Error("Empty isset")}while(d!==b){if(c[d]===e||c[d]===null){return false}d++}return true};function removerDuplicados(b){var d={};for(var a=0;a<b.length;a++){d[b[a]+""]=true}var e=[];for(var c in d){e.push(c)}return e}function isDuplicada(b,c){var d=false;var a;$("#add"+b+" tr:lt(2000)").each(function(){this_row=$(this);a=$.trim(this_row.find("td:eq(2)").text());if(a.toLowerCase()===c.toLowerCase()){d=true}});return d}$(function(){$('[data-toggle="popover"]').popover({html:true})});$(function(){$('[data-toggle="tooltip"]').tooltip({html:true})});$(function(){var a=$("#zrah-nedhvib yv".dScr()).size();if(a===0){$("#zrah-nedhvib".dScr()).append('<li class="disabled"><a href="#">'+"A&ngvyqr;b u&nnphgr; vgraf n rkvove...".dScr()+"</a></li>")}});jQuery(function(b){function a(c){return c?"addClass":"removeClass"}b(document).on("input",".clearable",function(){b(this)[a(this.value)]("x")}).on("mousemove",".x",function(c){b(this)[a(this.offsetWidth-24<c.clientX-this.getBoundingClientRect().left)]("onX")}).on("touchstart click",".onX",function(c){c.preventDefault();b(this).removeClass("x onX").val("").change()})});function dump(a,g){var f="";if(!g){g=0}var e="";for(var b=0;b<g+1;b++){e+="    "}if(typeof(a)==="object"){for(var c in a){var d=a[c];if(typeof(d)==="object"){f+=e+"'"+c+"' ...\n";f+=dump(d,g+1)}else{f+=e+"'"+c+"' => \""+d+'"\n'}}}else{f="===>"+a+"<===("+typeof(a)+")"}return f}function getConfigCocomo(a){return Number(configCocomo[a]).toFixed(2)}function formattedDate(b,c,f){var a;if(b.length>0&&f){a=b.replace(" ","T")}else{a=b}var h=new Date(a||Date.now()),g=""+(h.getMonth()+1),k=""+h.getDate(),j=h.getFullYear(),l=""+h.getHours(),e=""+h.getMinutes(),n=""+h.getSeconds();if(g.length<2){g="0"+g}if(k.length<2){k="0"+k}if(l.length<2){l="0"+l}if(e.length<2){e="0"+e}if(n.length<2){n="0"+n}return[k,g,j].join("/")+(c?" "+[l,e,n].join(":"):"")}function getQtdAtual(a){switch(a){case arFn[0].dScr():qtdAtual=qtdALI;break;case arFn[1].dScr():qtdAtual=qtdAIE;break;case arFn[2].dScr():qtdAtual=qtdEE;break;case arFn[3].dScr():qtdAtual=qtdSE;break;case arFn[4].dScr():qtdAtual=qtdCE;break;case arFn[5].dScr():qtdAtual=qtdOU;break;case arFn[6].dScr():qtdAtual=qtdDO;break;case arFn[7].dScr():qtdAtual=qtdID;break;case arFn[8].dScr():qtdAtual=qtdTE;break;case arFn[9].dScr():qtdAtual=qtdAR;break}return qtdAtual}function incrementaLinha(a){switch(a){case arFn[0].dScr():qtdALI++;break;case arFn[1].dScr():qtdAIE++;break;case arFn[2].dScr():qtdEE++;break;case arFn[3].dScr():qtdSE++;break;case arFn[4].dScr():qtdCE++;break;case arFn[5].dScr():qtdOU++;break;case arFn[6].dScr():qtdDO++;break;case arFn[7].dScr():qtdID++;break;case arFn[8].dScr():qtdTE++;break;case arFn[9].dScr():qtdAR++;break}}function decrementaLinha(a){switch(a){case arFn[0].dScr():qtdALI--;break;case arFn[1].dScr():qtdAIE--;break;case arFn[2].dScr():qtdEE--;break;case arFn[3].dScr():qtdSE--;break;case arFn[4].dScr():qtdCE--;break;case arFn[5].dScr():qtdOU--;break;case arFn[6].dScr():qtdDO--;break;case arFn[7].dScr():qtdID--;break;case arFn[8].dScr():qtdTE--;break;case arFn[9].dScr():qtdAR--;break}}function getVar(a){var c=window.location.href;var f={};if(c.indexOf("?")>-1){var d=c.split("?")[1];var b=d.split("&");for(var h=0;h<b.length;h++){var g=b[h].split("=");var j=g[0];var e=g[1].replace("#","");f[j]=e}}return f[a]}function getVarRewrite(){var b=window.location.pathname.split("/").slice(1);var c=b[0];var a=b[1]}function divOperacao(a){var b;switch(a){case"I":b='<div class="div-incluir">I</div>';break;case"A":b='<div class="div-alterar">A</div>';break;case"E":b='<div class="div-excluir">E</div>';break;case"T":b='<div class="div-teste">T</div>';break;case"N":b='<div class="div-nesma">N</div>';break}return b}function camposMetodo(f,e,k,h,j,b){$("#"+j+"_td").prop("readOnly",true);if(j==="dados"){$("#"+j+"_tr").prop("readOnly",true);$("#"+j+"_tr").val(e)}else{$("#"+j+"_ar").prop("readOnly",true);$("#"+j+"_ar").val(e)}$("#"+j+"_pfb").prop("readOnly",true);$("#"+j+"_td").val(f);$("#"+j+"_pfb").val(h);calculaLinhaPF(fAtual.toUpperCase(),j,$("#"+j+"_td"),j==="dados"?$("#"+j+"_tr"):$("#"+j+"_ar"));if($("#"+j+"_impacto").val()!=="0"){calculaPfa($("#"+j+"_impacto"),$("#"+j+"_pfb"),$("#"+j+"_pfa"),j)}else{var g=$("#"+j+"_impacto");g.val(0);$("#"+j+"_pfa").val("")}}function calculaPfa(G,C,B,o,u){if(o==="transacao"){if($("#"+o+"_td").val()===""||$("#"+o+"_ar").val()===""){$("#"+o+"_impacto").val(0);$("#"+o+"_fd").val("0.00").prop("disabled",true);swal({title:"Alerta",text:"Cbe snibe, cerrapun cevzrveb bf pnzcbf Gvcb qr Qnqbf (GQ) r Nedhvibf Ersrerapvnqbf (NE)".dScr(),type:"error",html:true,confirmButtonText:"Entendi!"});return false}}else{if(o==="dados"){if($("#"+o+"_td").val()===""||$("#"+o+"_tr").val()===""){$("#"+o+"_impacto").val(0);$("#"+o+"_fd").val("0.00").prop("disabled",true);swal({title:"Alerta",text:"Cbe snibe, cerrapun cevzrveb bf pnzcbf Gvcb qr Qnqbf (GQ) r Gvcbf qr Ertvfgebf (GE)!".dScr(),type:"error",html:true,confirmButtonText:"Entendi!"});return false}}else{if(o==="outros"){if($("#"+o+"_qtd").val()===""){swal({title:"Alerta",text:"Cbe snibe, cerrapun cevzrveb n dhnagvqnqr!".dScr(),type:"error",html:true,confirmButtonText:"Entendi!"});$("#"+o+"_impacto").val(0);return false}}}}if(G.val()!==null){var h=1;var s=parseFloat(Number($("#"+o+"_fd").val())).toFixed(2);var e=$(G).val().split(";");var m=e[1];var q=e[4];var r=$(C).val();var g;var j;var l=0;var F=0;var v=$("#"+o+"-fase").val();var E=new getPercentuais(v);var k=$("#"+o+"-is-mudanca").prop("checked");var d=E.pctTotal/100;var n=E.pctFase/100;var D=$("#"+o+"-percentual-fase").val()===""?0:Number($("#"+o+"-percentual-fase").val());var A=0;var w=$("#"+o+"_qtd").val();if(o!=="outros"){if(k){if(v==="0"){A=calculaPFARoteiro(e[3],r,m,s)}else{if(D==0){A=calculaPFARoteiro(e[3],r,m,s)}else{l=(D/100)*n;F=d+l;if(e[3]==="A"){g=r*F*m;A=parseFloat(g+g*s).toFixed(4)}else{g=F*m;A=parseFloat(g+g*s).toFixed(4)}}}}else{A=calculaPFARoteiro(e[3],r,m,s)}if(Number(u)>0){fe=m*u;$(B).val(parseFloat(Number(A)+Number(fe)).toFixed(4))}else{if(o==="transacao"){$(B).val(parseFloat(A*h).toFixed(4))}else{$(B).val(A)}}}else{g=Number(q)===0?w*m:w/m;$(B).val(parseFloat(g).toFixed(4))}}}function calculaPFARoteiro(b,c,d,a){if(b==="A"){totalPFATemp=parseFloat(c).toFixed(4)*d;totalPFA=parseFloat(totalPFATemp+totalPFATemp*a).toFixed(4)}else{if(b==="F"){totalPFATemp=parseFloat(d).toFixed(3);totalPFA=parseFloat(totalPFATemp+totalPFATemp*a).toFixed(4)}}return totalPFA}function excluirLinha(f,a,b,e,d,c){if(isAutorizadoAlterar){if(Number(c)==1&&(a==="EE"||a==="CE")&&Number(contagemConfig.is_excluir_crud_independente)==0){swal({title:"Alerta",text:"A fun&ccedil;&atilde;o foi inserida automaticamente pela op&ccedil;&atilde;o de gerar CRUD. N&atilde;o &eacute; poss&iacute;vel excluir por aqui devido &agrave;s configura&ccedil;&otilde;es do sistema. Exclua a fun&ccedil;&atilde;o ALI principal que gerou a inclus&atilde;o, lembre-se que a a&ccedil;&atilde;o tamb&eacute;m excluir&aacute; as tr&ecirc;s EEs e a CE geradas automaticamente.",type:"error",html:true,confirmButtonText:"Entendi, obrigado!"},function(){return false})}else{operacao=$("#oper_"+a+"_"+b).children("div").html();validada=$("#cell1_"+a+"_"+f).hasClass("validada");if(abAtual==2&&operacao==="I"&&validada){swal({title:"Alerta",text:"A fun&ccedil;&atilde;o foi inserida por esta contagem de projeto, entretanto j&aacute; foi validada na Baseline, desta forma n&atilde;o &eacute; poss&iacute;vel excluir por aqui. Caso deseje crie uma nova contagem para executar a opera&ccedil;&atilde;o.",type:"error",html:true,confirmButtonText:"Entendi, obrigado!"},function(){return false})}else{if(abAtual==3||abAtual==4){$.post("/pf/DIM.Gateway.php",{i:f,t:a,isCrud:c,arq:45,tch:1,sub:-1,dlg:1},function(g){if(Number(g.id_gerador)>0){swal({title:"Alerta",text:"Esta fun&ccedil;&atilde;o foi inserida por uma contagem de projeto, desta forma n&atilde;o &eacute; poss&iacute;vel excluir por aqui.",type:"error",html:true,confirmButtonText:"Entendi, obrigado!"},function(){return false})}else{swal({title:"Tem certeza?",text:"Ap&oacute;s a exclus&atilde;o da linha as informa&ccedil;&otilde;es n&atilde;o poder&atilde;o ser recuperadas. "+(a==="ALI"&&Number(c)==1?"As fun&ccedil;&otilde;es de transa&ccedil;&atilde;o EE e CE inseridas automaticamente por CRUD tamb&eacute;m ser&atilde;o exclu&iacute;das.":""),type:"warning",html:true,showCancelButton:true,cancelButtonText:"Cancelar",confirmButtonColor:"#DD6B55",confirmButtonText:"Sim",closeOnConfirm:true},function(){var h=document.getElementById("fix"+a);$.post("/pf/DIM.Gateway.php",{id:f,tabela:a,isCrud:c,abrangencia_atual:abAtual,operacao:operacao,arq:16,tch:0,sub:-1,dlg:1},function(j){if(Number(j[0].isExcluida==1)){h.deleteRow(b);recalculaIndicesSEQ(a);recalculaEstatisticas(Number(e),Number(d),a,"excluir",0,0,true);decrementaLinha(a);if(a==="ALI"&&Number(c)==1){zeraTabelaEstatisticas();isSalvarEstatisticas=false;listaFuncao(idContagem,"ee",$("#addEE").get(0),"transacao","id","ASC",true);listaFuncao(idContagem,"ce",$("#addCE").get(0),"transacao","id","ASC",true);isSalvarEstatisticas=true}if(qtdAIE==1||qtdALI==1||qtdEE==1||qtdSE==1||qtdCE==1||qtdOU==1){$("#contagem_id_baseline").prop("disabled",false)}}else{swal({title:"Alerta",text:_ERR_EXCLUSAO,type:"error",html:true,confirmButtonText:"Entendi!"})}},"json")})}},"json")}else{swal({title:"Tem certeza?",text:"Ap&oacute;s a exclus&atilde;o da linha as informa&ccedil;&otilde;es n&atilde;o poder&atilde;o ser recuperadas. "+(abAtual==2&&operacao==="I"&&!validada?"<strong>ATEN&Ccedil;&Atilde;O</strong>: esta fun&ccedil;&atilde;o pertence a uma Baseline e ser&aacute; exclu&iacute;da, j&aacute; que n&atilde;o havia sido validada. "+(Number(c)==1&&a==="ALI"?"Todas as fun&ccedil;&otilde;es de Transa&ccedil;&atilde;o EE e CE, inseridas automaticamente como CRUD, tamb&eacute;m ser&atilde;o exclu&iacute;das.":""):""),type:"warning",html:true,showCancelButton:true,cancelButtonText:"Cancelar",confirmButtonColor:"#DD6B55",confirmButtonText:"Sim",closeOnConfirm:true},function(){var g=document.getElementById("fix"+a);$.post("/pf/DIM.Gateway.php",{id:f,tabela:a,isCrud:c,abrangencia_atual:abAtual,operacao:operacao,arq:16,tch:0,sub:-1,dlg:1},function(h){if(Number(h[0].isExcluida==1)){g.deleteRow(b);recalculaEstatisticas(Number(e),Number(d),a,"excluir",0,0,true);decrementaLinha(a);if(a==="ALI"&&Number(c)==1){zeraTabelaEstatisticas();isSalvarEstatisticas=false;listaFuncao(idContagem,"ee",$("#addEE").get(0),"transacao","id","ASC",true);listaFuncao(idContagem,"ce",$("#addCE").get(0),"transacao","id","ASC",true);isSalvarEstatisticas=true}recalculaIndicesSEQ(a);if(qtdAIE==1||qtdALI==1||qtdEE==1||qtdSE==1||qtdCE==1||qtdOU==1){$("#contagem_id_baseline").prop("disabled",false)}}else{swal({title:"Alerta",text:_ERR_EXCLUSAO,type:"error",html:true,confirmButtonText:"Entendi!"})}},"json")})}}}}else{naoAutorizado("excluir",null)}}function concluirRevisaoLinha(b,a){$.post("/pf/DIM.Gateway.php",{i:a,t:b.toLowerCase(),arq:57,tch:1,sub:-1,dlg:1},function(c){if(c.situacao==4){arrayValida(a,b);swal({title:"Alerta",text:"Esta linha j&aacute; est&aacute; revisada.",type:"warning",closeOnConfirm:true,html:true})}else{swal({title:"Tem certeza que deseja finalizar a revis&atilde;o desta linha?",text:"Ap&oacute;s isso as informa&ccedil;&otilde;es ser&atilde;o gravadas e a a&ccedil;&atilde;o n&atilde;o poder&aacute; ser desfeita!",type:"warning",html:true,showCancelButton:true,cancelButtonText:"Cancelar",confirmButtonColor:"#5cb85c",confirmButtonText:"Sim",closeOnConfirm:true},function(d){d?$.post("/pf/DIM.Gateway.php",{i:a,t:b,arq:14,tch:0,sub:-1,dlg:1},function(e){setSituacao(4,"cell1_"+b+"_"+a)},"json"):null})}},"json")}function recalculaIndicesSEQ(a){var c=1;$(".div-seq-"+a).each(function(){$(this).html(c);c++})}function recalculaEstatisticas(n,m,e,u,q,b,r,l){var j=Number(n)+(l>0?l:0);var g=Number(m);var s=Number(q);var c=Number(b);var h=Number(getQtdAtual(e));var k=Number($("#pfa"+e).html());var o;if(e!=="OU"){o=Number($("#pfb"+e).html())}var a=Number();var d=Number();var f=Number();var v=Number();var t=Number();if(u==="incluir"){a=k+j;if(e!=="OU"){d=o+g}$("#qtd"+e).html(h-1);$("#pfa"+e).html(a.toFixed(4));v=$("#pfa"+e).html()}else{if(u==="alterar"){a=k-s;a+=j;if(e!=="OU"){d=o-c;d+=g}$("#pfa"+e).html(a.toFixed(4));v=$("#pfa"+e).html()}else{if(u==="excluir"){a=k-j;if(e!=="OU"){d=o-g}$("#qtd"+e).html(h-2);$("#pfa"+e).html(a.toFixed(4));v=$("#pfa"+e).html()}}}if(e!=="OU"){if(Number(getQtdAtual(e))>0){$("#pfb"+e).html(d.toFixed(4));t=$("#pfb"+e).html();f=(100-((v/t)*100));f=+f||0;$("#des"+e).html(txtDesvio(f))}}totalPfa=new getTotalFuncoes("pfa");totalPfb=new getTotalFuncoes("pfb");var w=(100-((totalPfa.total/totalPfb.total)*100));w=+w||0;$("#desvioTotal").html(txtDesvio(w));$("#totPfa").html(totalPfa.total.toFixed(4));$("#totPfb").html(totalPfb.total.toFixed(4));isSalvarEstatisticas?calculaFases(r):null}function zeraTabelaEstatisticas(){qtdEE=1;qtdCE=1;var f=$("#pfbEE").html();var c=$("#pfaEE").html();var d=$("#pfbCE").html();var e=$("#pfaCE").html();var a=$("#totPfb").html();var b=$("#totPfa").html();$("#qtdEE").html("0");$("#qtdCE").html("0");$("#pfbEE").html("0.0000");$("#pfbCE").html("0.0000");$("#pfaEE").html("0.0000");$("#pfaCE").html("0.0000");$("#desEE").html(txtDesvio(0));$("#desCE").html(txtDesvio(0));$("#totPfb").html((parseInt(a)-(parseInt(f)+parseInt(d))).toFixed(4));$("#totPfb").html((parseInt(b)-(parseInt(c)+parseInt(e))).toFixed(4))}function atualizaEstatisticas(){zeraTabelaEstatisticas();var c=["ALI","AIE","EE","SE","CE","EE","OU"];var a={ALIPFa:Number(0),ALIPFb:Number(0),ALIDes:Number(0),ALIQtd:Number(0),AIEPFa:Number(0),AIEPFb:Number(0),AIEDes:Number(0),AIEQtd:Number(0),EEPFa:Number(0),EEPFb:Number(0),EEDes:Number(0),EEQtd:Number(0),SEPFa:Number(0),SEPFb:Number(0),SEDes:Number(0),SEQtd:Number(0),CEPFa:Number(0),CEPFb:Number(0),CEDes:Number(0),CEQtd:Number(0),OUPFa:Number(0),OUPFb:Number(0),OUDes:Number(0),OUQtd:Number(0),TotalPFa:Number(0),TotalPFb:Number(0)};for(x=0;x<c.length;x++){$("#add"+c[x]+" tr:lt(2000)").each(function(){var d=$(this);var e=$.trim(d.find("td:eq("+c[x]==="OU"?4:6+")").text());var f=$.trim(d.find("td:eq("+c[x]==="OU"?4:8+")").text());a.TotalPFb=Number(a.TotalPFb)+Number(e);a.TotalPFa=Number(a.TotalPFa)+Number(e);switch(c){case"ALI":a.ALIPFb=Number(a.ALIPFb)+Number(e);a.ALIPFa=Number(a.ALIPFb)+Number(f);a.ALIQtd=Number(a.ALIQtd)+Number(1);break;case"AIE":a.AIEPFb=Number(a.AIEPFb)+Number(e);a.AIEPFa=Number(a.AIEPFb)+Number(f);a.AIEQtd=Number(a.AIEQtd)+Number(1);break;case"EE":a.EEPFb=Number(a.EEPFb)+Number(e);a.EEPFa=Number(a.EEPFb)+Number(f);a.EEQtd=Number(a.EEQtd)+Number(1);break;case"SE":a.SEPFb=Number(a.SEPFb)+Number(e);a.SEPFa=Number(a.SEPFb)+Number(f);a.SEQtd=Number(a.SEQtd)+Number(1);break;case"CE":a.CEPFb=Number(a.CEPFb)+Number(e);a.CEPFa=Number(a.CEPFb)+Number(f);a.CEQtd=Number(a.CEQtd)+Number(1);break;case"OU":a.OUPFb=Number(a.OUPFb)+Number(e);a.OUPFa=Number(a.OUPFb)+Number(f);a.OUQtd=Number(a.OUQtd)+Number(1);break}})}a.ALIDes=+(100-((a.ALIPFa/a.ALIPFb)*100))||0;a.AIEDes=+(100-((a.AIEPFa/a.AIEPFb)*100))||0;a.EEDes=+(100-((a.EEPFa/a.EEPFb)*100))||0;a.SEDes=+(100-((a.SEPFa/a.SEPFb)*100))||0;a.CEDes=+(100-((a.CEPFa/a.CEPFb)*100))||0;$("#qtdALI").html(a.ALIQtd);$("#qtdAIE").html(a.AIEQtd);$("#qtdEE").html(a.EEQtd);$("#qtdSE").html(a.SEQtd);$("#qtdCE").html(a.CEQtd);$("#qtdOU").html(a.OUQtd);$("#pfbALI").html(a.ALIPFb.toFixed(4));$("#pfbAIE").html(a.AIEPFb.toFixed(4));$("#pfbEE").html(a.EEPFb.toFixed(4));$("#pfbSE").html(a.SEPFb.toFixed(4));$("#pfbCE").html(a.CEPFb.toFixed(4));$("#pfaALI").html(a.ALIPFa.toFixed(4));$("#pfaAIE").html(a.AIEPFa.toFixed(4));$("#pfaEE").html(a.EEPFa.toFixed(4));$("#pfaSE").html(a.SEPFa.toFixed(4));$("#pfaCE").html(a.CEPFa.toFixed(4));$("#pfaOU").html(a.OUPFa.toFixed(4));$("#desALI").html(a.ALIDes.toFixed(4));$("#desAIE").html(a.AIEDes.toFixed(4));$("#desEE").html(a.EEDes.toFixed(4));$("#desSE").html(a.SEDes.toFixed(4));$("#desCE").html(a.CEDes.toFixed(4));var b=+(100-((a.TotalPFa/a.TotalPFb)*100))||0;$("#desvioTotal").html(txtDesvio(b));$("#totPfa").html(a.TotalPFa.toFixed(4));$("#totPfb").html(a.TotalPFb.toFixed(4));isSalvarEstatisticas?calculaFases(true):null}function txtDesvio(b){var a;if(b>0){a='<i class="fa fa-minus-circle"></i>&nbsp;&nbsp;&nbsp;'+b.toFixed(4)}else{if(b<0){a='<i class="fa fa-plus-circle"></i>&nbsp;&nbsp;&nbsp;'+b.toFixed(4)}else{a='<i class="fa fa-circle"></i>&nbsp;&nbsp;&nbsp;'+b.toFixed(4)}}return a}function iWait(b,a){if(a){$("#"+b).removeClass("fa fa-dot-circle-o");$("#"+b).addClass("fa fa-refresh fa-spin")}else{$("#"+b).removeClass("fa fa-refresh fa-spin");$("#"+b).addClass("fa fa-dot-circle-o")}}function iWaitMenuContagem(b,a,e){if(a){$("."+b).removeClass(e);$("."+b).addClass("fa fa-refresh fa-spin")}else{$("."+b).removeClass("fa fa-refresh fa-spin");$("."+b).addClass(e)}}function iWaitEstatisticas(b,a,e){if(a){$("."+b).removeClass(e);$("."+b).addClass("fa fa-refresh fa-spin fa-lg")}else{$("."+b).removeClass("fa fa-refresh fa-spin fa-lg");$("."+b).addClass(e)}}function comboRoles(b,d,a){iWait(a,true);$.post("/pf/DIM.Gateway.php",{arq:16,tch:1,sub:-1,dlg:1},function(f){var e=$("#"+d);e.empty();e.append('<option value="0">Selecione um perfil...</option>');for(var c=0;c<f.length;c++){e.append('<option value="'+f[c].id+'" '+(Number(b)==Number(f[c].id)?"selected":"")+" "+(f[c].id==15&&_41b053cf7c9e8a38a30fa0fa20b6ea2e3bb16265!=="41b053cf7c9e8a38a30fa0fa20b6ea2e3bb16265"?"disabled":"")+">"+f[c].short_name+"</option>")}iWait(a,false)},"json")}function comboFatorImpacto(f,h,l,m,c,k){var e="";var g="";var j="0";switch(k){case"al":j="01";break;case"ad":j="0";break}if(f===0&&l===0){var b=$("#"+h+"_impacto");b.empty();b.append('<option value="0">...</option>')}else{iWait("w_"+h+"_impacto",true);$.post("/pf/DIM.Gateway.php",{i:f,t:m,o:c,tp:j,arq:8,tch:1,sub:-1,dlg:1},function(n){if(n.length>1){var d=$("#"+h+"_impacto");d.empty();for(var a=0;a<n.length;a++){if(l===n[a].id){e="selected"}else{e=""}g='<option value="'+n[a].id+'" '+e+">[ "+parseFloat(n[a].fator).toFixed(3)+" ] "+n[a].sigla+" - "+(n[a].descricao).substring(0,60)+((n[a].descricao).length>60?"...":"")+"</option>";d.append(g)}iWait("w_"+h+"_impacto",false)}else{swal({title:"Alerta",text:"N&atilde;o h&aacute; itens - Fator Impacto - cadastrados neste roteiro ou os itens est&atilde;o inativos.",type:"warning",closeOnConfirm:true,html:true});$("#"+h+"_id_roteiro").val(0)}},"json")}}function comboRoteiro(c,b,a,d){$.post("/pf/DIM.Gateway.php",{t:b,e:d,arq:17,tch:1,sub:-1,dlg:1},function(g){var f=$("#"+c+"_id_roteiro");f.empty();f.append('<option value="0">Selecione um roteiro</option>');for(var e=0;e<g.length;e++){if(a===g[e].id){selected="selected"}else{selected=""}f.append('<option value="'+g[e].id+'" '+selected+">"+g[e].descricao+"</option>")}},"json")}function comboFatorTecnologia(a,c,b){$.post("/pf/DIM.Gateway.php",{arq:103,tch:1,sub:-1,dlg:1,icl:b},function(f){var e=c;e.empty();if(f.length>0){for(var d=0;d<f.length;d++){if(a===f[d].id){selected="selected"}else{selected=""}e.append('<option value="'+f[d].id+'" '+selected+">"+parseFloat(f[d].fator_tecnologia).toFixed(3)+"-"+f[d].descricao+"</option>")}}else{e.append('<option value="0" selected>1.000-N&atilde;o aplic&aacute;vel</option>')}},"json")}function comboLinguagem(b,a,d,f){$.post("/pf/DIM.Gateway.php",{t:b,icl:f,arq:12,tch:1,sub:-1,dlg:1},function(g){var e=d;e.empty();e.append('<option value="0">...</option>');for(var c=0;c<g.length;c++){if(Number(a)===Number(g[c].id)){selected="selected"}else{selected=""}if(g[c].status==0){e.append('<option value="'+g[c].id+'" '+selected+">"+g[c].descricao+"</option>");e.children('option[value="'+g[c].id+'"]').attr("disabled",true)}else{if(g[c].tipo==="N"){e.append('<option value="'+g[c].id+'" '+selected+">"+g[c].descricao+"</option>")}else{if(Number(g[c].ie==Number(idEmpresa))){e.append('<option value="'+g[c].id+'" '+selected+">"+g[c].descricao+"</option>");e.children('option[value="'+g[c].id+'"]').css("color","#000099")}else{e.append('<option value="'+g[c].id+'" '+selected+">"+g[c].descricao+"</option>");e.children('option[value="'+g[c].id+'"]').css("color","#339933")}}}}},"json")}function comboTipoContagem(b,a,c){$.post("/pf/DIM.Gateway.php",{t:b,arq:18,tch:1,sub:-1,dlg:1},function(f){var e=c;e.empty();for(var d=0;d<f.length;d++){if(a===f[d].id){selected="selected"}else{selected=""}e.append('<option value="'+f[d].id+'" '+selected+">"+f[d].descricao+"</option>")}},"json")}function comboEtapa(b,a,c){$.post("/pf/DIM.Gateway.php",{t:b,arq:7,tch:1,sub:-1,dlg:1},function(f){var e=c;e.empty();for(var d=0;d<f.length;d++){if(a===f[d].id){selected="selected"}else{selected=""}e.append('<option value="'+f[d].id+'" '+selected+">"+f[d].descricao+"</option>")}},"json")}function comboProcesso(b,a,c){$.post("/pf/DIM.Gateway.php",{t:b,arq:13,tch:1,sub:-1,dlg:1},function(f){var e=c;e.empty();for(var d=0;d<f.length;d++){if(a===f[d].id){selected="selected"}else{selected=""}e.append('<option value="'+f[d].id+'" '+selected+">"+f[d].descricao+"</option>")}},"json")}function comboProcessoGestao(b,a,c){$.post("/pf/DIM.Gateway.php",{t:b,arq:14,tch:1,sub:-1,dlg:1},function(f){var e=c;e.empty();for(var d=0;d<f.length;d++){if(a===f[d].id){selected="selected"}else{selected=""}e.append('<option value="'+f[d].id+'" '+selected+">"+f[d].descricao+"</option>")}},"json")}function comboBancoDados(b,a,d,f){$.post("/pf/DIM.Gateway.php",{t:b,icl:f,arq:3,tch:1,sub:-1,dlg:1},function(g){var e=d;e.empty();e.append('<option value="0">...</option>');for(var c=0;c<g.length;c++){if(a===g[c].id){selected="selected"}else{selected=""}if(g[c].status==0){e.append('<option value="'+g[c].id+'" '+selected+">"+g[c].descricao+"</option>");e.children('option[value="'+g[c].id+'"]').attr("disabled",true)}else{if(g[c].tipo==="N"){e.append('<option value="'+g[c].id+'" '+selected+">"+g[c].descricao+"</option>")}else{if(Number(g[c].ie==Number(idEmpresa))){e.append('<option value="'+g[c].id+'" '+selected+">"+g[c].descricao+"</option>");e.children('option[value="'+g[c].id+'"]').css("color","#000099")}else{e.append('<option value="'+g[c].id+'" '+selected+">"+g[c].descricao+"</option>");e.children('option[value="'+g[c].id+'"]').css("color","#339933")}}}}},"json")}function comboIndustria(b,a,c){$.post("/pf/DIM.Gateway.php",{t:b,arq:11,tch:1,sub:-1,dlg:1},function(f){var e=c;e.empty();e.append('<option value="0">...</option>');for(var d=0;d<f.length;d++){if(a===f[d].id){selected="selected"}else{selected=""}e.append('<option value="'+f[d].id+'" '+selected+">"+f[d].descricao+"</option>")}},"json")}function comboBaseline(a,b,d,c){iWait("w_id_baseline",true);$.post("/pf/DIM.Gateway.php",{t:b,arq:4,tch:1,sub:-1,dlg:1,icl:idClienteContagem,isDashboard:c},function(f){d.empty();d.append('<option value="0">Baseline...</option>');for(var e=0;e<f.length;e++){if(a===f[e].id){selected="selected"}else{selected=""}d.append('<option value="'+f[e].id+'" '+selected+">"+f[e].sigla+" - "+f[e].descricao+"</option>")}iWait("w_id_baseline",false)},"json")}function comboBaselineAIE(d,c,b){$.post("/pf/DIM.Gateway.php",{t:d,i:c,a:b,arq:4,tch:1,sub:-1,dlg:1},function(f){var e=$("#id-baseline-pesquisa");e.empty();e.append('<option value="0">...</option>');for(var a=0;a<f.length;a++){e.append('<option value="'+f[a].id+'" '+selected+">"+f[a].sigla+" - "+f[a].descricao+"</option>")}iWait("w_id_baseline",false)},"json")}function comboOrgao(b,a,f,d){iWait("w_id_orgao",true);$.post("/pf/DIM.Gateway.php",{t:b,icl:f,arq:92,tch:1,sub:-1,dlg:1},function(g){var e=d;e.empty();e.append('<option value="0">...</option>');for(var c=0;c<g.length;c++){if(a===g[c].id){selected="selected"}else{selected=""}e.append('<option value="'+g[c].id+'" '+selected+(g[c].is_ativo==0?" disabled":"")+">"+g[c].descricao+"</option>")}iWait("w_id_orgao",false)},"json")}function f41b053cf7c9e8a38a30fa0fa20b6ea2e3bb16265(){$.post("/pf/DIM.Gateway.php",{arq:58,tch:1,sub:0,dlg:1},function(c){var b=$("#41b053cf7c9e8a38a30fa0fa20b6ea2e3bb16265").empty().append('<option value="0">...</option>');for(var a=0;a<c.length;a++){b.append('<option value="'+c[a].id+'">'+c[a].sigla+"</option>")}},"json")}function verificaProdutividade(a){iWait("w_produtividade",true);$.post("/pf/DIM.Gateway.php",{id:a,arq:56,tch:1,sub:-1,dlg:1},function(b){$("#div_produtividade").val(b[0].variacao);$("#produtividade-media").val(b[0].produtividadeMedia);$("#produtividade-baixa").val(b[0].produtividadeBaixa);$("#produtividade-alta").val(b[0].produtividadeAlta);$("#span-produtividade-linguagem").html("h/PF - M&Eacute;DIA: <strong>"+parseFloat(b[0].produtividadeMedia).toFixed(2)+"</strong>");alteraEscalaProdutividade("media");if(isSalvarEstatisticas){if($("#chk-produtividade-linguagem").prop("checked")){config_isEng?$("#prod-eng").val(parseFloat(b[0].produtividadeMedia).toFixed(2)).prop("readonly",true):null;config_isDes?$("#prod-des").val(parseFloat(b[0].produtividadeMedia).toFixed(2)).prop("readonly",true):null;config_isImp?$("#prod-imp").val(parseFloat(b[0].produtividadeMedia).toFixed(2)).prop("readonly",true):null;config_isTes?$("#prod-tes").val(parseFloat(b[0].produtividadeMedia).toFixed(2)).prop("readonly",true):null;config_isHom?$("#prod-hom").val(parseFloat(b[0].produtividadeMedia).toFixed(2)).prop("readonly",true):null;config_isImpl?$("#prod-impl").val(parseFloat(b[0].produtividadeMedia).toFixed(2)).prop("readonly",true):null}else{if($("#chk_produtividade_global").prop("checked")){config_isEng?$("#prod-eng").val(parseFloat(contagemConfig.produtividade_global).toFixed(2)).prop("readonly",true):null;config_isDes?$("#prod-des").val(parseFloat(contagemConfig.produtividade_global).toFixed(2)).prop("readonly",true):null;config_isImp?$("#prod-imp").val(parseFloat(contagemConfig.produtividade_global).toFixed(2)).prop("readonly",true):null;config_isTes?$("#prod-tes").val(parseFloat(contagemConfig.produtividade_global).toFixed(2)).prop("readonly",true):null;config_isHom?$("#prod-hom").val(parseFloat(contagemConfig.produtividade_global).toFixed(2)).prop("readonly",true):null;config_isImpl?$("#prod-impl").val(parseFloat(contagemConfig.produtividade_global).toFixed(2)).prop("readonly",true):null}else{config_isEng?$("#prod-eng").val(parseFloat(contagemConfig.prod_f_eng).toFixed(2)).prop("readonly",false):null;config_isDes?$("#prod-des").val(parseFloat(contagemConfig.prod_f_des).toFixed(2)).prop("readonly",false):null;config_isImp?$("#prod-imp").val(parseFloat(contagemConfig.prod_f_imp).toFixed(2)).prop("readonly",false):null;config_isTes?$("#prod-tes").val(parseFloat(contagemConfig.prod_f_tes).toFixed(2)).prop("readonly",false):null;config_isHom?$("#prod-hom").val(parseFloat(contagemConfig.prod_f_hom).toFixed(2)).prop("readonly",false):null;config_isImpl?$("#prod-impl").val(parseFloat(contagemConfig.prod_f_impl).toFixed(2)).prop("readonly",false):null}}$("#span-ft").html(parseFloat(b[0].ft).toFixed(2));calculaFases(false)}$("#coc-sloc-conversao").html(b[0].sloc);iWait("w_produtividade",false)},"json")}function alteraEscalaProdutividade(a){switch(a){case"baixa":$("#escala-baixa").removeClass("btn-default").removeClass("btn-success").addClass("btn-success");$("#escala-media").removeClass("btn-default").removeClass("btn-success").addClass("btn-default");$("#escala-alta").removeClass("btn-default").removeClass("btn-success").addClass("btn-default");break;case"media":$("#escala-baixa").removeClass("btn-default").removeClass("btn-success").addClass("btn-default");$("#escala-media").removeClass("btn-default").removeClass("btn-success").addClass("btn-success");$("#escala-alta").removeClass("btn-default").removeClass("btn-success").addClass("btn-default");break;case"alta":$("#escala-baixa").removeClass("btn-default").removeClass("btn-success").addClass("btn-default");$("#escala-media").removeClass("btn-default").removeClass("btn-success").addClass("btn-default");$("#escala-alta").removeClass("btn-default").removeClass("btn-success").addClass("btn-success");break}$("#span-produtividade-linguagem").html("Hh/PF - "+a.toUpperCase()+": <strong>"+parseFloat($("#produtividade-"+a).val()).toFixed(2)+"</strong>")}function comboCliente(d,a,b,c){$.post("/pf/DIM.Gateway.php",{t:b,f:c,e:d,i:a,arq:5,tch:1,sub:-1,dlg:1},function(g){var f=$("#"+d+"_id_cliente");f.empty();for(var e=0;e<g.length;e++){if(a===g[e].id){selected="selected"}else{selected=""}f.append('<option value="'+g[e].id+'" '+selected+">"+(g[e].sigla!==""?g[e].sigla+" - ":"")+g[e].descricao+"</option>")}},"json")}function comboFornecedores(d,a,b,e,c){$.post("/pf/DIM.Gateway.php",{t:b,tp:e,arq:9,tch:1,sub:-1,dlg:1},function(h){var g=$("#"+d+"_id_"+(c?(e==0?"fornecedor":"turma"):"fornecedor"));g.empty();for(var f=0;f<h.length;f++){if(tpoFornecedor==1){g.append('<option value="'+h[f].id+'" '+(a===h[f].id?"selected":"")+">"+(h[f].is_ativo!=""?(h[f].is_ativo==1?"[ A ] ":"[ I ] "):"")+(f==0?h[f].nome:h[f].sigla+" - "+h[f].nome)+"</option>")}else{g.append('<option value="'+h[f].id+'" '+(a===h[f].id?"selected":"")+">"+(h[f].is_ativo!=""?(h[f].is_ativo==1?"[ A ] ":"[ I ] "):"")+(f==0?h[f].nome:h[f].sigla+" - "+h[f].nome)+"</option>")}}},"json")}function comboContrato(g,d,c,l,k,b){var j;if(g===0&&c===0){j=$("#"+k+"_id_contrato");j.empty().append('<option value="0">Aguardando um cliente...</option>');j=$("#"+k+"_id_projeto");j.empty().append('<option value="0">Aguardando um contrato...</option>')}else{iWait("w_id_contrato",true);j=$("#"+k+"_id_contrato");var h="";$.post("/pf/DIM.Gateway.php",{i:g,t:d,a:b,arq:6,tch:1,sub:-1,dlg:1},function(e){j.empty();if(e.length<=1){swal({title:"Alerta",text:"Este cliente n&atilde;o possui contrato(s) ou n&atilde;o est&atilde;o ativos. Pe&ccedil;a para o administrador verificar.",type:"error",html:true,confirmButtonText:"Entendi, obrigado!"});j.append('<option value="0" disabled>Nenhum contrato ativo!</option>')}else{for(var a=0;a<e.length;a++){if(c===e[a].id){h="selected"}else{h=""}if(l==0){j.append('<option value="'+e[a].id+'" '+h+">"+(e[a].sigla==="-"?"":e[a].sigla)+e[a].numeroAno+"</option>")}else{if(l==1){if(e[a].tipo==="[ I ]"){j.append('<option value="'+e[a].id+'" '+h+">"+e[a].numeroAno+"</option>")}}else{if(l==2){if(e[a].tipo==="[ A ]"){j.append('<option value="'+e[a].id+'" '+h+">"+e[a].numeroAno+"</option>")}}}}}}iWait("w_id_contrato",false)},"json");if(parseInt(c,10)>0){j.val(c)}}}function comboProjeto(c,b,a,g){var e=$("#"+g+"_id_projeto");var d="";if(c===0&&a===0){e.empty().append('<option value="0">Aguardando um contrato...</option>')}else{iWait("w_id_projeto",true);$.post("/pf/DIM.Gateway.php",{i:c,t:b,arq:15,tch:1,sub:-1,dlg:1},function(h){if(h.length<2){swal({title:"Alerta",text:"Este contrato n&atilde;o possui projeto(s) ou n&atilde;o est&atilde;o ativos. Pe&ccedil;a para o administrador verificar.",type:"error",html:true,confirmButtonText:"Entendi, obrigado!"});e.empty().append('<option value="0">Aguardando um contrato...</option>');iWait("w_id_projeto",false)}else{e.empty();for(var f=0;f<h.length;f++){if(a===h[f].id){d="selected"}else{d=""}e.append('<option value="'+h[f].id+'" '+d+">"+h[f].descricao+"</option>")}iWait("w_id_projeto",false);if(parseInt(a,10)>0){e.val(a)}}},"json")}}function comboProjetoBaseline(a,b){$.post("/pf/DIM.Gateway.php",{t:a,arq:87,tch:1,sub:-1,dlg:1},function(d){b.empty();for(var c=0;c<d.length;c++){b.append('<option value="'+d[c].id+'">'+d[c].descricao+"</option>")}},"json")}function comboGerenteProjeto(a){var b=$("#prj_id_gerente_projeto");$.post("/pf/DIM.Gateway.php",{arq:10,tch:1,sub:-1,dlg:1},function(d){b.empty();for(var c=0;c<d.length;c++){if(a===d[c].user_id){selected="selected"}else{selected=""}b.append('<option value="'+d[c].user_id+'" '+selected+">"+d[c].complete_name+"</option>")}},"json")}function exibeModalForm(g,e,h,c,d){if($("#id").val()==="-"){swal({title:"Alerta",text:"Por favor, insira primeiro as informa&ccedil;&otilde;es sobre a contagem.",type:"error",html:true,confirmButtonText:"Entendi!"})}else{if(abAtual==3||abAtual==4){$("#"+g+"_op2").prop("disabled",true);$("#"+g+"_op3").prop("disabled",true);$("#"+g+"_op4").prop("disabled",true);if(abAtual==3){$("#"+g+"_me1").prop("disabled",true);$("#"+g+"_me2").prop("disabled",true)}}else{if(abAtual==2&&h==="AIE"){$("#"+g+"_op2").prop("disabled",true)}}$("#descricao-funcao-td").val(g);$("#id-linha-descricao").val("0");variaveisModalForm(g,e,h,c,d)}}function variaveisModalForm(g,e,h,c,d){c.setAttribute("data-toggle","modal");c.setAttribute("data-target","#form_modal_funcao_"+g);$("#cabecalho_funcao").val(e);$("#"+g+"_tabela").val(h);$("#"+g+"_id").val($("#id").val());$("#"+g+"_h4-modal").html($("#cabecalho_funcao").val());if(d==="ad"){$("#"+g+"_btn_if").prop("disabled",false);$("#"+g+"_btn_in").prop("disabled",false);$("#"+g+"_btn_al").prop("disabled",true)}else{$("#"+g+"_btn_if").prop("disabled",true);$("#"+g+"_btn_in").prop("disabled",true);$("#"+g+"_btn_al").prop("disabled",false)}acForms=d;fAtual=h.toLowerCase();if(g==="dados"&&d==="al"){$("#dados_funcao").prop("readonly",true).css({"background-color":"#ffffe5"});$("#alterar-funcao-dados").removeClass("cancelar").addClass("alterar").removeClass("btn-warning").addClass("btn-default").html('<i class="fa fa-edit"></i>&nbsp;Alterar').prop("disabled",false)}else{$("#dados_funcao").prop("readonly",false);$("#alterar-funcao-dados").removeClass("cancelar").addClass("alterar").removeClass("btn-warning").addClass("btn-default").html('<i class="fa fa-edit"></i>&nbsp;Alterar').prop("disabled",true)}Number(contagemConfig.id_fator_tecnologia_padrao)>0?$("#id_fator_tecnologia").val(contagemConfig.id_fator_tecnologia_padrao):null;$("#valor_fator_tecnologia").html(parseFloat(($("#id_fator_tecnologia option:selected").text()).split("-")[0]).toFixed(3))}function verificaMetodo(d,a,c,h){if(Number($(c).val())==0||$(h).val()===""){swal({title:"Alerta",text:"Por favor selecione um roteiro e/ou uma opera&ccedil;&atilde;o antes de selecionar o m&eacute;todo.",type:"error",html:true,confirmButtonText:"Entendi, obrigado!"},function(){$(a).removeClass("btn-success").addClass("btn-default");$(c).get(0).focus()})}else{if(Number($(a).val())==1){destacaBotao(d,"_me",["btn-success","btn-default","btn-default"]);if($("#"+d+"_tabela").val()==="ALI"){camposMetodo(19,1,"Baixa","7.0000",d,$(a).val())}else{if($("#"+d+"_tabela").val()==="AIE"){camposMetodo(19,1,"Baixa","5.0000",d,$(a).val())}else{if($("#"+d+"_tabela").val()==="EE"){camposMetodo(16,1,"Media","4.0000",d,$(a).val())}else{if($("#"+d+"_tabela").val()==="SE"){camposMetodo(20,1,"Media","5.000",d,$(a).val())}else{if($("#"+d+"_tabela").val()==="CE"){camposMetodo(20,1,"Media","4.0000",d,$(a).val())}}}}}}else{if(Number($(a).val())==2){destacaBotao(d,"_me",["btn-default","btn-success","btn-default"]);if($("#"+d+"_tabela").val()==="ALI"||$("#"+d+"_tabela").val()==="AIE"){camposMetodo(51,1,"Media","10.0000",d,$(a).val())}else{if($("#"+d+"_tabela").val()==="EE"){camposMetodo(16,1,"Media","4.0000",d,$(a).val())}else{if($("#"+d+"_tabela").val()==="SE"){camposMetodo(20,1,"Media","5.0000",d,$(a).val())}else{if($("#"+d+"_tabela").val()==="CE"){camposMetodo(20,1,"Media","4.0000",d,$(a).val())}}}}}else{if(Number($(a).val())==3){destacaBotao(d,"_me",["btn-default","btn-default","btn-success"]);var g=$("#"+d+"_tabela").val();var e=$("#"+d+"_descricao_td").tagsManager("tags");var b=d==="transacao"?$("#"+d+"_descricao_ar").tagsManager("tags"):$("#"+d+"_descricao_tr").tagsManager("tags");if(e.length>0&&b.length>0){$("#"+d+"_td").val(e.length);$("#"+d+(d==="transacao"?"_ar":"_tr")).val(b.length);calculaLinhaPF($("#"+d+"_tabela").val(),d,$("#"+d+"_td"),$("#"+d+(d==="transacao"?"_ar":"_tr")));if($("#"+d+"_impacto").val()!=="0"){calculaPfa($("#"+d+"_impacto"),$("#"+d+"_pfb"),$("#"+d+"_pfa"),d)}}else{$("#"+d+"_td").prop("readOnly",true).val(g==="SE"?"0":"");if(d==="dados"){$("#"+d+"_tr").prop("readOnly",true).val("")}else{if(d==="transacao"){$("#"+d+"_ar").prop("readOnly",true).val("0")}}if(g==="SE"){calculaLinhaPF($("#"+d+"_tabela").val(),d,$("#"+d+"_td"),$("#"+d+"_ar"))}else{$("#"+d+"_complexidade").val("");$("#"+d+"_pfb").val("")}}}}}$("#"+d+"_metodo").val($(a).val())}return true}function verificaOperacao(k,g,h,j,c,d){var e=$("#contagem_id_baseline").val();if(g!=="I"){isCrud=false;$("#is-crud").bootstrapToggle("off").bootstrapToggle("disable")}else{}if(g==="I"&&abAtual==2&&d==="al"){$("#"+k+"_op2").prop("disabled",true);$("#"+k+"_op3").prop("disabled",true);$("#"+k+"_op4").prop("disabled",true)}else{if((g==="A"||g==="E")&&abAtual==2&&d==="al"){$("#"+k+"_op1").prop("disabled",true);$("#"+k+"_op4").prop("disabled",true)}else{if(abAtual==3||abAtual==4){$("#"+k+"_op2").prop("disabled",true);$("#"+k+"_op3").prop("disabled",true);if(abAtual==3){$("#"+k+"_me1").prop("disabled",true);$("#"+k+"_me1").prop("disabled",true)}}}}if(h==0){swal({title:"Alerta",text:"Por favor, selecione primeiro o Roteiro de M&eacute;tricas.",type:"error",html:true,confirmButtonText:"Entendi!"});destacaBotao(k,"_op",["btn-default","btn-default","btn-default","btn-default"]);return false}else{if(abAtual==3){comboFatorImpacto(h,k,j,c,g,d);verificaMetodo(k,$("#"+k+"_me3"),$("#"+k+"_id_roteiro"),$("#"+k+"_op1"));destacaBotao(k,"_op",["btn-success","btn-default","btn-default","btn-default"]);destacaBotao(k,"_me",["btn-default","btn-default","btn-success"]);$("#"+k+"_metodo").val(3);$("#"+k+"_operacao").val("I");$("#"+k+"_funcao").prop("disabled",false)}else{switch(g){case"I":limpaCampos(k,false,d);if(abAtual==2){if(c==="AIE"){destacaBotao(k,"_op",["btn-success","btn-default","btn-default","btn-default"]);$("#"+k+"_operacao").val(g);comboFatorImpacto(h,k,j,c,g,d)}else{$("#"+k+"_funcao").replaceWith('<input type="text" class="form-control input_style" id="'+k+'_funcao" name="'+k+'_funcao" autocomplete="off">');destacaBotao(k,"_op",["btn-success","btn-default","btn-default","btn-default"]);$("#"+k+"_operacao").val(g);comboFatorImpacto(h,k,j,c,g,d)}}else{$("#"+k+"_funcao").replaceWith('<input type="text" class="form-control input_style" id="'+k+'_funcao" name="'+k+'_funcao" autocomplete="off">');destacaBotao(k,"_op",["btn-success","btn-default","btn-default","btn-default"]);$("#"+k+"_operacao").val(g);comboFatorImpacto(h,k,j,c,g,d)}break;case"A":limpaCampos(k,false,d);if(abAtual==2){$.post("/pf/DIM.Gateway.php",{idBaseline:e,tabela:c,idContagem:idContagem,arq:41,tch:1,sub:-1,dlg:1},function(b){if(b.length<1&&acForms!=="al"){swal({title:"Alerta",text:"<strong>ATEN&Ccedil;&Atilde;O</strong>: n&atilde;o h&aacute; fun&ccedil;&otilde;es ("+c+") cadastradas na Baseline ou as fun&ccedil;&otilde;es inseridas ainda n&atilde;o est&atilde;o validadas. Verifique se a funcionalidade que voc&ecirc; est&aacute; pesquisando j&aacute; est&aacute; inserida na contagem, evite duplicidades.",type:"error",html:true,confirmButtonText:"Obrigado, vou verificar!"},function(){destacaBotao(k,"_op",["btn-default","btn-default","btn-default","btn-default"])})}else{if(d!=="al"){$("#"+k+"_funcao").replaceWith('<select id="'+k+'_funcao" class="form-control input_style" onchange="consultaFuncao'+k.capitalizeFirstLetter()+"Baseline(this.value, '"+c+"');\"></select>");var a=$("#"+k+"_funcao");a.empty();a.append('<option value="0">...</option>');for(x=0;x<b.length;x++){a.append('<option value="'+b[x].id+'">'+(Number(b[x].id_gerador)>0?"P":"B")+" > "+("0000000"+b[x].id_contagem).slice(-7)+" > "+b[x].operacao+" > "+formattedDate(b[x].data_cadastro,false,false)+" > "+b[x].sigla+" > "+b[x].funcao+"</option>")}}destacaBotao(k,"_op",["btn-default","btn-success","btn-default","btn-default"]);$("#"+k+"_operacao").val(g);comboFatorImpacto(h,k,j,c,g,d);$("#"+k+"-is-mudanca").bootstrapToggle("enable")}},"json")}else{destacaBotao(k,"_op",["btn-default","btn-success","btn-default","btn-default"]);$("#"+k+"_operacao").val(g);comboFatorImpacto(h,k,j,c,g,d);$("#"+k+"-is-mudanca").bootstrapToggle("enable")}$("#"+k+"_fd").prop("disabled",false);break;case"E":limpaCampos(k,false,d);if(Number(abAtual)==2){$.post("/pf/DIM.Gateway.php",{idBaseline:e,tabela:c,idContagem:idContagem,abAtual:abAtual,arq:41,tch:1,sub:-1,dlg:1},function(b){if(b.length<1&&acForms!=="al"){swal({title:"Alerta",text:"<strong>ATEN&Ccedil;&Atilde;O</strong>: n&atilde;o h&aacute; fun&ccedil;&otilde;es ("+c+") cadastradas na Baseline ou as fun&ccedil;&otilde;es inseridas ainda n&atilde;o est&atilde;o validadas. Verifique se a funcionalidade que voc&ecirc; est&aacute; pesquisando j&aacute; est&aacute; inserida na contagem, evite duplicidades.",type:"error",html:true,confirmButtonText:"Obrigado, vou verificar!"},function(){destacaBotao(k,"_op",["btn-default","btn-default","btn-default","btn-default"])})}else{if(d!=="al"){$("#"+k+"_funcao").replaceWith('<select id="'+k+'_funcao" class="form-control input_style" onchange="consultaFuncao'+k.capitalizeFirstLetter()+"Baseline(this.value, '"+c+"');\"></select>");var a=$("#"+k+"_funcao");a.empty();a.append('<option value="0">...</option>');for(x=0;x<b.length;x++){a.append('<option value="'+b[x].id+'">'+(Number(b[x].id_gerador)>0?"P":"B")+" > "+("0000000"+b[x].id_contagem).slice(-7)+" > "+b[x].operacao+" > "+formattedDate(b[x].data_cadastro,false,false)+" > "+b[x].sigla+" > "+b[x].funcao+"</option>")}}destacaBotao(k,"_op",["btn-default","btn-default","btn-success","btn-default"]);$("#"+k+"_operacao").val(g);comboFatorImpacto(h,k,j,c,g,d);$("#"+k+"-is-mudanca").bootstrapToggle("enable")}},"json")}else{destacaBotao(k,"_op",["btn-default","btn-default","btn-success","btn-default"]);$("#"+k+"_operacao").val(g);comboFatorImpacto(h,k,j,c,g,d);$("#"+k+"-is-mudanca").bootstrapToggle("enable")}$("#"+k+"_fd").prop("disabled",false);break;case"T":limpaCampos(k,false,d);if(abAtual==2){$.post("/pf/DIM.Gateway.php",{idBaseline:e,tabela:c,idContagem:idContagem,arq:41,tch:1,sub:-1,dlg:1},function(b){if(b.length<1&&acForms!=="al"){swal({title:"Alerta",text:"<strong>ATEN&Ccedil;&Atilde;O</strong>: n&atilde;o h&aacute; fun&ccedil;&otilde;es ("+c+") cadastradas na Baseline ou as fun&ccedil;&otilde;es inseridas ainda n&atilde;o est&atilde;o validadas. Verifique se a funcionalidade que voc&ecirc; est&aacute; pesquisando j&aacute; est&aacute; inserida na contagem, evite duplicidades.",type:"error",html:true,confirmButtonText:"Obrigado, vou verificar!"},function(){destacaBotao(k,"_op",["btn-default","btn-default","btn-default","btn-default"])})}else{if(d!=="al"){$("#"+k+"_funcao").replaceWith('<select id="'+k+'_funcao" class="form-control input_style" onchange="consultaFuncao'+k.capitalizeFirstLetter()+"Baseline(this.value, '"+c+"');\"></select>");var a=$("#"+k+"_funcao");a.empty();a.append('<option value="0">...</option>');for(x=0;x<b.length;x++){a.append('<option value="'+b[x].id+'">'+(Number(b[x].id_gerador)>0?"P":"B")+" > "+("0000000"+b[x].id_contagem).slice(-7)+" > "+b[x].operacao+" > "+formattedDate(b[x].data_cadastro,false,false)+" > "+b[x].sigla+" > "+b[x].funcao+"</option>")}}destacaBotao(k,"_op",["btn-default","btn-default","btn-default","btn-success"]);$("#"+k+"_operacao").val(g);comboFatorImpacto(h,k,j,c,g,d)}},"json")}else{destacaBotao(k,"_op",["btn-default","btn-default","btn-default","btn-success"]);$("#"+k+"_operacao").val(g);comboFatorImpacto(h,k,j,c,g,d)}$("#"+k+"_fd").prop("disabled",true)}}}}function destacaBotao(d,c,b){$("#"+d+c+"1").removeClass("btn-default").removeClass("btn-success").addClass(b[0]);$("#"+d+c+"2").removeClass("btn-default").removeClass("btn-success").addClass(b[1]);$("#"+d+c+"3").removeClass("btn-default").removeClass("btn-success").addClass(b[2]);(c==="_op"&&d!=="outros")?$("#"+d+c+"4").removeClass("btn-default").removeClass("btn-success").addClass(b[3]):null}function inserirAlterarLinguagem(a,c,b){if(a==="i"&&$("#nova_linguagem").val()===""){swal({title:"Alerta",text:"A <strong>DESCRI&Ccedil;&Atilde;O</strong> da Linguagem &eacute; &uacute;nico campo obrigat&oacute;rio",type:"error",html:true,confirmButtonText:"Entendi!"});return false}else{if(a==="a"&&$("#des-"+c).val()===""){swal({title:"Alerta",text:"A <strong>DESCRI&Ccedil;&Atilde;O</strong> da Linguagem &eacute; &uacute;nico campo obrigat&oacute;rio",type:"error",html:true,confirmButtonText:"Entendi!"});return false}}$.post("/pf/DIM.Gateway.php",{d:a==="i"?($("#nova_linguagem").val()):$("#des-"+c).val(),b:a==="i"?($("#baixa").val()===""?"16":$("#baixa").val()):$("#bai-"+c).val(),m:a==="i"?($("#media").val()===""?"12":$("#media").val()):$("#med-"+c).val(),a:a==="i"?($("#alta").val()===""?"8":$("#alta").val()):$("#alt-"+c).val(),s:a==="i"?($("#sloc").val()===""?"0":$("#sloc").val()):$("#slo-"+c).val(),i:a==="i"?($("#is_ativo").prop("checked")?1:0):($("#atv-"+c).prop("checked")?1:0),f:a==="i"?$("#fator_tecnologia").val():$("#ft-"+c).val(),t:a==="i"?($("#is_ft").prop("checked")?1:0):($("#is-ft-"+c).prop("checked")?1:0),ac:a,id:c,icl:b,arq:29,tch:0,sub:0,dlg:1},function(d){swal({title:"Informa&ccedil;&atilde;o",text:"A linguagem foi <strong>"+(a==="i"?"inserida":"alterada")+"</strong> com sucesso. #ID "+("0000000"+d[0].id).slice(-7),type:"success",html:true,confirmButtonText:"Obrigado!"},function(){if(a==="i"){addLinhaLinguagem(d[0].id,$("#nova_linguagem").val(),$("#is_ativo").prop("checked")?1:0,Number($("#baixa").val()).toFixed(2),Number($("#media").val()).toFixed(2),Number($("#alta").val()).toFixed(2),$("#sloc").val(),0,"#ccff99",$("#fator_tecnologia").val());$("#nova_linguagem").val("");$("#baixa").val("");$("#media").val("");$("#alta").val("");$("#sloc").val("");$("#fator_tecnologia").val("")}})},"json")}function inserirAlterarBancoDados(a,c,b){if(a==="i"&&$("#novo_banco_dados").val()===""){swal({title:"Alerta",text:"A <strong>DESCRI&Ccedil;&Atilde;O</strong> do Banco de Dados &eacute; um campo obrigat&oacute;rio",type:"error",html:true,confirmButtonText:"Entendi!"});return false}else{if(a==="a"&&$("#des-"+c).val()===""){swal({title:"Alerta",text:"A <strong>DESCRI&Ccedil;&Atilde;O</strong> do Banco de Dados &eacute; um campo obrigat&oacute;rio",type:"error",html:true,confirmButtonText:"Entendi!"});return false}}$.post("/pf/DIM.Gateway.php",{d:a==="i"?($("#novo_banco_dados").val()):$("#des-"+c).val(),i:a==="i"?($("#banco_dados_is_ativo").prop("checked")?1:0):($("#atv-"+c).prop("checked")?1:0),ac:a,id:c,icl:b,arq:87,tch:0,sub:0,dlg:1},function(d){swal({title:"Informa&ccedil;&atilde;o",text:"O Banco de Dados foi <strong>"+(a==="i"?"inserido":"alterado")+"</strong> com sucesso. #ID "+("0000000"+d[0].id).slice(-7),type:"success",html:true,confirmButtonText:"Obrigado!"},function(){if(a==="i"){addLinhaBancoDados(d[0].id,$("#novo_banco_dados").val(),$("#banco_dados_is_ativo").prop("checked")?1:0,0,"#ccff99");$("#novo_banco_dados").val("");$("#banco_dados_is_ativo").bootstrapToggle("on")}})},"json")}function inserirBancoDados(){if($("#novo_banco_dados").val()===""){swal({title:"Alerta",text:"A <strong>DESCRI&Ccedil;&Atilde;O</strong> do Banco de Dados (SGBD) &eacute; um campo obrigat&oacute;rio",type:"error",html:true,confirmButtonText:"Entendi, obrigado!"});return false}$.post("/pf/DIM.Gateway.php",{d:$("#novo_banco_dados").val(),arq:23,tch:0,sub:-1,dlg:1},function(a){comboBancoDados("01",$("#id_banco_dados"));swal({title:"Informa&ccedil;&atilde;o",text:"A descri&ccedil;&atilde;o do Banco de Dados (SGBD) foi inserida com sucesso. #ID "+("0000000"+a[0].id).slice(-7),type:"success",html:true,confirmButtonText:"Obrigado!"},function(){comboBancoDados("01",a[0].id);$("#novo_banco_dados").val("")})},"json")}function validaFormFuncao(a){var c={msg:"",sucesso:true,campo:""};var b;if(a==="transacao"){b="ar"}else{if(a==="dados"){b="tr"}}if(Number($("#"+a+"_id_roteiro").val())==0){c.sucesso=false;c.msg="O campo <strong>#ID ROTEIRO</strong> &eacute; de preenchimento obrigat&oacute;rio.";c.campo=$("#"+a+"_id_roteiro")}else{if($("#"+a+"_operacao").val()===""){c.sucesso=false;c.msg="O campo <strong>OPERA&Ccedil;&Atilde;O</strong> &eacute; de preenchimento obrigat&oacute;rio <i>(I - Inclus&atilde;o, A - Altera&ccedil;&atilde;o "+(a!=="transacao"?"e/ou":", ")+" E - Exclus&atilde;o "+(a==="transacao"?"e/ou T - Testes":"")+")</i>.";c.campo=$("#"+a+"_operacao")}else{if($("#"+a+"_metodo").val()===""){c.sucesso=false;c.msg="O campo <strong>M&Eacute;TODO</strong> &eacute; de preenchimento obrigat&oacute;rio <i>(N - Nesma, F - FP-LITE e D - Detalhado)</i>.";c.campo=$("#"+a+"_metodo")}else{if(Number($("#"+a+"_entrega").val())==0||$("#"+a+"_entrega").val()===""||Number($("#"+a+"_entrega").val())>Number($("#entregas").val())){c.sucesso=false;if(Number($("#"+a+"_entrega").val())==0){c.msg="O campo <strong>ENTREGA</strong> &eacute; de preenchimento obrigat&oacute;rio e não pode ser 0 (zero)."}else{if($("#"+a+"_entrega").val()===""){c.msg="O campo <strong>ENTREGA</strong> &eacute; de preenchimento obrigat&oacute;rio."}else{if(Number($("#"+a+"_entrega").val())>Number($("#entregas").val())){c.msg="O campo <strong>ENTREGA</strong> n&atilde;o pode ser maior que o definido na ABA - Informa&ccedil;&otilde;es da Contagem, que &eacute; "+$("#entregas").val()+" ("+$("#entregas").val().extenso()+")."}}}c.campo=$("#"+a+"_entrega")}else{if($("#"+a+"_funcao").val()===""||$("#"+a+"_funcao").val()==0){c.sucesso=false;c.msg="O campo <strong>NOME DA FUN&Ccedil;&Atilde;O</strong> &eacute; de preenchimento obrigat&oacute;rio.";c.campo=$("#"+a+"_funcao")}else{if($("#"+a+"_td").val()===""){c.sucesso=false;c.msg="O campo <strong>TD</strong> &eacute; de preenchimento obrigat&oacute;rio.";c.campo=$("#"+a+"_td")}else{if($("#"+a+"_"+b).val()===""){c.sucesso=false;c.msg="O campo <strong>TD</strong> &eacute; de preenchimento obrigat&oacute;rio.";c.campo=$("#"+a+"_"+b)}else{if(Number($("#"+a+"_impacto").val())==0){c.sucesso=false;c.msg="O campo <strong>AJUSTE</strong> &eacute; de preenchimento obrigat&oacute;rio.";c.campo=$("#"+a+"_impacto")}else{if($("#"+a+"-is-mudanca").prop("checked")&&Number($("#"+a+"-fase").val())==0){c.sucesso=false;c.msg="Voc&ecirc; selecionou &quot;SIM&quot; para <strong>mudan&ccedil;as</strong> por&eacute;m n&atilde;o selecionou uma fase."}else{if($("#"+a+"-is-mudanca").prop("checked")&&$("#"+a+"-fase").val()!=""&&$("#"+a+"-percentual-fase").val()===""){c.sucesso=false;c.msg="Voc&ecirc; selecionou &quot;SIM&quot; para <strong>mudan&ccedil;as</strong> e informou a fase, entretanto n&atilde;o informou qual &eacute; o percentual de andamento da fase."}}}}}}}}}}return c}function limpaCampos(c,d,b){d?comboRoteiro(c,"01",idRoteiro,0):null;if(b!=="al"){$("#"+c+"_op1").attr("class","btn btn-default").prop("disabled",false);$("#"+c+"_op2").attr("class","btn btn-default").prop("disabled",(abAtual==3||abAtual==4)?true:(abAtual==2&&$("#"+c+"_tabela").val()==="AIE"?true:false));$("#"+c+"_op3").attr("class","btn btn-default").prop("disabled",(abAtual==3||abAtual==4)?true:false);(c==="transacao")?$("#"+c+"_op4").attr("class","btn btn-default").prop("disabled",(abAtual==3||abAtual==4)?true:false):null;$("#"+c+"_operacao").val("");$("#"+c+"_entrega").val(1);$("#"+c+"_pfa").val("");dadosItems=[];transacaoItems=[];if(c!=="outros"){$("#"+c+"_me1").attr("class","btn btn-default").prop("disabled",(abAtual!=3?false:true));$("#"+c+"_me2").attr("class","btn btn-default").prop("disabled",(abAtual!=3?false:true));$("#"+c+"_me3").attr("class","btn btn-default").prop("disabled",false);$("#"+c+"_metodo").val("");$("#"+c+"_complexidade").val("");$("#"+c+"-is-mudanca").bootstrapToggle("off").bootstrapToggle("disable");$("#"+c+"-fase").val(0).prop("disabled",true);$("#"+c+"-percentual-fase").val("").prop("readonly",true);$("#"+c+"_pfb").val("").prop("readonly",true);$("#"+c+"_fd").val("0.00").prop("disabled",true);$("#"+c+"_fe").val(0)}else{$("#"+c+"_qtd").val("").prop("disabled",false)}$("#"+c+"_fonte").val("").prop("disabled",false);$("#"+c+"_impacto").empty().append('<option value="0">...</option>').val(0).prop("disabled",false);$("#"+c+"_observacoes").val("").prop("disabled",false);$("#"+c+"_observacoes_validacao").val("").prop("disabled",false);$("#"+c+"_funcao").replaceWith('<input type="text" class="form-control input_style" id="'+c+'_funcao" name="'+c+'_funcao" autocomplete="off">').val("").prop("disabled",false);if(c==="dados"){$("#"+c+"_td").val("").prop("readonly",true);$("#"+c+"_tr").val("").prop("readonly",true);$("#"+c+"_descricao_tr").val("").prop("disabled",false).tagsManager("empty")}else{if(c==="transacao"){$("#"+c+"_td").val("").prop("readonly",true);$("#"+c+"_ar").val("").prop("readonly",true);$("#"+c+"_descricao_ar").val("").prop("disabled",false).tagsManager("empty")}}$("#"+c+"_descricao_td").val("").prop("disabled",false).tagsManager("empty")}else{$("#"+c+"-is-mudanca").bootstrapToggle("enable").bootstrapToggle("off").bootstrapToggle("disable");$("#"+c+"-fase").val(0).prop("disabled",true);$("#"+c+"-percentual-fase").val("").prop("readonly",true);$("#"+c+"_pfa").val("")}$("#"+c+"_log").empty();$("#sel_funcao_transacao").empty().append('<option value="0">...</option>');pBaseline=false;bAR=false;$('[data-toggle="popover"]').popover("hide");if(c==="dados"&&b==="al"){$("#dados_funcao").prop("readonly",true).css({"background-color":"#ffffe5"});$("#alterar-funcao-dados").removeClass("cancelar").addClass("alterar").removeClass("btn-warning").addClass("btn-default").html('<i class="fa fa-edit"></i>&nbsp;Alterar').prop("disabled",false)}else{$("#dados_funcao").prop("readonly",false);$("#alterar-funcao-dados").removeClass("cancelar").addClass("alterar").removeClass("btn-warning").addClass("btn-default").html('<i class="fa fa-edit"></i>&nbsp;Alterar').prop("disabled",true)}$("#dados_funcao_nome_anterior").val("");$("#dados_funcao_is_alterar_nome").val("0")}function limpaCamposLinha(a,c,e,b){if(Number($(e).val())==0){if(a==="ALI"||a==="AIE"||a==="EE"||a==="CE"){swal({title:"Alerta",text:"A quantidade de Tipos de Dados (TD) &eacute; obrigat&oacute;ria e n&atilde;o pode ser 0 (zero)!",type:"error",html:true,confirmButtonText:"Entendi!"},function(){$(e).val("").get(0).focus();return false})}}b!==""?calculaLinhaPF(a,c,e,b):null}function verificaTd(a,c,e,b){if(Number($(e).val())===""){swal({title:"Alerta",text:"Por favor, digite a quantidade de Tipo de Dados (TD) antes de digitar a quantidade de "+(a==="ALI"||a==="AIE")?"Tipos de Registros (TR)!":"Arquivos Referenciados (AR)",type:"error",html:true,confirmButtonText:"Entendi!"},function(){$(b).val("");$(e).get(0).focus();return false})}if(Number($(b).val())==0){if(a==="ALI"||a==="AIE"){swal({title:"Alerta",text:"A quantidade de Tipos de Registros (TR) &eacute; obrigat&oacute;ria e n&atilde;o pode ser 0 (zero)!",type:"error",html:true,confirmButtonText:"Entendi!"},function(){$(b).val("").get(0).focus();return false})}}calculaLinhaPF(a,c,e,b)}function calculaLinhaPF(a,g,j,b){var l=$(j).val();var e=$(b).val();var k;var h;if(e===""){$("#"+g+"_complexidade").val("");$("#"+g+"_pfb").val("")}else{switch(a){case"ALI":if(abAtual==9){k="EFd";h=Number(1.75)+Number(0.96*e)+Number(0.12*l)}else{if((e==1&&l<=50)||(e<=5&&l<20)){k="Baixa";h=Number(7)}else{if((e==1&&l>50)||((e>=2&&e<=5)&&(l>=20&&l<=50))||(e>5&&l<20)){k="Media";h=Number(10)}else{k="Alta";h=Number(15)}}}break;case"AIE":if(abAtual==9){k="EFd";h=Number(1.25)+Number(0.65*e)+Number(0.08*l)}else{if((e==1&&l<=50)||(e<=5&&l<20)){k="Baixa";h=Number(5)}else{if((e==1&&l>50)||((e>=2&&e<=5)&&(l>=20&&l<=50))||(e>5&&l<20)){k="Media";h=Number(7)}else{k="Alta";h=Number(10)}}}break;case"EE":if(abAtual==9){k="EFt";h=Number(0.75)+Number(0.91*e)+Number(0.13*l)}else{if((e<2&&l<=15)||(e==2&&l<5)){k="Baixa";h=Number(3)}else{if((e<2&&l>15)||(e==2&&(l>=5&&l<=15))||(e>2&&l<5)){k="Media";h=Number(4)}else{k="Alta";h=Number(6)}}}break;case"SE":if(abAtual==9){k="EFt";h=Number(1)+Number(0.81*e)+Number(0.13*l)}else{if((e<2&&l<20)||((e==2||e==3)&&l<6)){k="Baixa";h=Number(4)}else{if((e<2&&l>19)||((e==2||e==3)&&l<20)||(l>3&&l<6)){k="Media";h=Number(5)}else{k="Alta";h=Number(7)}}}break;case"CE":if(abAtual==9){k="EFt";h=Number(0.75)+Number(0.76*e)+Number(0.1*l)}else{if((e<2&&l<20)||((e==2||e==3)&&l<6)){k="Baixa";h=Number(3)}else{if((e<2&&l>19)||((e==2||e==3)&&l<20)||(e>3&&l<6)){k="Media";h=Number(4)}else{k="Alta";h=Number(6)}}}break}$("#"+g+"_complexidade").val(k);$("#"+g+"_pfb").val(h.toFixed(4))}return true}function calculaLinhaPF_v2(a,d,b){var c={c:"",p:0};switch(a){case"ALI":if(abAtual==9){c.c="EFd";c.p=Number(1.75)+Number(0.96*b)+Number(0.12*d)}else{if((b==1&&d<=50)||(b<=5&&d<20)){c.c="Baixa";c.p=Number(7)}else{if((b==1&&d>50)||((b>=2&&b<=5)&&(d>=20&&d<=50))||(b>5&&d<20)){c.c="Media";c.p=Number(10)}else{c.c="Alta";c.p=Number(15)}}}break;case"AIE":if(abAtual==9){c.c="EFd";c.p=Number(1.25)+Number(0.65*b)+Number(0.08*d)}else{if((b==1&&d<=50)||(b<=5&&d<20)){c.c="Baixa";c.p=Number(5)}else{if((b==1&&d>50)||((b>=2&&b<=5)&&(d>=20&&d<=50))||(b>5&&d<20)){c.c="Media";c.p=Number(7)}else{c.c="Alta";c.p=Number(10)}}}break;case"EE":if(abAtual==9){c.c="EFt";c.p=Number(0.75)+Number(0.91*b)+Number(0.13*d)}else{if((b<2&&d<=15)||(b==2&&d<5)){c.c="Baixa";c.p=Number(3)}else{if((b<2&&d>15)||(b==2&&(d>=5&&d<=15))||(b>2&&d<5)){c.c="Media";c.p=Number(4)}else{c.c="Alta";c.p=Number(6)}}}break;case"SE":if(abAtual==9){c.c="EFt";c.p=Number(1)+Number(0.81*b)+Number(0.13*d)}else{if((b<2&&d<20)||((b==2||b==3)&&d<6)){c.c="Baixa";c.p=Number(4)}else{if((b<2&&d>19)||((b==2||b==3)&&d<20)||(d>3&&d<6)){c.c="Media";c.p=Number(5)}else{c.c="Alta";c.p=Number(7)}}}break;case"CE":if(abAtual==9){c.c="EFt";c.p=Number(0.75)+Number(0.76*b)+Number(0.1*d)}else{if((b<2&&d<20)||((b==2||b==3)&&d<6)){c.c="Baixa";c.p=Number(3)}else{if((b<2&&d>19)||((b==2||b==3)&&d<20)||(b>3&&d<6)){c.c="Media";c.p=Number(4)}else{c.c="Alta";c.p=Number(6)}}}break}return c}function calculaLinhaPFDetalhada(d,b,a,c){if(d.length<1){if(b==="dados"){$("#"+b+"_"+a).val("");$("#"+b+"_complexidade").val("");$("#"+b+"_pfb").val("");$("#"+b+"_pfa").val("")}else{if(c==="SE"){$("#"+b+"_"+a).val("0");calculaLinhaPF(c,b,$("#"+b+"_td"),$("#"+b+"_ar"));if($("#"+b+"_impacto").val()!=="0"){calculaPfa($("#"+b+"_impacto"),$("#"+b+"_pfb"),$("#"+b+"_pfa"),b)}}else{if(c==="EE"||c==="CE"){if(a==="td"){$("#"+b+"_"+a).val("")}else{$("#"+b+"_"+a).val("0")}}$("#"+b+"_complexidade").val("");$("#"+b+"_pfb").val("");$("#"+b+"_pfa").val("")}}}else{$("#"+b+"_"+a).val(d.length);if(c==="ALI"||c==="AIE"){if($("#"+b+"_td").val()!==""&&$("#"+b+"_tr").val()!==""){calculaLinhaPF($("#"+b+"_tabela").val(),b,$("#"+b+"_td"),b==="dados"?$("#"+b+"_tr"):$("#"+b+"_ar"));if(Number($("#"+b+"_td").val())>0&&Number($("#"+b+"_tr").val())>0&&$("#"+b+"_impacto").val()!=="0"){calculaPfa($("#"+b+"_impacto"),$("#"+b+"_pfb"),$("#"+b+"_pfa"),b)}}}else{if(c!=="SE"){if($("#"+b+"_td").val()!==""){calculaLinhaPF($("#"+b+"_tabela").val(),b,$("#"+b+"_td"),b==="dados"?$("#"+b+"_tr"):$("#"+b+"_ar"));if(Number($("#"+b+"_td").val())>=0&&$("#"+b+"_impacto").val()!=="0"){calculaPfa($("#"+b+"_impacto"),$("#"+b+"_pfb"),$("#"+b+"_pfa"),b)}}}else{calculaLinhaPF($("#"+b+"_tabela").val(),b,$("#"+b+"_td"),b==="dados"?$("#"+b+"_tr"):$("#"+b+"_ar"));if($("#"+b+"_impacto").val()!=="0"){calculaPfa($("#"+b+"_impacto"),$("#"+b+"_pfb"),$("#"+b+"_pfa"),b)}}}}return true}function verificaData(a){a=a.substring(0,10);var c=-1;var d=Array(3);var b=a.charAt(0);for(i=0;i<a.length&&((b>="0"&&b<="9")||(b==="/"&&i!==0));){d[++c]="";if(b!=="/"&&i!==0){return false}if(i!==0){b=a.charAt(++i)}if(b===0){b=a.charAt(++i)}while(b>=0&&b<=9){d[c]+=b;b=a.charAt(++i)}}if(b!==""){return false}if(d[0]===""||isNaN(d[0])||parseInt(d[0])<1){return false}if(d[1]===""||isNaN(d[1])||parseInt(d[1])<1||parseInt(d[1])>12){return false}if(d[2]===""||isNaN(d[2])||((parseInt(d[2])<0||parseInt(d[2])>99)&&(parseInt(d[2])<1900||parseInt(d[2])>9999))){return false}if(d[2]<50){d[2]=parseInt(d[2])+2000}else{if(d[2]<100){d[2]=parseInt(d[2])+1900}}switch(parseInt(d[1])){case 2:if(((parseInt(d[2])%4!==0||(parseInt(d[2])%100===0&&parseInt(d[2])%400!==0))&&parseInt(d[0])>28)||parseInt(d[0])>29){return false}break;case 4:case 6:case 9:case 11:if(parseInt(d[0])>30){return false}break;default:if(parseInt(d[0])>31){return false}}return true}function getSpanPfa(a,b){var c=Number($("#pfa"+a).html());if(b){return c.toFixed(4)}else{return c.toFixed(0)}}function getSpanPfb(a,c){var b=Number($("#pfb"+a).html());if(c){return b.toFixed(4)}else{return b.toFixed(0)}}function getObject(){return RGraph.ObjectRegistry.getFirstObjectByType("bar")}function getTotalFuncoes(b){var a={ali:Number(0),aie:Number(0),ee:Number(0),se:Number(0),ce:Number(0),ou:Number(0),total:Number(0)};a.ali=Number($("#"+b+"ALI").html());a.aie=Number($("#"+b+"AIE").html());a.ee=Number($("#"+b+"EE").html());a.se=Number($("#"+b+"SE").html());a.ce=Number($("#"+b+"CE").html());if(b==="pfa"){a.ou=Number($("#"+b+"OU").html())}else{a.ou=Number(0)}a.total=Number(a.ali+a.aie+a.ee+a.se+a.ce+a.ou);return a}function getComplexidade(b){var a={alta:Number(0),media:Number(0),baixa:Number(0)};$("#add"+b+" tr:lt(2000)").each(function(){var d=$(this);var e=$.trim(d.find("td:eq(5)").text());switch(e){case"Alta":a.alta++;break;case"Media":a.media++;break;case"Baixa":a.baixa++;break}});return a}function getPercentuais(a){var b={pctFase:Number(0),pctTotal:Number(0)};switch(a){case"ENG":b.pctTotal=parseFloat(config_isEng?parseFloat(config_pctEng):0);b.pctFase=parseFloat(config_isEng?parseFloat(config_pctEng):0);break;case"DES":b.pctTotal=parseFloat(config_isEng?parseFloat(config_pctEng):0);b.pctFase=parseFloat(config_isEng?parseFloat(config_pctDes):0);break;case"IMP":b.pctTotal=parseFloat(config_isEng?parseFloat(config_pctEng):0)+parseFloat(config_isDes?parseFloat(config_pctDes):0);b.pctFase=parseFloat(config_isImp?parseFloat(config_pctImp):0);break;case"TES":b.pctTotal=parseFloat(config_isEng?parseFloat(config_pctEng):0)+parseFloat(config_isDes?parseFloat(config_pctDes):0)+parseFloat(config_isImp?parseFloat(config_pctImp):0);b.pctFase=parseFloat(config_isTes?parseFloat(config_pctTes):0);break;case"HOM":b.pctTotal=parseFloat(config_isEng?parseFloat(config_pctEng):0)+parseFloat(config_isDes?parseFloat(config_pctDes):0)+parseFloat(config_isImp?parseFloat(config_pctImp):0)+parseFloat(config_isTes?parseFloat(config_pctTes):0);b.pctFase=parseFloat(config_isHom?parseFloat(config_pctHom):0);break;case"IMPL":b.pctTotal=parseFloat(config_isEng?parseFloat(config_pctEng):0)+parseFloat(config_isDes?parseFloat(config_pctDes):0)+parseFloat(config_isImp?parseFloat(config_pctImp):0)+parseFloat(config_isTes?parseFloat(config_pctTes):0)+parseFloat(config_isHom?parseFloat(config_pctHom):0);b.pctFase=parseFloat(config_isImpl?parseFloat(config_pctImpl):0);break}return b}function getOperacao(b){var a={inclusao:Number(0),alteracao:Number(0),exclusao:Number(0)};$("#add"+b+" tr:lt(2000)").each(function(){var d=$(this);var e=$.trim(d.find("td:eq(1)").text());switch(e){case"I":a.inclusao++;break;case"A":a.alteracao++;break;case"E":a.exclusao++;break}});return a}function zeraArrayValida(a){switch(a){case"ALI":arrValidaALI.length=0;break;case"AIE":arrValidaAIE.length=0;break;case"EE":arrValidaEE.length=0;break;case"SE":arrValidaSE.length=0;break;case"CE":arrValidaCE.length=0;break;case"OU":arrValidaOU.length=0;break}}function zeraLinhasSelecionadas(b){var a=1;$("#fix"+b+" tr:gt(0)").each(function(){if($(this).hasClass("tr-selecionada")){$(this).find("td:lt(13)").css({backgroundColor:"rgba(255,255,255,1)"});$(this).toggleClass("tr-selecionada");$("#seq_"+b+"_"+a).toggleClass("div-linha").toggleClass("selecionada")}a++});atualizaSelecionados(b)}function atualizaSelecionados(a){switch(a){case"ALI":$("#span-selecionados-ALI").html(arrValidaALI.length);break;case"AIE":$("#span-selecionados-AIE").html(arrValidaAIE.length);break;case"EE":$("#span-selecionados-EE").html(arrValidaEE.length);break;case"SE":$("#span-selecionados-SE").html(arrValidaSE.length);break;case"CE":$("#span-selecionados-CE").html(arrValidaCE.length);break;case"OU":$("#span-selecionados-OU").html(arrValidaOU.length);break}}function arrayValida(b,a){switch(a){case"ALI":if(arrValidaALI.indexOf(b)===-1){arrValidaALI.push(b)}else{arrValidaALI.splice(arrValidaALI.indexOf(b),1)}atualizaSelecionados(a);break;case"AIE":if(arrValidaAIE.indexOf(b)===-1){arrValidaAIE.push(b)}else{arrValidaAIE.splice(arrValidaAIE.indexOf(b),1)}atualizaSelecionados(a);break;case"EE":if(arrValidaEE.indexOf(b)===-1){arrValidaEE.push(b)}else{arrValidaEE.splice(arrValidaEE.indexOf(b),1)}atualizaSelecionados(a);break;case"SE":if(arrValidaSE.indexOf(b)===-1){arrValidaSE.push(b)}else{arrValidaSE.splice(arrValidaSE.indexOf(b),1)}atualizaSelecionados(a);break;case"CE":if(arrValidaCE.indexOf(b)===-1){arrValidaCE.push(b)}else{arrValidaCE.splice(arrValidaCE.indexOf(b),1)}atualizaSelecionados(a);break;case"OU":if(arrValidaOU.indexOf(b)===-1){arrValidaOU.push(b)}else{arrValidaOU.splice(arrValidaOU.indexOf(b),1)}atualizaSelecionados(a);break}}function selecionadaFaturar(a){if(arrFaturar.indexOf(a)===-1){arrFaturar.push(a)}else{arrFaturar.splice(arrFaturar.indexOf(a),1)}}function zeraSelecionadaFaturar(a){$("#dataTable tr:gt(0)").each(function(){if($(this).hasClass("tr-selecionada")){$(this).find("td:lt(13)").css({backgroundColor:""});$(this).removeClass("tr-selecionada");a?$(this).find("td:eq(3)").parent().find("div").removeClass("fau").addClass("fat"):null}});arrFaturar=[]}function setSituacao(c,b){var a=document.getElementById(b);switch(Number(c)){case 0:a.style.backgroundImage="url('/pf/img/bg_nn.png')";break;case 1:a.style.backgroundImage="url('/pf/img/bg_nv.png')";break;case 2:a.className="validada";a.style.backgroundImage="url('/pf/img/bg_va.png')";break;case 3:a.className="revisao";a.style.backgroundImage="url('/pf/img/bg_mu.png')";break;case 4:a.className="revisada";a.style.backgroundImage="url('/pf/img/bg_re.png')";break}a.style.backgroundRepeat="repeat-y";situacaoLinha=c}function setMensagens(f,l,c,j,a){var h=f;var e=l;var b=c;var k="";var g="";var d="";if(h===""||h===undefined){k='<div class="msg-off"></div>'}else{k='<div class="msg-on">VA</div>'}if(e===""||e===undefined){g='<div class="msg-off"></div>'}else{g='<div class="msg-on">VE</div>'}if(b===""||b===undefined){d='<div class="msg-off"></div>'}else{d='<div class="msg-on">AU</div>'}j.innerHTML=k+""+g+""+d}function selecionaLinhasValidacao(f,a){zeraArrayValida(f);zeraLinhasSelecionadas(f);var c=1;var e=1;if($(a).prop("checked")){$("#fix"+f+" tr:gt(0)").each(function(){if(!($(this).hasClass("tr-selecionada"))&&!($(this).find("td:eq(0)").hasClass("validada"))&&!($(this).find("td:eq(0)").hasClass("revisao"))){$(this).find("td:lt(13)").css({backgroundColor:"rgba(168, 178, 213, 1)"});$(this).toggleClass("tr-selecionada");$("#seq_"+f+"_"+e).toggleClass("selecionada").toggleClass("div-linha");c++}e++});if(c>1){$("input[name=id_"+f+"]").each(function(b){if(!($(this).parent().parent().hasClass("validada"))&&!($(this).parent().parent().hasClass("revisao"))){b=Number($(this).val());arrayValida(b,f)}})}else{if(c==1){var d="O sistema verificou que todas as linhas j&aacute; est&atilde;o validadas ou foram enviadas para revisao.";switch(f){case"ALI":if(qtdALI==1){d="N&atilde;o h&aacute; Arquivos L&oacute;gicos Internos a serem validados."}break;case"AIE":if(qtdAIE==1){d="N&atilde;o h&aacute; Arquivos de Interface Externa a serem validados."}break;case"EE":if(qtdEE==1){d="N&atilde;o h&aacute; Entradas Externas a serem validadas."}break;case"SE":if(qtdSE==1){d="N&atilde;o h&aacute; Sa&iacute;das Externas a serem validadas."}break;case"CE":if(qtdCE==1){d="N&atilde;o h&aacute; Consultas Externas a serem validadas."}break;case"OU":if(qtdOU==1){d="N&atilde;o h&aacute; Outras Funcionalidades a serem validadas."}break}swal({title:"Alerta",text:d,type:"error",html:true,confirmButtonText:"Entendi, obrigado!"});$(a).prop("checked",false)}}}habilitaBotaoValidar(f);habilitaBotaoRevisar(f)}function selecionaLinhaValidacao(a,d,c,b){iWait("w_"+c.toLowerCase(),true);$.post("/pf/DIM.Gateway.php",{i:b,t:c.toLowerCase(),arq:57,tch:1,sub:-1,dlg:1},function(e){if(e.situacao==2||e.situacao==3){arrayValida(b,c);swal({title:"Alerta",text:"Esta linha j&aacute; est&aacute; validada ou j&aacute; foi enviada para revis&atilde;o.<br /><br />Deseja desfazer a a&ccedil;&atilde;o?",type:"warning",showCancelButton:true,confirmButtonColor:"#5cb85c",cancelButtonColor:"#f0ad4e",confirmButtonText:"Sim, por favor",cancelButtonText:"Não, obrigado",closeOnConfirm:true,html:true},function(f){if(f){switch(c){case"ALI":validarFuncao("ali",arrValidaALI,"nvalidar");break;case"AIE":validarFuncao("aie",arrValidaAIE,"nvalidar");break;case"EE":validarFuncao("ee",arrValidaEE,"nvalidar");break;case"SE":validarFuncao("se",arrValidaSE,"nvalidar");break;case"CE":validarFuncao("ce",arrValidaCE,"nvalidar");break;case"OU":validarFuncao("ou",arrValidaOU,"nvalidar");break}}else{arrayValida(b,c)}});iWait("w_"+c.toLowerCase(),false)}else{if(e.situacao==4&&ac==="re"){arrayValida(b,c);swal({title:"Alerta",text:"Esta linha j&aacute; foi revisada.",type:"warning",showCancelButton:true,confirmButtonColor:"#5cb85c",cancelButtonColor:"#f0ad4e",confirmButtonText:"Sim, por favor",cancelButtonText:"Não, obrigado",closeOnConfirm:true,html:true})}else{iWait("w_"+c.toLowerCase(),false);if($(a).hasClass("selecionada")){$(d).each(function(){$(this).find("td:lt(13)").css({backgroundColor:"rgba(255, 255, 255, 1)"});if($("#select-"+c).prop("checked")){$("#select-"+c).prop("checked",false)}$(d).toggleClass("tr-selecionada")})}else{$(d).each(function(){$(this).find("td:lt(13)").css({backgroundColor:"rgba(168, 178, 213, 1)"})});$(d).toggleClass("tr-selecionada")}$(a).toggleClass("selecionada").toggleClass("div-linha");arrayValida(b,c);verificaSelecionados(c);habilitaBotaoValidar(c);habilitaBotaoRevisar(c)}}iWait("w_"+c.toLowerCase(),false)},"json")}function habilitaBotaoValidar(a){switch(a){case"ALI":if(arrValidaALI.length>0){$("#btn_validar_"+a).prop("disabled",false)}else{$("#btn_validar_"+a).prop("disabled",true)}break;case"AIE":if(arrValidaAIE.length>0){$("#btn_validar_"+a).prop("disabled",false)}else{$("#btn_validar_"+a).prop("disabled",true)}break;case"EE":if(arrValidaEE.length>0){$("#btn_validar_"+a).prop("disabled",false)}else{$("#btn_validar_"+a).prop("disabled",true)}break;case"SE":if(arrValidaSE.length>0){$("#btn_validar_"+a).prop("disabled",false)}else{$("#btn_validar_"+a).prop("disabled",true)}break;case"CE":if(arrValidaCE.length>0){$("#btn_validar_"+a).prop("disabled",false)}else{$("#btn_validar_"+a).prop("disabled",true)}break;case"OU":if(arrValidaOU.length>0){$("#btn_validar_"+a).prop("disabled",false)}else{$("#btn_validar_"+a).prop("disabled",true)}break}}function habilitaBotaoRevisar(a){switch(a){case"ALI":if(arrValidaALI.length>0){$("#btn_revisar_"+a).prop("disabled",false)}else{$("#btn_revisar_"+a).prop("disabled",true)}break;case"AIE":if(arrValidaAIE.length>0){$("#btn_revisar_"+a).prop("disabled",false)}else{$("#btn_revisar_"+a).prop("disabled",true)}break;case"EE":if(arrValidaEE.length>0){$("#btn_revisar_"+a).prop("disabled",false)}else{$("#btn_revisar_"+a).prop("disabled",true)}break;case"SE":if(arrValidaSE.length>0){$("#btn_revisar_"+a).prop("disabled",false)}else{$("#btn_revisar_"+a).prop("disabled",true)}break;case"CE":if(arrValidaCE.length>0){$("#btn_revisar_"+a).prop("disabled",false)}else{$("#btn_revisar_"+a).prop("disabled",true)}break;case"OU":if(arrValidaOU.length>0){$("#btn_revisar_"+a).prop("disabled",false)}else{$("#btn_revisar_"+a).prop("disabled",true)}break}}function validarFuncao(e,d,c){var b=e.toUpperCase();var f=$("#responsavel").val();iWait("w_"+e,true);$.post("/pf/DIM.Gateway.php",{t:e,l:d,a:c,r:f,arq:33,tch:0,sub:-1,dlg:1,ic:idContagem},function(a){if(a[0].msg==="erro"){swal({title:"Alerta",text:"O sistema n&atilde;o conseguiu validar/enviar para revis&atilde;o as linhas selecionadas. Por favor entre em contato com o administrador.",type:"error",html:true,confirmButtonText:"Obrigado!"})}else{for(x=0;x<d.length;x++){setSituacao(c==="validar"?2:(c==="nvalidar"?1:3),"cell1_"+b+"_"+d[x]);$("#cell1_"+b+"_"+d[x]).removeClass("validada nvalidar revisao").addClass(c==="validar"?"validada":(c==="nvalidar"?"nvalidar":"revisao"))}swal({title:"Informa&ccedil;&atilde;o",text:(c==="validar"?"As linhas selecionadas foram validadas.":(c==="nvalidar"?"A linha selecionada retornou ao status <strong>N&atilde;o Validada</strong>.":"As linhas foram enviadas para revis&atilde;o.")),type:"success",html:true,confirmButtonText:"Obrigado!"})}iWait("w_"+e,false);zeraArrayValida(b);zeraLinhasSelecionadas(b);habilitaBotaoValidar(b);habilitaBotaoRevisar(b);$("#select-"+b).prop("checked",false)},"json")}function verificaSelecionados(a){switch(a){case"ALI":if(Number(arrValidaALI.length)===Number((getQtdAtual(a)-1))){$("#select-"+a).prop("checked",true)}break;case"AIE":if(Number(arrValidaAIE.length)===Number((getQtdAtual(a)-1))){$("#select-"+a).prop("checked",true)}break;case"EE":if(Number(arrValidaEE.length)===Number((getQtdAtual(a)-1))){$("#select-"+a).prop("checked",true)}break;case"SE":if(Number(arrValidaSE.length)===Number((getQtdAtual(a)-1))){$("#select-"+a).prop("checked",true)}break;case"CE":if(Number(arrValidaCE.length)===Number((getQtdAtual(a)-1))){$("#select-"+a).prop("checked",true)}break;case"OU":if(Number(arrValidaOU.length)===Number((getQtdAtual(a)-1))){$("#select-"+a).prop("checked",true)}break}}function gerarSenhaRandomica(c,b,d){if(!($(c).prop("disabled"))&&!($(b).prop("disabled"))){var a=Math.random().toString(36).slice(-10);$(c).val(a);$(b).val(a);if(d!==""){$(d).focus()}}}function sobre(){var a='<div class="jumbotron"><img src="/pf/img/logo_200px.png" width="80" height="72"><h3>PF.&nbsp;Dimension</h3><p align="justify">Nos orgulhamos de ser um software 100% brasileiro.<br />Vers&atilde;o est&aacute;vel: 1.0.1<br />';swal({title:"",text:a,html:true,confirmButtonText:"Ok!"})}function consultaGravatar(b,a){$.post("/pf/DIM.Gateway.php",{user_name:b,arq:24,tch:1,sub:-1,dlg:0},function(c){if(c[0].existe){$(a).attr("src",c[0].img)}else{$(a).attr("src","/pf/img/user.jpg")}},"json")}function consultaGravatar2(b){var c="http://www.gravatar.com/avatar/";var d="?d=http%3A%2F%2Fpfdimension.com.br/pf/img/user.jpg";var a=c+CryptoJS.MD5(b)+d;return a}function verificaCaptcha(b,a,c){if($(b).val().length===4||c){$.post("/pf/DIM.Gateway.php",{c:sha1($(b).val().toLowerCase()),arq:53,tch:1,sub:-1,dlg:1},function(d){if(d[0].confere){$(a).addClass("fa-check-circle");$(a).removeClass("fa-dot-circle-o")}else{swal({title:"Alerta",text:"A letras e/ou os n&uacute;meros exibidos na figura n&atilde;o conferem com o que foi digitado. Voc&ecirc; pode clicar na imagem para gerar outro c&oacute;digo.",type:"error",html:true,confirmButtonText:"Obrigado, vou corrigir!"});$(b).val("")}},"json")}else{$(a).removeClass("fa-check-circle");$(a).addClass("fa-dot-circle-o")}}function verificaPostCaptcha(a){}function validaEmail(a,c){var b=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(!b.test(a)){swal({title:"Alerta",text:"Este email n&atilde;o possui um formato v&aacute;lido.",type:"error",html:true,confirmButtonText:"Obrigado, vou corrigir!"},function(){if(typeof c!=="undefined"){$(c).get(0).focus()}});return false}return true}function getGerenteProjeto(a){$.post("/pf/DIM.Gateway.php",{i:a,arq:23,tch:1,sub:-1,dlg:1},function(b){$("#gerente_projeto").val(b.user_email);$("#nome_gerente_projeto").val(b.complete_name)},"json")}function verificaBaseline(a){iWait("w_id_baseline",true);$.post("/pf/DIM.Gateway.php",{i:a,arq:52,tch:1,sub:-1,dlg:1},function(b){if(b.id==0&&abAtual==2){swal({title:"Alerta",text:"Esta baseline ainda n&atilde;o possui uma contagem associada, voc&ecirc; pode continuar, entretanto n&atilde;o poder&aacute; inserir Altera&ccedil;&otilde;es e/ou Exclus&otilde;es em suas Fun&ccedil;&otilde;es de Dados/Transa&ccedil;&atilde;o.<hr><strong>ATEN&Ccedil;&Atilde;O</strong>: o sistema ir&aacute; criar automaticamente a contagem de Baseline.",type:"warning",html:true,confirmButtonText:"Obrigado pela informação"});getGerenteProjeto($("#contagem_id_projeto").val())}else{if(b.id>0&&(abAtual==3||abAtual==4)){swal({title:"Alerta",text:"Esta baseline j&aacute; possui uma contagem associada.",type:"error",html:true,confirmButtonText:"Obrigado."});$("#contagem_id_baseline").val(0)}else{if(ac==="in"&&abAtual==2){$("#id_linguagem").val(b.id_linguagem).trigger("change");$("#id_tipo_contagem").val(b.id_tipo_contagem);$("#id_etapa").val(b.id_etapa);$("#id_industria").val(b.id_industria);$("#id_banco_dados").val(b.id_banco_dados);$("#id_processo").val(b.id_processo);$("#id_processo_gestao").val(b.id_processo_gestao);getGerenteProjeto($("#contagem_id_projeto").val())}}}if(a>0){$("#span-resumo-baseline").attr({"data-content":b.sigla+" - "+b.descricao+"<hr>"+b.resumo})}else{$("#span-resumo-baseline").attr({"data-content":"Selecione uma baseline"})}iWait("w_id_baseline",false)},"json")}function refreshCaptcha(d,c){var b=new Date();var a=b.getTime();$(d).attr("src","/pf/vendor/huge/tools/showCaptcha.php?"+a);$(c).val("").get(0).focus()}function getInternetExplorerVersion(){var c=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}}return c}function naoAutorizado(c,a){a!==null?a.setAttribute("data-toggle",""):null;swal({title:"Alerta",text:"Voc&ecirc; n&atilde;o est&aacute; autorizado a realizar esta opera&ccedil;&atilde;o ("+c+").",type:"error",html:true,confirmButtonText:"Ok, entendi!"})}function pArquivosReferenciados(b){lstId=b>0?$("#lst-ar-baseline"):$("#lst-ar-projeto");var a=$("#transacao_descricao_ar").tagsManager("tags");var c=$("#transacao_tabela").val();$.post("/pf/DIM.Gateway.php",{i:b,arq:0,tch:1,sub:-1,dlg:1},function(f){for(x=0;x<f.length;x++){var d=f[x].arquivo+"."+f[x].funcao;var e;if(a.indexOf(d)===-1){switch(Number(f[x].situacao)){case 1:e="btn-warning";break;case 2:e="btn-success";break;case 3:e="btn-info";break;case 4:e="btn-primary";break}$(lstId).append("<li class='btn "+e+" btn-li' onclick=\"removeArList($(this), $('#transacao_descricao_ar'));\""+(null!==f[x].obs_funcao?' data-toggle="tooltip" data-placement="top" title="<small>'+f[x].obs_funcao+(c==="EE"?"<br /><i class='fa fa-info-circle'></i>&nbsp;N&atilde;o &aacute; aconselh&aacute;vel que Entradas Externas insiram dados em AIEs":"")+'</small>"':"")+">"+f[x].arquivo+"."+f[x].funcao+"</li>")}}$('[data-toggle="tooltip"]').tooltip({html:true})},"json");return true}function pTipoDadoAR(a,d,c){var e=c==="B"?$("#lst-td-ar-baseline"):$("#lst-td-ar-projeto");var g=$("#transacao_descricao_td").tagsManager("tags");var b=a.toString();var f;if(a.length<1){$(e).append("<div style='text-align: center;'><li class='btn btn-warning btn-li'>N&atilde;o h&aacute; Arquivos Referenciados selecionados</li></div>")}else{$.post("/pf/DIM.Gateway.php",{i:d,t:c,tags:b,arq:0,tch:1,sub:-1,dlg:1},function(k){for(x=0;x<k.length;x++){var j=k[x].funcao.split(",");for(y=0;y<j.length;y++){var h=k[x].arquivo+"."+j[y];if(g.indexOf(h)===-1){switch(Number(k[0].situacao)){case 1:f="btn-warning";break;case 2:f="btn-success";break;case 3:f="btn-info";break;case 4:f="btn-primary";break}$(e).append("<li class='btn "+f+" btn-li' onclick=\"removeArList($(this), $('#transacao_descricao_td'));\">"+k[x].arquivo+"."+j[y]+"</li>")}}}},"json")}}function removeArList(a,d){$(d).tagsManager("pushTag",$(a).html());$('[data-toggle="tooltip"]').tooltip("hide");$(a).remove()}function atualizaItensArquivosReferenciados(a,b){if(b==="PAT"){if($(a).prop("checked")){for(x=1;x<getQtdAtual("ALI");x++){srcItems.push("ALI-"+$("#funcao_ALI_"+x).html())}for(x=1;x<getQtdAtual("AIE");x++){srcItems.push("AIE-"+$("#funcao_AIE_"+x).html())}}else{for(x=1;x<getQtdAtual("ALI");x++){srcItems.splice(srcItems.indexOf("ALI-"+$("#funcao_ALI_"+x).html()),1)}for(x=1;x<getQtdAtual("AIE");x++){srcItems.splice(srcItems.indexOf("AIE-"+$("#funcao_AIE_"+x).html()),1)}}}else{if(b==="PAB"){if($(a).prop("checked")){$.post("/pf/DIM.Gateway.php",{i:$("#contagem_id_projeto").val(),a:"3",arq:0,tch:1,sub:-1,dlg:1},function(c){for(x=0;x<c.length;x++){srcItems.push(c[x].arquivo+"-"+c[x].funcao)}},"json")}else{$.post("/pf/DIM.Gateway.php",{i:$("#contagem_id_projeto").val(),a:"3",arq:0,tch:1,sub:-1,dlg:1},function(c){for(x=0;x<c.length;x++){srcItems.splice(srcItems.indexOf(c[x].arquivo+"-"+c[x].funcao),1)}},"json")}}else{if(b==="PAP"){if($(a).prop("checked")){$.post("/pf/DIM.Gateway.php",{i:$("#contagem_id_projeto").val(),a:"2",arq:0,tch:1,sub:-1,dlg:1},function(c){for(x=0;x<c.length;x++){srcItems.push(c[x].arquivo+"-"+c[x].funcao)}},"json")}else{$.post("/pf/DIM.Gateway.php",{i:$("#contagem_id_projeto").val(),a:"2",arq:0,tch:1,sub:-1,dlg:1},function(c){for(x=0;x<c.length;x++){srcItems.splice(srcItems.indexOf(c[x].arquivo+"-"+c[x].funcao),1)}},"json")}}else{if(b==="PAV"){if($(a).prop("checked")){$.post("/pf/DIM.Gateway.php",{i:$("#contagem_id_projeto").val(),a:"1",arq:0,tch:1,sub:-1,dlg:1},function(c){for(x=0;x<c.length;x++){srcItems.push(c[x].arquivo+"-"+c[x].funcao)}},"json")}else{$.post("/pf/DIM.Gateway.php",{i:$("#contagem_id_projeto").val(),a:"1",arq:0,tch:1,sub:-1,dlg:1},function(c){for(x=0;x<c.length;x++){srcItems.splice(srcItems.indexOf(c[x].arquivo+" - "+c[x].funcao),1)}},"json")}}}}}return true}function atualizaItensTiposRegistros(a,b){if($(a).prop("checked")){$.post("/pf/DIM.Gateway.php",{i:$("#contagem_id_projeto").val(),a:"1",arq:50,tch:1,sub:-1,dlg:1},function(d){for(x=0;x<d.length;x++){var c=(d[x].descricao_tr).split(",");for(y=0;y<c.length;y++){trItems.push(d[x].arquivo+"-"+c[y])}}},"json")}else{$.post("/pf/DIM.Gateway.php",{i:$("#contagem_id_projeto").val(),a:"1",arq:50,tch:1,sub:-1,dlg:1},function(d){for(x=0;x<d.length;x++){var c=(d[x].descricao_tr).split(",");for(y=0;y<c.length;y++){trItems.splice(trItems.indexOf(d[x].arquivo+"-"+c[y]),1)}}},"json")}}function atualizaItensFuncoes(a,b){$.post("/pf/DIM.Gateway.php",{t:a.toLowerCase(),arq:2,tch:1,sub:-1,dlg:1},function(d){if(d.length>0){$("#"+b+"_funcao").replaceWith('<select id="'+b+'_funcao" class="form-control input_style" onchange="retornaInputFuncao($(this),\''+b+"','"+a.toLowerCase()+"');\"></select>");var c=$("#"+b+"_funcao");c.empty();c.append('<option value="0">Selecione uma função...</option>');for(x=0;x<d.length;x++){c.append('<option value="'+d[x].id+'">'+(Number(d[x].id_gerador)>0?"P":"B")+" > "+("0000000"+d[x].id_contagem).slice(-7)+" > "+d[x].operacao+" > "+formattedDate(d[x].data_cadastro,false,false)+" > "+d[x].sigla+" > "+d[x].funcao+"</option>")}}else{swal({title:"Alerta",text:"N&atilde;o h&aacute; funcionalidades cadastradas nas baselines.",type:"error",html:true,confirmButtonText:"Obrigado, vou verificar!"})}},"json")}function retornaInputFuncao(k,j,d){var g=$(k).find("option:selected").text().split(" > ")[5];var h=$(k).val();var e=j==="dados"?42:j==="transacao"?44:43;$.post("/pf/DIM.Gateway.php",{i:h,b:d,arq:e,tch:1,sub:-1,dlg:1},function(a){var b=Number(a[0].pfb);$("#"+j+"_td").val(a[0].td);j==="dados"?$("#"+j+"_tr").val(a[0].tr):$("#"+j+"_ar").val(a[0].ar);$("#"+j+"_complexidade").val(a[0].complexidade);$("#"+j+"_fonte").val(a[0].fonte);$("#"+j+"_pfb").val(b.toFixed(4));$("#"+j+"_observacoes").val(a[0].obs_funcao);$("#"+j+"_observacoes_validacao").val(a[0].obs_validar);$("#"+j+"_metodo").val(a[0].id_metodo);verificaMetodo(j,$("#"+j+"_metodo"),$("#"+j+"_id_roteiro"),$("#"+j+"_operacao"));if(j==="dados"){arrTR=a[0].descricaoTR;jQuery("#"+j+"_descricao_tr").tagsManager("empty");for(x=0;x<arrTR.length;x++){jQuery("#"+j+"_descricao_tr").tagsManager("pushTag",arrTR[x])}}else{arrAR=a[0].descricaoAR;jQuery("#"+j+"_descricao_ar").tagsManager("empty");for(x=0;x<arrAR.length;x++){jQuery("#"+j+"_descricao_ar").tagsManager("pushTag",arrAR[x])}}arrTD=a[0].descricaoTD;jQuery("#"+j+"_descricao_td").tagsManager("empty");for(x=0;x<arrTD.length;x++){jQuery("#"+j+"_descricao_td").tagsManager("pushTag",arrTD[x])}$("#"+j+"_funcao").replaceWith('<input type="text" class="form-control input_style" id="'+j+'_funcao" name="'+j+'_funcao" autocomplete="off" value="'+g+'">')},"json")}function getTimeStamp(a){timeMili=new Date(a.split("/").reverse().join("/")).getTime();sobraMili=(timeMili%aDay)+1;timeStamp=timeMili+aDay-sobraMili;return timeStamp}function sha1(s){var c=function(B,A){var j=(B<<A)|(B>>>(32-A));return j};var t=function(C){var B="";var A;var j;for(A=7;A>=0;A--){j=(C>>>(A*4))&15;B+=j.toString(16)}return B};var f;var v,u;var b=new Array(80);var l=1732584193;var h=4023233417;var g=2562383102;var e=271733878;var d=3285377520;var r,q,o,n,m;var w;s=unescape(encodeURIComponent(s));var a=s.length;var k=[];for(v=0;v<a-3;v+=4){u=s.charCodeAt(v)<<24|s.charCodeAt(v+1)<<16|s.charCodeAt(v+2)<<8|s.charCodeAt(v+3);k.push(u)}switch(a%4){case 0:v=2147483648;break;case 1:v=s.charCodeAt(a-1)<<24|8388608;break;case 2:v=s.charCodeAt(a-2)<<24|s.charCodeAt(a-1)<<16|32768;break;case 3:v=s.charCodeAt(a-3)<<24|s.charCodeAt(a-2)<<16|s.charCodeAt(a-1)<<8|128;break}k.push(v);while((k.length%16)!=14){k.push(0)}k.push(a>>>29);k.push((a<<3)&4294967295);for(f=0;f<k.length;f+=16){for(v=0;v<16;v++){b[v]=k[f+v]}for(v=16;v<=79;v++){b[v]=c(b[v-3]^b[v-8]^b[v-14]^b[v-16],1)}r=l;q=h;o=g;n=e;m=d;for(v=0;v<=19;v++){w=(c(r,5)+((q&o)|(~q&n))+m+b[v]+1518500249)&4294967295;m=n;n=o;o=c(q,30);q=r;r=w}for(v=20;v<=39;v++){w=(c(r,5)+(q^o^n)+m+b[v]+1859775393)&4294967295;m=n;n=o;o=c(q,30);q=r;r=w}for(v=40;v<=59;v++){w=(c(r,5)+((q&o)|(q&n)|(o&n))+m+b[v]+2400959708)&4294967295;m=n;n=o;o=c(q,30);q=r;r=w}for(v=60;v<=79;v++){w=(c(r,5)+(q^o^n)+m+b[v]+3395469782)&4294967295;m=n;n=o;o=c(q,30);q=r;r=w}l=(l+r)&4294967295;h=(h+q)&4294967295;g=(g+o)&4294967295;e=(e+n)&4294967295;d=(d+m)&4294967295}w=t(l)+t(h)+t(g)+t(e)+t(d);return w.toLowerCase()}function detalheItem(d,a){var c;if(d[0]!=0){var b=d.split(";");if(b[0]!=0){$.post("/pf/DIM.Gateway.php",{i:b[0],arq:25,tch:1,sub:-1,dlg:1},function(e){c="<strong>Sigla</strong>: "+e.sigla+'<br /><strong>Descri&ccedil;&atilde;o</strong>:<p align="justify">'+e.descricao+"</p><strong>Fator</strong>: "+Number(e.fator).toFixed(4)+"<br /><strong>Fonte</strong>: "+e.fonte+"<br /><strong>Operacao</strong>: "+(e.operacao).replace(/;/g," ")+"<br /><strong>Aplica-se a</strong>: "+(e.aplica).replace(/;/g," ")+"<br /><strong>Tipo</strong>: "+(e.tipo==="A"?"(A) Ajusta":"(F) Fixo")+"<br /><strong>Operador</strong>: "+(e.operador==0?"(M) Multiplica":"(D) Divide");$("#btn-"+a+"-detalhe-fator").attr("data-content",c)},"json")}else{$("#btn-"+a+"-detalhe-fator").attr("data-content","Por favor, selecione um Fator de Impacto.")}}else{$("#btn-"+a+"-detalhe-fator").attr("data-content","Por favor, selecione um Fator de Impacto.")}}function isNumberMy(a){return typeof a=="number"||!isNaN(a)}function listaFuncao(c,b,e,d,g,a){iWait("w_"+b,true);$("#add"+b.toUpperCase()).empty();switch(b){case"ali":qtdALI=1;break;case"aie":qtdAIE=1;break;case"ee":qtdEE=1;break;case"se":qtdSE=1;break;case"ce":qtdCE=1;break}$.post("/pf/DIM.Gateway.php",{i:c,t:b,f:d,o:g,tpo:a,arq:34,tch:1,sub:-1,dlg:1},function(f){for(c=0;c<f.length;c++){var j=e.insertRow(-1);var k=Number(f[c].pfa);var h=Number(f[c].pfb);insereLinha(f[c].id,b.toUpperCase(),j,f[c].operacao,f[c].funcao,f[c].td,(d==="dados"?f[c].tr:f[c].ar),f[c].complexidade,h.toFixed(4),f[c].siglaFator,k.toFixed(4),f[c].obsFuncao,f[c].situacao,f[c].entrega,f[c].lido,f[c].nLido,false,f[c].isMudanca,f[c].faseMudanca,f[c].percentualFase,f[c].fd,f[c].isCrud,0,b==="ali"?f[c].fe:0)}iWait("w_"+b,false)},"json")}function estabeleceQuantidadeEntregas(b){var a=Number($("#entregas").val());$("#"+b+"_entrega").trigger("touchspin.updatesettings",{max:a})}function getBaseCalculo(){var g=config_isEng&&isEng?Number($("#pct-pfa-eng").html()):0;var d=config_isDes&&isDes?Number($("#pct-pfa-des").html()):0;var c=config_isImp&&isImp?Number($("#pct-pfa-imp").html()):0;var f=config_isTes&&isTes?Number($("#pct-pfa-tes").html()):0;var b=config_isHom&&isHom?Number($("#pct-pfa-hom").html()):0;var e=config_isImpl&&isImpl?Number($("#pct-pfa-impl").html()):0;var a=Number((g+d+c+f+b+e)*config_aumentoEsforco).toFixed(4);return a}function number_format(g,f,a,h){g=(g+"").replace(/[^0-9+\-Ee.]/g,"");var c=!isFinite(+g)?0:+g,b=!isFinite(+f)?0:Math.abs(f),k=(typeof h==="undefined")?",":h,d=(typeof a==="undefined")?".":a,j="",e=function(o,m){var l=Math.pow(10,m);return""+Math.round(o*l)/l};j=(b?e(c,b):""+Math.round(c)).split(".");if(j[0].length>3){j[0]=j[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,k)}if((j[1]||"").length<b){j[1]=j[1]||"";j[1]+=new Array(b-j[1].length+1).join("0")}return j.join(d)}function pushState(c,a,b){window.history.pushState({url:""+c+""},a,b);return true}function inserirContagem(e){if(!(validaFormContagem())){$("#"+e).removeClass("disabled");swal({title:"Alerta",text:msg,type:"error",html:true,confirmButtonText:"Entendi!"});return false}iWaitMenuContagem("id-contagem",true,"fa fa-floppy-o");if(abAtual!=5){var d=$("input[type=radio][name=expoente]:checked");var c=d.length>0?d.val():Number("0.35").toFixed(2)}var b={id:idContagem,cabecalho_funcao:$("#cabecalho_funcao").val(),id_abrangencia:$("#id_abrangencia").val(),acao:$("#acao").val(),id_cliente:$("#contagem_id_cliente").val(),id_contrato:$("#contagem_id_contrato").val(),id_projeto:$("#contagem_id_projeto").val(),responsavel:$("#responsavel").val(),entregas:$("#entregas").val(),id_linguagem:$("#id_linguagem").val(),id_tipo_contagem:$("#id_tipo_contagem").val(),id_etapa:$("#id_etapa").val(),id_industria:$("#id_industria").val(),id_processo:$("#id_processo").val(),id_processo_gestao:$("#id_processo_gestao").val(),proposito:$("#proposito").val(),escopo:$("#escopo").val(),ordem_servico:$("#ordem_servico").val(),id_banco_dados:$("#id_banco_dados").val(),gerente_projeto:$("#gerente_projeto").val(),id_baseline:$("#contagem_id_baseline").val(),id_orgao:$("#id-orgao").val(),privacidade:$("#privacidade").prop("checked")?1:0,previsao_inicio:$("#previsao_inicio").val(),produtividade_global:$("#produtividade_global").html(),chk_produtividade_global:$("#chk_produtividade_global").prop("checked")?1:0,hlt:$("#hlt").html(),isFt:$("#chk-ft").prop("checked")?1:0,ft:$("#span-ft").html(),"pct-eng":$("#pct-eng").html(),"prod-eng":$("#prod-eng").val(),"prof-eng":1,"perf-eng":"","chk-eng":1,"is-f-eng":1,"desc-f-eng":$("#desc-f-eng").html(),"pct-des":config_isDes?$("#pct-des").html():0,"prod-des":config_isDes?$("#prod-des").val():0,"prof-des":1,"perf-des":"","chk-des":1,"is-f-des":config_isDes?1:0,"desc-f-des":config_isDes?$("#desc-f-des").html():"","pct-imp":config_isImp?$("#pct-imp").html():0,"prod-imp":config_isImp?$("#prod-imp").val():0,"prof-imp":1,"perf-imp":"","chk-imp":config_isImp?1:0,"is-f-imp":config_isImp?1:0,"desc-f-imp":config_isImp?$("#desc-f-imp").html():"","pct-tes":config_isTes?$("#pct-tes").html():0,"prod-tes":config_isTes?$("#prod-tes").val():0,"prof-tes":1,"perf-tes":"","chk-tes":config_isTes?1:0,"is-f-tes":config_isTes?1:0,"desc-f-tes":config_isTes?$("#desc-f-tes").html():"","pct-hom":config_isHom?$("#pct-hom").html():0,"prod-hom":config_isHom?$("#prod-hom").val():0,"prof-hom":1,"perf-hom":"","chk-hom":config_isHom?1:0,"is-f-hom":config_isHom?1:0,"desc-f-hom":config_isHom?$("#desc-f-hom").html():"","pct-impl":config_isImpl?$("#pct-impl").html():0,"prod-impl":config_isImpl?$("#prod-impl").val():0,"prof-impl":1,"perf-impl":"","chk-impl":config_isImpl?1:0,"is-f-impl":config_isImpl?1:0,"desc-f-impl":config_isImpl?$("#desc-f-impl").html():"",expoente:c,calculado:($("#calculado").html()).length>0?$("#calculado").html():0,"tempo-desenvolvimento":($("#tempo-desenvolvimento").html()).length>0?$("#tempo-desenvolvimento").html():0,"regiao-impossivel":($("#regiao-impossivel").html()).length>0?$("#regiao-impossivel").html():0,"menor-custo":($("#menor-custo").html()).length>0?$("#menor-custo").html():0,hpc:$("#hpc").val(),hpa:$("#hpa").val(),"valor-hpc":Number($("#valor-hpc").val()),"valor-hpa":Number($("#valor-hpa").val()),"custo-total":Number($("#custo-total").html()),"valor-pfa-contrato":Number($("#valor-pfa-contrato").val()),"aumento-esforco":config_aumentoEsforco,"fator-reducao-cronograma":config_fatorReducaoCronograma,"tipo-projeto":$("#tipo-projeto").val(),"esforco-total":Number($("#esforco-total").val()),"tamanho-pfa":Number($("#tamanho-pfa").html()),"span-produtividade-media":Number($("#span-produtividade-media").html()),is_contagem_auditoria:isContagemAuditoria==1?1:0,id_roteiro:idRoteiro,arq:20,tch:0,sub:-1,dlg:1};var a={id:idContagem,cabecalho_funcao:$("#cabecalho_funcao").val(),id_abrangencia:$("#id_abrangencia").val(),acao:$("#acao").val(),id_cliente:$("#contagem_id_cliente").val(),id_contrato:$("#contagem_id_contrato").val(),id_projeto:$("#contagem_id_projeto").val(),responsavel:$("#responsavel").val(),entregas:$("#entregas").val(),id_linguagem:$("#id_linguagem").val(),id_tipo_contagem:$("#id_tipo_contagem").val(),id_etapa:$("#id_etapa").val(),id_industria:$("#id_industria").val(),id_processo:$("#id_processo").val(),id_processo_gestao:$("#id_processo_gestao").val(),proposito:$("#proposito").val(),escopo:$("#escopo").val(),ordem_servico:$("#ordem_servico").val(),id_banco_dados:$("#id_banco_dados").val(),gerente_projeto:$("#gerente_projeto").val(),id_baseline:$("#contagem_id_baseline").val(),id_orgao:$("#id-orgao").val(),privacidade:$("#privacidade").prop("checked")?1:0,arq:20,tch:0,sub:-1,dlg:1};$.post("/pf/DIM.Gateway.php",abAtual==5?a:b,function(f){$("#id").val(f[0].id);if(f[0].acao==="in"){$("#span_btn_contagem").html("Atualizar as informa&ccedil;&otilde;es");$("#acao").val("al");swal({title:"Informa&ccedil;&atilde;o",text:"A Contagem foi <strong>INSERIDA</strong> com sucesso #ID: "+f[0].idPad+", você já pode adicionar "+(abAtual==5?"as SCU na SNAP Counting Sheet.":"as funções de dados e transação.")+(f[0].idContagemBaselineInserida>0?"<hr>O sistema tamb&eacute;m criou automaticamente uma contagem para esta Baseline":""),type:"success",html:true,confirmButtonText:"Obrigado!"});$("#span_id_contagem").html(f[0].idPad);$("#li-ane").removeClass("disabled");$("#li-est").removeClass("disabled");$("#li-fin").removeClass("disabled");$("#li-coc").removeClass("disabled");$("#privacidade").prop("disabled",false)}else{if(f[0].acao==="al"||f[0].acao==="re"){swal({title:"Informa&ccedil;&atilde;o",text:"A Contagem #ID: "+f[0].idPad+" foi <strong>ATUALIZADA</strong> com sucesso!",type:"success",html:true,confirmButtonText:"Obrigado!"})}}$("#"+e).removeClass("disabled");iWaitMenuContagem("id-contagem",false,"fa fa-floppy-o");idContagem=f[0].id},"json")}function validaFormContagem(){var a=true;if(Number($("#contagem_id_cliente").val())==0&&!(abAtual==3||abAtual==4)){a=false;msg="O campo <strong>#ID CLIENTE</strong> &eacute; de preenchimento obrigat&oacute;rio."}else{if(Number($("#contagem_id_contrato").val())==0&&!(abAtual==3||abAtual==4)){a=false;msg="O campo <strong>#ID CONTRATO</strong> &eacute; de preenchimento obrigat&oacute;rio"}else{if(Number($("#contagem_id_projeto").val())==0&&!(abAtual==3||abAtual==4)){a=false;msg="O campo <strong>#ID PROJETO</strong> &eacute; de preenchimento obrigat&oacute;rio."}else{if(Number($("#contagem_id_baseline").val())==0&&(abAtual==2||abAtual==3)){a=false;msg="O campo <strong>ID BASELINE</strong> &eacute; de preenchimento obrigat&oacute;rio."}else{if(Number($("#id-orgao").val())==0&&!(abAtual==3||abAtual==4)){a=false;msg="O campo <strong>ID &Oacute;RG&Atilde;O</strong> &eacute; de preenchimento obrigat&oacute;rio."}else{if($("#responsavel").val()===""){a=false;msg="O campo <strong>RESPONS&AACUTE;VEL</strong> &eacute; de preenchimento obrigat&oacute;rio."}else{if(Number($("#entregas").val())==0||Number($("#entregas").val())>50||$("#entregas").val()===""){if(Number($("#entregas").val())>50){$("#entregas").val("50")}else{if(Number($("#entregas").val())==0){$("#entregas").val("1")}}a=false;msg="O campo <strong>ENTREGAS</strong> &eacute; de preenchimento obrigat&oacute;rio. P.Ex. um número entre 1 (um) e 50 (cinquenta)."}else{if(Number($("#id_linguagem").val())==0){a=false;msg="O campo <strong>#ID LINGUAGEM</strong> &eacute; de preenchimento obrigat&oacute;rio."}else{if(Number($("#id_tipo_contagem").val())==0){a=false;msg="O campo <strong>#ID TIPO CONTAGEM</strong> &eacute; de preenchimento obrigat&oacute;rio."}else{if(Number($("#id_etapa").val())==0){a=false;msg="O campo <strong>#ID ETAPA</strong> &eacute; de preenchimento obrigat&oacute;rio."}else{if(Number($("#id_processo").val())==0){a=false;msg="O campo <strong>#ID PROCESSO</strong> &eacute; de preenchimento obrigat&oacute;rio."}else{if(Number($("#id_processo_gestao").val())==0){a=false;msg="O campo <strong>#ID PROCESSO GEST&Atilde;O</strong> &eacute; de preenchimento obrigat&oacute;rio."}else{if($("#proposito").val()===""){a=false;msg="O campo <strong>PROP&Oacute;SITO</strong> &eacute; de preenchimento obrigat&oacute;rio."}else{if($("#escopo").val()===""){a=false;msg="O campo <strong>ESCOPO</strong> &eacute; de preenchimento obrigat&oacute;rio."}else{if($("#ordem_servico").val()===""){a=false;msg="O campo <strong>ORDEM DE SERVI&Ccedil;O / DEMANDA / SOLICITA&Ccedil;&Atilde;O</strong> &eacute; de preenchimento obrigat&oacute;rio."}}}}}}}}}}}}}}}return a}function validarContagem(k,h,e,d,g,j,f){f?iWaitMenuContagem(e,true,d):null;$.post("/pf/DIM.Gateway.php",{i:h,r:j,t:g,arq:32,tch:0,sub:-1,dlg:1},function(a){var b;if(a.sucesso){switch(g){case"vi":b="validada internamente";break;case"ve":b="validada externamente";break;case"ai":b="auditada internamente";break;case"ae":b="auditada externamente";break}swal({title:"Informa&ccedil;&atilde;o",text:"A Contagem #ID: "+("0000000"+h).slice(-7)+" foi "+b+" com sucesso!",type:"success",html:true,confirmButtonText:"Obrigado!"},function(){if(f){iWaitMenuContagem(e,false,d);self.location.href="/pf/DIM.Gateway.php?arq=3&tch=2&sub=-1&dlg=1&id="+h+(abAtual==3?"&b=":abAtual==4?"&l=":"")}else{$("#form_modal_funcoes_perfil_contagem").modal("toggle")}})}else{if(g==="ve"||g==="vi"){swal({title:"Alerta",text:"Para finalizar a valida&ccedil;&atilde;o "+(g==="vi"?"interna":"externa")+" veja o seguinte:<br /> "+(g==="vi"?"(1) Todos os itens devem estar validados;<br />(2) Verifique se h&aacute; itens que voc&ecirc; enviou para revis&atilde;o;<br />":"(3)Verifique se h&aacute; apontes pendentes que voc&ecirc; inseriu.<br />")+"Caso haja alguma das condi&ccedil;&otilde;es acima, envie a contagem para revis&atilde;o.",type:"error",html:true,confirmButtonText:"Obrigado, vou verificar"},function(){$("#"+k).removeClass("disabled");iWaitMenuContagem(e,false,d)})}}},"json")}function solicitarRevisao(f,d,b){var e=$("#responsavel").val();iWaitMenuContagem("c-revisao",true,"fa fa-pencil-square-o");$.post("/pf/DIM.Gateway.php",{i:d,r:e,a:b,arq:31,tch:0,sub:-1,dlg:1},function(a){if(a.sucesso){swal({title:"Informa&ccedil;&atilde;o",text:"A Contagem #ID: "+("0000000"+d).slice(-7)+" foi enviada para revis&atilde;o!",type:"success",html:true,confirmButtonText:"Obrigado!"},function(){iWaitMenuContagem("c-revisao",false,"fa fa-pencil-square-o");self.location.href="/pf/DIM.Gateway.php?arq=3&tch=2&sub=-1&dlg=1&id="+d})}else{swal({title:"Alerta",text:"Para enviar a contagem para revis&atilde;o, verifique se h&aacute; itens marcados como <strong>em revis&atilde;o</strong>, n&atilde;o validados e/ou se voc&ecirc; inseriu algum aponte.",type:"error",html:true,confirmButtonText:"Obrigado, vou verificar"},function(){$("#"+f).removeClass("disabled");iWaitMenuContagem("c-revisao",false,"fa fa-pencil-square-o")})}},"json")}function finalizarRevisao(h,e,b){var f=$("#responsavel").val();var d=$("#email-validador").val();var g=$("#contagem-id-processo").val();iWaitMenuContagem("f-revisao",true,"fa fa-check-square-o");$.post("/pf/DIM.Gateway.php",{i:e,r:f,v:d,a:b,p:g,arq:18,tch:0,sub:-1,dlg:1},function(a){if(a.sucesso){swal({title:"Informa&ccedil;&atilde;o",text:"A Contagem #ID: "+("0000000"+e).slice(-7)+" teve sua revis&atilde;o finalizada e foi enviada novamente para valida&ccedil;&atilde;o "+(g==8?"interna":"externa")+"!",type:"success",html:true,confirmButtonText:"Obrigado!"},function(){iWaitMenuContagem("f-revisao",false,"fa fa-check-square-o");self.location.href="/pf/DIM.Gateway.php?arq=3&tch=2&sub=-1&dlg=1&id="+e})}else{swal({title:"Alerta",text:"H&aacute; itens que n&atilde;o foram revisados ou apontes que ainda n&atilde;o foram respondidos.",type:"error",html:true,confirmButtonText:"Obrigado, vou verificar"},function(){$("#"+h).removeClass("disabled");iWaitMenuContagem("f-revisao",false,"fa fa-check-square-o")})}},"json")}function finalizarContagem(a){$.post("/pf/DIM.Gateway.php",{i:a,arq:78,tch:0,sub:-1,dlg:0},function(b){if(b.idTarefa>0){swal({title:"Informa&ccedil;&atilde;o",text:"A Contagem #ID: "+("0000000"+a).slice(-7)+" foi enviada para faturamento",type:"success",html:true,confirmButtonText:"Obrigado"},function(){$("#form_modal_funcoes_perfil_contagem").modal("hide");tableLista.ajax.reload();pushState("/pf/DIM.Gateway.php?arq=3&tch=2&sub=-1&dlg=1","Dimension - M&eacute;tricas","/pf/DIM.Gateway.php?arq=3&tch=2&sub=-1&dlg=1")})}else{swal({title:"Alerta",text:b.msg,type:"error",html:true,confirmButtonText:"Obrigado, vou verificar"},function(){$("#form_modal_funcoes_perfil_contagem").modal("hide")})}},"json")}function autorizaAlteracaoCampos(a,b){$("#proposito").prop("readonly",!isAutorizadoAlterar);$("#escopo").prop("readonly",!isAutorizadoAlterar);$("#entregas").prop("disabled",!isAutorizadoAlterar);$("#ordem_servico").prop("readonly",!isAutorizadoAlterar);if(isFornecedor){$("#contagem_id_cliente").val(idCliente);$("#contagem_id_contrato").prop("disabled",!isAutorizadoAlterar);$("#contagem_id_projeto").prop("disabled",!isAutorizadoAlterar);$("#id-orgao").prop("disabled",!isAutorizadoAlterar)}else{if(abAtual==3||abAtual==4){$("#contagem_id_contrato").prop("disabled",true);$("#contagem_id_projeto").prop("disabled",true);$("#id-orgao").prop("disabled",true)}else{if(abAtual==2&&Number(b)>0){$("#contagem_id_contrato").prop("disabled",true);$("#contagem_id_projeto").prop("disabled",true);$("#contagem_id_baseline").prop("disabled",true);$("#id-orgao").prop("disabled",!isAutorizadoAlterar)}else{if(abAtual==2&&Number(b)<1){if(ac==="vw"||ac==="ve"||ac==="ai"||ac==="ae"){$("#contagem_id_contrato").prop("disabled",true);$("#contagem_id_projeto").prop("disabled",true);$("#contagem_id_baseline").prop("disabled",true);$("#id-orgao").prop("disabled",true)}else{$("#contagem_id_contrato").prop("disabled",false);$("#contagem_id_projeto").prop("disabled",false);$("#contagem_id_baseline").prop("disabled",false);$("#id-orgao").prop("disabled",false)}}else{$("#contagem_id_contrato").prop("disabled",!isAutorizadoAlterar);$("#contagem_id_projeto").prop("disabled",!isAutorizadoAlterar);$("#id-orgao").prop("disabled",!isAutorizadoAlterar)}}}}$("#id_linguagem").prop("disabled",!isAutorizadoAlterar);$("#id_tipo_contagem").prop("disabled",!isAutorizadoAlterar);$("#id_etapa").prop("disabled",!isAutorizadoAlterar);$("#id_industria").prop("disabled",!isAutorizadoAlterar);$("#id_banco_dados").prop("disabled",!isAutorizadoAlterar);$("#id_processo").prop("disabled",!isAutorizadoAlterar);$("#id_processo_gestao").prop("disabled",!isAutorizadoAlterar);$("#btn_placard_linguagem").prop("disabled",!isAutorizadoAlterar);$("#btn_placard_banco_dados").prop("disabled",!isAutorizadoAlterar);$("#btn_adicionar_ali").prop("disabled",!isAutorizadoAlterar);$("#btn_adicionar_aie").prop("disabled",!isAutorizadoAlterar);$("#btn_adicionar_ee").prop("disabled",!isAutorizadoAlterar);$("#btn_adicionar_se").prop("disabled",!isAutorizadoAlterar);$("#btn_adicionar_ce").prop("disabled",!isAutorizadoAlterar);$("#btn_adicionar_ou").prop("disabled",!isAutorizadoAlterar);$("#btn-pesquisar-ali").prop("disabled",(!isAutorizadoAlterar)||abAtual==3);$("#btn-pesquisar-aie").prop("disabled",!isAutorizadoAlterar);$("#btn-pesquisar-ee").prop("disabled",(!isAutorizadoAlterar)||abAtual==3);$("#btn-pesquisar-se").prop("disabled",(!isAutorizadoAlterar)||abAtual==3);$("#btn-pesquisar-ce").prop("disabled",(!isAutorizadoAlterar)||abAtual==3);$("#select-ALI").prop("disabled",!isAutorizadoValidarInternamente);$("#select-AIE").prop("disabled",!isAutorizadoValidarInternamente);$("#select-EE").prop("disabled",!isAutorizadoValidarInternamente);$("#select-SE").prop("disabled",!isAutorizadoValidarInternamente);$("#select-CE").prop("disabled",!isAutorizadoValidarInternamente);$("#select-OU").prop("disabled",!isAutorizadoValidarInternamente);if(isValidadaInternamente&&(ac!=="in"||ac!=="al")){$("#btn-selecionar-validador").prop("disabled",true);$("#btn-validar-contagem").prop("disabled",true);$("#chk_is_processo_validacao_1").prop("disabled",true);$("#chk_is_processo_validacao_2").prop("disabled",true);$("#privacidade").bootstrapToggle(isFornecedor?"disable":"enable")}else{if(!isValidadaInternamente&&ac==="vi"){$("#btn-selecionar-validador").prop("disabled",true);$("#btn-validar-contagem").prop("disabled",true);$("#chk_is_processo_validacao_1").prop("disabled",true);$("#chk_is_processo_validacao_2").prop("disabled",true);$("#privacidade").bootstrapToggle("disable")}else{if(ac==="vw"||ac==="re"||ac==="ai"||ac==="ae"){$("#btn-selecionar-validador").prop("disabled",true);$("#btn-validar-contagem").prop("disabled",true);$("#chk_is_processo_validacao_1").prop("disabled",true);$("#chk_is_processo_validacao_2").prop("disabled",true);$("#privacidade").bootstrapToggle("disable")}else{if(tpoFornecedor==1){$("#btn-selecionar-validador").prop("disabled",true);$("#btn-validar-contagem").prop("disabled",false);$("#chk_is_processo_validacao_1").prop("disabled",true).prop("checked",false);$("#chk_is_processo_validacao_2").prop("disabled",true).prop("checked",true);$("#privacidade").bootstrapToggle(isFornecedor?"disable":"enable")}else{$("#btn-selecionar-validador").prop("disabled",false);$("#btn-validar-contagem").prop("disabled",true);$("#chk_is_processo_validacao_1").prop("disabled",false);$("#chk_is_processo_validacao_2").prop("disabled",false);$("#privacidade").bootstrapToggle(isFornecedor?"disable":"enable")}}}}isAutorizadoAlterar?$("#btn-adicionar-arquivo").removeClass("disabled"):$("#btn-adicionar-arquivo").addClass("disabled");$("#files-start").prop("disabled",!isAutorizadoAlterar);$("#files-cancel").prop("disabled",!isAutorizadoAlterar);$("#files-delete").prop("disabled",!isAutorizadoAlterar);$("#chk-sel-todos").prop("disabled",!isAutorizadoAlterar);$(".delete").prop("disabled",!isAutorizadoAlterar);$(".toggle").prop("disabled",!isAutorizadoAlterar);$("#dados_id_roteiro").prop("disabled",false).css("background-color","#fff");$("#transacao_id_roteiro").prop("disabled",false).css("background-color","#fff");$("#outros_id_roteiro").prop("disabled",false).css("background-color","#fff");$("#dados_op1").prop("disabled",!isAutorizadoAlterar);$("#dados_op2").prop("disabled",!isAutorizadoAlterar);$("#dados_op3").prop("disabled",!isAutorizadoAlterar);$("#transacao_op1").prop("disabled",!isAutorizadoAlterar);$("#transacao_op2").prop("disabled",!isAutorizadoAlterar);$("#transacao_op3").prop("disabled",!isAutorizadoAlterar);$("#transacao_op4").prop("disabled",!isAutorizadoAlterar);$("#outros_op1").prop("disabled",!isAutorizadoAlterar);$("#outros_op1").prop("disabled",!isAutorizadoAlterar);$("#outros_op1").prop("disabled",!isAutorizadoAlterar);$("#dados_me1").prop("disabled",!isAutorizadoAlterar);$("#dados_me2").prop("disabled",!isAutorizadoAlterar);$("#dados_me3").prop("disabled",!isAutorizadoAlterar);$("#transacao_me1").prop("disabled",!isAutorizadoAlterar);$("#transacao_me2").prop("disabled",!isAutorizadoAlterar);$("#transacao_me3").prop("disabled",!isAutorizadoAlterar);$("#dados_impacto").prop("disabled",!isAutorizadoAlterar);$("#transacao_impaco").prop("disabled",!isAutorizadoAlterar);$("#outros_impacto").prop("disabled",!isAutorizadoAlterar);$("#dados_funcao").prop("readonly",!isAutorizadoAlterar);$("#dados_fonte").prop("readonly",!isAutorizadoAlterar);$("#dados_observacoes").prop("readonly",!isAutorizadoAlterar);$("#dados_observacoes_validacao").prop("readonly",!isAutorizadoAlterar);$("#transacao_funcao").prop("readonly",!isAutorizadoAlterar);$("#transacao_fonte").prop("readonly",!isAutorizadoAlterar);$("#transacao_observacoes").prop("readonly",!isAutorizadoAlterar);$("#transacao_observacoes_validacao").prop("readonly",!isAutorizadoAlterar);$("#outros_funcao").prop("readonly",!isAutorizadoAlterar);$("#outros_fonte").prop("readonly",!isAutorizadoAlterar);$("#outros_observacoes").prop("readonly",!isAutorizadoAlterar);$("#outros_observacoes_validacao").prop("readonly",!isAutorizadoAlterar);$("#dados_descricao_tr").prop("readonly",!isAutorizadoAlterar);$("#dados_descricao_td").prop("readonly",!isAutorizadoAlterar);$("#transacao_descricao_ar").prop("readonly",!isAutorizadoAlterar);$("#transcao_descricao_td").prop("readonly",!isAutorizadoAlterar);$("#dados_fd").prop("disabled",!isAutorizadoAlterar);$("#dados_fe").prop("disabled",!isAutorizadoAlterar);$("#transacao_fd").prop("disabled",!isAutorizadoAlterar);$("#dados_entrega").prop("disabled",!isAutorizadoAlterar);$("#transacao_entrega").prop("disabled",!isAutorizadoAlterar);$("#outros_entrega").prop("disabled",!isAutorizadoAlterar);$("#btn-adicionar-linha-lista").prop("disabled",!isAutorizadoAlterar);$("#chk_produtividade_global").bootstrapToggle(!isAutorizadoAlterar?"disable":"enable");$("#previsao_inicio").prop("disabled",!isAutorizadoAlterar);$("#btn-xml").prop("disabled",!isAutorizadoAlterar);$("#btn-csv").prop("disabled",!isAutorizadoAlterar);$("#btn-json").prop("disabled",!isAutorizadoAlterar);config_isEng?$("#prof-eng").prop("readonly",!isAutorizadoAlterar):null;config_isDes?$("#prof-des").prop("readonly",!isAutorizadoAlterar):null;config_isImp?$("#prof-imp").prop("readonly",!isAutorizadoAlterar):null;config_isTes?$("#prof-tes").prop("readonly",!isAutorizadoAlterar):null;config_isHom?$("#prof-hom").prop("readonly",!isAutorizadoAlterar):null;config_isImpl?$("#prof-impl").prop("readonly",!isAutorizadoAlterar):null;config_isEng?(!isAutorizadoAlterar?selectizeEng.disable():null):null;config_isDes?(!isAutorizadoAlterar?selectizeDes.disable():null):null;config_isImp?(!isAutorizadoAlterar?selectizeImp.disable():null):null;config_isTes?(!isAutorizadoAlterar?selectizeTes.disable():null):null;config_isHom?(!isAutorizadoAlterar?selectizeHom.disable():null):null;config_isImpl?(!isAutorizadoAlterar?selectizeImpl.disable():null):null;$("input[type=radio][name=expoente]").prop("disabled",!isAutorizadoAlterar);if(Number(abAtual)==3||Number(abAtual)==4){$("#dados_op2").prop("disabled",true);$("#dados_op3").prop("disabled",true);$("#transacao_op2").prop("disabled",true);$("#transacao_op3").prop("disabled",true);$("#outros_op2").prop("disabled",true);$("#outros_op3").prop("disabled",true)}config_isEng?$("#chk-eng").bootstrapToggle(!isAutorizadoAlterar?"disable":"enable"):null;config_isDes?$("#chk-des").bootstrapToggle(!isAutorizadoAlterar?"disable":"enable"):null;config_isImp?$("#chk-imp").bootstrapToggle(!isAutorizadoAlterar?"disable":"enable"):null;config_isTes?$("#chk-tes").bootstrapToggle(!isAutorizadoAlterar?"disable":"enable"):null;config_isHom?$("#chk-hom").bootstrapToggle(!isAutorizadoAlterar?"disable":"enable"):null;config_isImpl?$("#chk-impl").bootstrapToggle(!isAutorizadoAlterar?"disable":"enable"):null;$("#hpc").prop("readonly",!isAutorizadoAlterar);$("#hpa").prop("readonly",!isAutorizadoAlterar);$("#projeto-padrao").prop("disabled",!isAutorizadoAlterar);$("#projeto-urgente").prop("disabled",!isAutorizadoAlterar);$("#projeto-critico").prop("disabled",!isAutorizadoAlterar);$("#projeto-criticidade").prop("disabled",!isAutorizadoAlterar);$("#chk-solicitacao-servico-critica").bootstrapToggle(!isAutorizadoAlterar?"disable":"enable");$("#is-crud").bootstrapToggle(!isAutorizadoAlterar?"disable":"enable");$("#alterar-funcao-dados").prop("disabled",!isAutorizadoAlterar)}function autorizaAlteracaoCamposLinha(c,a){$("#"+a+"_id_roteiro").prop("disabled",false).css("background-color","#fff");$("#"+a+"_op1").prop("disabled",!c);$("#"+a+"_op2").prop("disabled",abAtual==3||abAtual==4?true:!c);$("#"+a+"_op3").prop("disabled",abAtual==3||abAtual==4?true:!c);a==="transacao"?$("#"+a+"_op4").prop("disabled",!c):null;$("#"+a+"_me1").prop("disabled",!c);$("#"+a+"_me2").prop("disabled",!c);$("#"+a+"_me3").prop("disabled",!c);$("#"+a+"_impacto").prop("disabled",!c);$("#"+a+"_funcao").prop("readonly",!c);$("#"+a+"_fonte").prop("readonly",!c);$("#"+a+"_observacoes").prop("readonly",!c);$("#"+a+"_observacoes_validacao").prop("readonly",!c);if(a==="dados"){$("#"+a+"_descricao_tr").prop("readonly",!c)}else{if(a==="transacao"){$("#"+a+"_descricao_ar").prop("readonly",!c)}}a!=="outros"?$("#"+a+"_descricao_td").prop("readonly",!c):null;if(a!=="outros"){$("#"+a+"-is-mudanca").bootstrapToggle(!c?"disable":"enable");$("#"+a+"-fase").prop("disabled",!c);$("#"+a+"_fd").prop("disabled",!c);$("#"+a+"_fe").prop("disabled",!c)}$("#"+a+"_entrega").prop("disabled",!c);if(isAutorizadoAlterar&&!c&&acForms==="al"){$("#"+a+"_btn_al").prop("disabled",!c);$("#"+a+"_btn_if").prop("disabled",true);$("#"+a+"_btn_in").prop("disabled",true)}else{if(ac==="vw"||ac==="vi"||ac==="ve"||ac==="ai"||ac==="ae"){$("#"+a+"_btn_al").prop("disabled",true);$("#"+a+"_btn_if").prop("disabled",true);$("#"+a+"_btn_in").prop("disabled",true)}else{$("#"+a+"_btn_al").prop("disabled",true);$("#"+a+"_btn_if").prop("disabled",false);$("#"+a+"_btn_in").prop("disabled",false)}}$(".tm-tag-remove").css({visibility:(!c?"hidden":"visible")})}function atualizaProcessoValidacao(g,d,f,c,b){if((d==="-"||(getQtdAtual("ALI")===1&&getQtdAtual("AIE")===1&&getQtdAtual("EE")===1&&getQtdAtual("SE")===1&&getQtdAtual("CE")===1&&getQtdAtual("OU")===1))&&c){swal({title:"Informa&ccedil;&atilde;o",text:"Antes de enviar ou n&atilde;o para o processo de valida&ccedil;&atilde;o voc&ecirc; deve inserir ao menos uma fun&ccedil;&atilde;o de DADOS e/ou TRANSA&Ccedil;&Atilde;O.",type:"error",html:true,confirmButtonText:"Entendi, obrigado!"});return false}switch(g){case 2:$.post("/pf/DIM.Gateway.php",{p:g,i:d,e:f,a:b,arq:3,tch:0,sub:-1,dlg:1},function(a){exibeMensagemProcesso(a.msg,d,c)},"json");break;case 3:$.post("/pf/DIM.Gateway.php",{p:g,i:d,e:f,a:b,arq:2,tch:0,sub:-1,dlg:1},function(a){exibeMensagemProcesso(a.msg,d,c)},"json");break;case 4:$.post("/pf/DIM.Gateway.php",{p:g,i:d,e:f,arq:1,tch:0,sub:-1,dlg:1},function(a){exibeMensagemProcesso(a.msg,d,c)},"json");break;case 5:$.post("/pf/DIM.Gateway.php",{p:g,i:d,e:f,arq:0,tch:0,sub:-1,dlg:1},function(a){exibeMensagemProcesso(a.msg,d,c)},"json");break;case 10:$.post("/pf/DIM.Gateway.php",{p:g,i:d,e:f,arq:4,tch:0,sub:-1,dlg:1},function(a){exibeMensagemProcesso(a.msg,d,c)},"json");break}}function exibeMensagemProcesso(c,b,a){swal({title:"Informa&ccedil;&atilde;o",text:c,type:"success",html:true,confirmButtonText:"Obrigado!"},function(){a?self.location.href="/pf/DIM.Gateway.php?arq=3&tch=2&sub=-1&dlg=1&id="+b+(abAtual==3?"&b=":abAtual==4?"&l=":""):tableLista.ajax.url("/pf/DIM.Gateway.php?arq=32&tch=1&sub=-1&dlg=1&p=id&v="+b).load()})}function gravaLogAuditoria(a,b,c){swal({title:"Alerta",text:"Opera&ccedil;&atilde;o n&atilde;o permitida! <br /><br /><kbd>"+a+"</kbd><br /><br />"+b,type:"error",html:true,confirmButtonText:"Entendi!"});$.post("/pf/DIM.Gateway.php",{e:a,u:b,a:c,arq:19,tch:0,sub:-1,dlg:1})}function verificaTDSInseridos(b){var e=$("#transacao_descricao_td").tagsManager("tags");var c=new Array();for(x=0;x<e.length;x++){var d=e[x];if(d.indexOf(b+".")>-1){c.push(e[x])}}for(y=0;y<c.length;y++){p=e.indexOf(c[y]);p>-1?e.splice(p,1):null}var a=e.slice(0);$("#transacao_descricao_td").tagsManager("empty");for(z=0;z<a.length;z++){$("#transacao_descricao_td").tagsManager("pushTag",a[z])}return true}function validaTag(j,g){var f=$("input:radio[name=chk-tipo-arquivo]:checked").val();var b=$("#sel_funcao_transacao").find("option:selected").text();var a,h,e;var d=g.split(".");var a;if(j==="TD"){if((d[0]!=="ali"&&d[0]!=="aie")&&d.length==1){if(g.substr(0,1)!=="."){a=b+"."+d[0];$("#transacao_descricao_td").tagsManager("popTag");$("#transacao_descricao_td").tagsManager("pushTag",a)}else{$("#transacao_descricao_td").tagsManager("popTag");$("#transacao_descricao_td").tagsManager("pushTag","."+a)}}else{if((d[0]==="ali"||d[0]==="aie")&&d.length<3){swal({title:"Alerta",text:"A descri&ccedil;&atilde;o do Tipo de Dado n&atilde;o est&aacute; no padr&atilde;o<br />[tipo].[nome].[descricao]<br />Ex.: ali.comentario.id_comentario",type:"error",html:true,confirmButtonText:"Entendi!"},function(){$("#transacao_descricao_td").tagsManager("popTag")})}else{if((d[0]==="ali"||d[0]==="aie")&&d.length>2){h=d[0]+"."+d[1];e=jQuery("#transacao_descricao_ar").tagsManager("tags");if(e.indexOf(h)<0){$("#transacao_descricao_ar").tagsManager("pushTag",h)}}else{if(d[1].length<1&&d[2].length<1){swal({title:"Alerta",text:"A descri&ccedil;&atilde;o do Tipo de Dado n&atilde;o est&aacute; no padr&atilde;o<br />[tipo].[nome].[descricao]<br />Ex.: ali.comentario.id_comentario",type:"error",html:true,confirmButtonText:"Entendi!"},function(){$("#transacao_descricao_td").tagsManager("popTag")})}}}}}else{if(j==="AR"){if((d[0]!=="ali"&&d[0]!=="aie")||d.length<=1||d[1].length<1){a=f+"."+d[0];$("#transacao_descricao_ar").tagsManager("popTag");$("#transacao_descricao_ar").tagsManager("pushTag",a);return false}}}return true}function notifyMe(a){if(Notification.permission!=="granted"){Notification.requestPermission()}else{var b=new Notification("Alerta",{icon:"https://pfdimension.com.br/pf/img/Dimension.png",body:a});b.onclick=function(){return true}}}function adicionarDescricaoPaste(a,b){jQuery(b).tagsManager("pushTag",a);return""}function atualizaComboPaste(a){$("#sel_funcao_transacao").empty();for(x=0;x<a.length;x++){$("#sel_funcao_transacao").append('<option value="'+(x+1)+'">'+a[x]+"</option>")}if(x==0){$("#sel_funcao_transacao").append('<option value="0">...</option>')}}function verificaIntegridadeTD(b,e,d,c,a){$.post("/pf/DIM.Gateway.php",{fun:b,icn:e,tbl:d,iba:c,tag:a,arq:84,tch:1,sub:-1,dlg:0},function(m){if(m){if(m.length>0){var g="alert-danger";var l="warning";var k="dados";var j=$("#"+k+"_log").html();var o="Refer&ecirc;ncias ao TD (<strong>"+a+"</strong>)<br />";for(x=0;x<m.length;x++){o+="[ "+(x+1)+" ]  "+m[x].tipo+" - "+m[x].funcao+" - "+m[x].fonte+"; <br />"}j+='<div class="alert '+g+' alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&nbsp;<i class="fa fa-times-circle"></i>&nbsp;</span></button><button type="button" class="close" data-dismiss="alert" aria-label="Close" data-toggle="tooltip" data-placement="left" title="Desfazer" onclick="javascript: $(\'#dados_descricao_td\').tagsManager(\'pushTag\', \''+a+'\'); return false;"><span aria-hidden="true">&nbsp;<i class="fa fa-undo"></i>&nbsp;</span></button><button type="button" class="close" data-dismiss="alert" aria-label="Close" data-toggle="tooltip" data-placement="left" title="Inserir em observações" onclick="javascript: $(\'#dados_observacoes\').val($(\'#dados_observacoes\').val() + $(\'#log-atual\').html().stripHTMLSpace()); return false;"><span aria-hidden="true">&nbsp;<i class="fa fa-upload"></i>&nbsp;</span></button><i class="fa '+l+'"></i><span id="log-atual">'+o+"</span></div>";$("#"+k+"_log").html(j);$('[data-toggle="tooltip"]').tooltip()}}},"json")}function copiarTDs(){var a=$("#dados_descricao_td").tagsManager("tags");for(x=0;x<a.length;x++){jQuery("#dados_descricao_tr").tagsManager("pushTag",a[x])}}function montaThead(a){if(a==="lista"){$("#th1").css("width","05%");$("#th2").css("width","05%");$("#th3").css("width","08%");$("#th4").css("width","18%");$("#th5").css("width","12%");$("#th6").css("width","26%");$("#th7").css("width","26%");$("#th8").css("width","00%");$("#sp1").html("Resp.");$("#sp2").html("#ID");$("#sp3").html(isFornecedor==1&&tpoFornecedor==1?"Turma":"Fornecedor");$("#sp4").html("Processo");$("#sp5").html("M&eacute;trica");$("#sp6").html("Cliente/Contrato - O.S.");$("#sp7").html("Projeto");$("#sp8").html("")}else{if(a==="analises"){$("#th1").css("width","05%");$("#th2").css("width","05%");$("#th3").css("width","10%");$("#th4").css("width","5%");$("#th5").css("width","5%");$("#th6").css("width","10%");$("#th7").css("width","37%");$("#th8").css("width","23%");$("#sp1").html("R1");$("#sp2").html("#ID");$("#sp3").html("M&eacute;trica");$("#sp4").html("R2");$("#sp5").html("#ID");$("#sp6").html("M&eacute;trica");$("#sp7").html("Projeto - O.S.");$("#sp8").html("Analise")}}}function searchInTable(a,d,f){var h,b,j,g,c,e;h=document.getElementById(a);b=h.value.toUpperCase();j=document.getElementById(d);g=j.getElementsByTagName("tr");for(e=0;e<g.length;e++){c=g[e].getElementsByTagName("td")[f];if(c){if(c.innerHTML.toUpperCase().indexOf(b)>-1){g[e].style.display=""}else{g[e].style.display="none"}}}}function setSelectedFromValue(d,a){var b=document.getElementById(d).options;for(var c=0;c<b.length;c++){if(b[c].value===a){b[c].selected=true;break}}}function setNoneSelected(c){var a=document.getElementById(c).options;for(var b=0;b<a.length;b++){a[b].selected=false}}function exibeCampoEntrega(a,c,d,b){$(a).on("click",function(){if(!$(this).hasClass("ed")){$(this).html('<input type="text" class="form-control input_style_mini" value="'+$(this).html()+'" data-mask="00" maxlength="2" id="'+d+"_"+c+'">').addClass("ed");$("#"+d+"_"+c).on("blur",function(g){g.preventDefault();g.stopPropagation();var f=Number($(this).val());var h=Number($("#entregas").val());if($(this).val()===""||f==0||f>h){$(this).val(1).get(0).focus();return false}else{$(a).html($(this).val()).removeClass("ed");calculaDistribuicaoEntregas();atualizaQuantidadeEntregas(d,c.toLowerCase(),"entrega",$(this).val(),b)}}).select().attr("data-selected-all",true).mask("00").get(0).focus();document.execCommand("selectall")}})}function atualizaQuantidadeEntregas(e,b,d,c,a){$.post("/pf/DIM.Gateway.php",{arq:1,tch:1,sub:-1,dlg:0,id:e,tb:b,cp:d,vl:c,ic:a},function(f){},"json")}function exibeDivLoading(){$("#div-fade-loading").css("visibility","visible")}function ocultaDivLoading(){$("#div-fade-loading").css("visibility","hidden")}function getSomaPFAFatorTecnologia(){var a=Number($("#pfaEE").html());var b=Number($("#pfaSE").html());var c=Number($("#pfaCE").html());return parseFloat(a+b+c).toFixed(4)};