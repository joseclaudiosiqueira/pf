
$("#form_modal_configuracoes_cocomo_linguagem").on("hidden.bs.modal",function(){$("#addLinhaLinguagem").empty()});$("#form_modal_configuracoes_cocomo_linguagem").on("shown.bs.modal",function(){atualizaTabelaLinguagem()});$("#inserir-linguagem").on("click",function(){if(isFornecedor){swal({title:"Alerta",text:"Voc&ecirc; est&aacute; logado como um Fornecedor, as altera&ccedil;&otilde;es ser&atilde;o descartadas.",type:"warning",html:true,confirmButtonText:"Ok, obrigado!"})}else{var a=$("#config_id_cliente option:selected").val();inserirAlterarLinguagem("i",0,a)}});function addLinhaLinguagem(y,w,v,s,p,n,k,i,f,A,z){var g=$("#addLinhaLinguagem").get(0);var l=g.insertRow(i);f!==""?l.setAttribute("style","background-color:"+f):null;var u=l.insertCell(0);var q=l.insertCell(1);var o=l.insertCell(2);var m=l.insertCell(3);var j=l.insertCell(4);var h=l.insertCell(5);var e=l.insertCell(6);var d=l.insertCell(7);var c=l.insertCell(8);var b=v==1?"checked":"";var a=z==1?"checked":"";u.innerHTML='<input type="text" class="input_style" value="'+w+'" id="des-'+y+'">';q.innerHTML='<input type="text" class="input_style mask-prod" value="'+Number(s).toFixed(2)+'" id="bai-'+y+'" maxlength="5">';o.innerHTML='<input type="text" class="input_style mask-prod" value="'+Number(p).toFixed(2)+'" id="med-'+y+'" maxlength="5">';m.innerHTML='<input type="text" class="input_style mask-prod" value="'+Number(n).toFixed(2)+'" id="alt-'+y+'" maxlength="5">';j.innerHTML='<input type="text" class="input_style mask-sloc" value="'+k+'" id="slo-'+y+'">';h.innerHTML='<input type="text" class="input_style mask-prod" value="'+Number(A).toFixed(2)+'" id="ft-'+y+'" maxlength="4">';e.innerHTML='<input onchange="alteraIsFT($(this).val(), $(this).prop(\'checked\'));" id="is-ft-'+y+'" value="'+y+'" type="checkbox" data-toggle="toggle" data-onstyle="success" data-style="slow" data-on="Sim" data-off="NÃ£o" data-width="100" class="datatoggle" '+a+" "+(isFornecedor?"disabled":"")+">";d.innerHTML='<input onchange="alteraStatusLinguagem($(this).val(), $(this).prop(\'checked\'));" id="atv-'+y+'" value="'+y+'" type="checkbox" data-toggle="toggle" data-onstyle="success" data-style="slow" data-on="Ativo" data-off="Inativo" data-width="100" class="datatoggle" '+b+" "+(isFornecedor?"disabled":"")+">";c.innerHTML='<button type="button" class="btn btn-default" onclick="atualizaLinguagem($(this).val());" value="'+y+" "+(isFornecedor?"disabled":"")+'">&nbsp;<i class="fa fa-refresh"></i>&nbsp;Atualizar</button>';$(".datatoggle").bootstrapToggle();$(".mask-prod").mask("#.##0.00",{reverse:true});$(".mask-sloc").mask("000")}function alteraStatusLinguagem(b,a){if(!isFornecedor){iWait("w_linguagem_status",true);$.post("/pf/DIM.Gateway.php",{i:b,p:a?1:0,arq:75,tch:0,sub:0,dlg:1},function(c){iWait("w_linguagem_status",false)},"json")}}function alteraIsFT(b,a){if(!isFornecedor){iWait("w_is_ft",true);$.post("/pf/DIM.Gateway.php",{idl:b,prp:a?1:0,arq:94,tch:0,sub:0,dlg:1},function(c){if(!(c.status)){swal({title:"Alerta",text:"Esta linguagem est&aacute; sendo utilizada em contagens como Fator Tecnologia e n&atilde;o pode ser alterada. Crie uma V2 com a nova configura&ccedil;&atilde;o.",type:"warning",html:true,confirmButtonText:"Ok, obrigado!"},function(){$("#is-ft-"+b).bootstrapToggle("on")})}iWait("w_is_ft",false)},"json")}}function atualizaTabelaLinguagem(){$("#addLinhaLinguagem").empty();iWaitMenuContagem("w_calibracao_linguagem",true,"fa fa-cogs");$.post("/pf/DIM.Gateway.php",{arq:82,tch:1,sub:0,dlg:1,icl:$("#config_id_cliente option:selected").val()},function(a){for(x=0;x<a.length;x++){addLinhaLinguagem(a[x].id,a[x].descricao,a[x].is_ativo,a[x].baixa,a[x].media,a[x].alta,a[x].sloc,-1,"",a[x].fator_tecnologia,a[x].is_ft)}iWaitMenuContagem("w_calibracao_linguagem",false,"fa fa-cogs")},"json")}function atualizaLinguagem(b){var a=$("#config_id_cliente option:selected").val();if(!isFornecedor){inserirAlterarLinguagem("a",b,a)}};